var sn=Object.defineProperty,ln=Object.defineProperties;var an=Object.getOwnPropertyDescriptors;var _t=Object.getOwnPropertySymbols;var rn=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable;var vt=(e,t,o)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ce=(e,t)=>{for(var o in t||(t={}))rn.call(t,o)&&vt(e,o,t[o]);if(_t)for(var o of _t(t))cn.call(t,o)&&vt(e,o,t[o]);return e},Ne=(e,t)=>ln(e,an(t));import{c as L,o as E,a as z,b as C,u as b,m as ue,r as me,d as un,e as yt,f as P,g as be,n as q,h as Re,i as T,j as d,p as dn,k as Y,w as R,l as Te,q as Oe,s as Pe,t as ne,v as ye,x as Ee,y as we,z as oe,A as Be,F as J,B as de,C as Ae,D as Le,E as N,T as bt,G as Ge,O as fn,H as pn,I as mn,J as gn,K as hn,L as wt,M as _n,N as St,P as vn,Q as xt,R as ee,S as Xe,U as yn,V as bn,W as wn,X as K,Y as Sn,Z as xn,_ as Cn,$ as kn}from"./vendor.8b912d46.js";const $n=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}};$n();if(typeof window!="undefined"){let e=function(){let t=document.body,o=document.getElementById("__svg__icons__dom__1647681161121__");o||(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.style.position="absolute",o.style.width="0",o.style.height="0",o.id="__svg__icons__dom__1647681161121__"),o.innerHTML='<symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-bottom"><rect x="3.333" y="16.666" width="1.667" height="13.333" rx=".833" transform="rotate(-90 3.333 16.666)" fill="#636C78" /><path d="M7.5 3.611A1.11 1.11 0 0 1 8.611 2.5h2.778A1.11 1.11 0 0 1 12.5 3.611v8.611c0 .614-.498 1.111-1.111 1.111H8.61a1.111 1.111 0 0 1-1.111-1.11V3.61z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8.944 3.944v7.945h2.112V3.944H8.944zM8.611 2.5A1.11 1.11 0 0 0 7.5 3.611v8.611a1.11 1.11 0 0 0 1.111 1.111h2.778a1.11 1.11 0 0 0 1.111-1.11V3.61c0-.614-.498-1.111-1.111-1.111H8.61z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-center"><path d="M17.5 4.167h-15v1.666h15V4.167zM15 7.5H5v1.667h10V7.5zM2.5 10.833h15V12.5h-15v-1.667zM15 14.167H5v1.666h10v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-horizontal-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 3.333a.833.833 0 0 0-.833.834V7.5h1.666V4.167A.833.833 0 0 0 10 3.334zm.833 9.167H9.167v3.334a.833.833 0 0 0 1.666 0V12.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15.367 8.8H4.633v2.4h10.734V8.8zm1.3-.3a1 1 0 0 0-1-1H4.333a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h11.334a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-justify"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333h-15v1.667h15V7.5zm-15 3.333h15V12.5h-15v-1.667zm11 3.334h-11v1.666h11v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-left"><rect x="3.333" y="3.333" width="1.667" height="13.333" rx=".833" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2 8.8H7.967v2.4H16.2V8.8zm1.3-.3a1 1 0 0 0-1-1H7.667a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1H16.5a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-right"><rect width="1.667" height="13.333" rx=".833" transform="matrix(-1 0 0 1 16.667 3.333)" fill="#636C78" /><path d="M3.5 7.5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h8.833a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 8.8h8.233v2.4H3.8V8.8zm-1.3-.3a1 1 0 0 1 1-1h8.833a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-top"><rect x="16.667" y="3.333" width="1.667" height="13.333" rx=".833" transform="rotate(90 16.667 3.333)" fill="#636C78" /><path d="M12.5 16.5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V7.667a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1V16.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 16.2V7.967H8.8V16.2h2.4zm.3 1.3a1 1 0 0 0 1-1V7.667a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1V16.5a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-vertical-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.667 10a.833.833 0 0 0-.834-.834H12.5v1.667h3.333c.46 0 .834-.373.834-.833zm-9.167.833V9.166H4.167a.833.833 0 0 0 0 1.667H7.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 15.367V4.633H8.8v10.733h2.4zm.3 1.3a1 1 0 0 0 1-1V4.332a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v11.334a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-down--line"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.94 5.727 8 8.78l3.06-3.053.94.94-4 4-4-4 .94-.94z" /></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-left"><path d="m16.23 23.58 2.24-2a.5.5 0 0 0 0-.71L10.57 12l7.93-8.87a.5.5 0 0 0 0-.71l-2.24-2a.5.5 0 0 0-.71 0L5.2 12l10.32 11.54a.5.5 0 0 0 .71.04z" data-name="Arrow Left" /></symbol><symbol viewBox="0 0 8 4" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-up"><path fill-rule="evenodd" clip-rule="evenodd" d="M.854 3.146A.5.5 0 0 0 1.207 4h5.586a.5.5 0 0 0 .353-.854L4.354.354a.5.5 0 0 0-.708 0L.854 3.146z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__bold"><path d="M6.375 13.125V9.75h3.563c.93 0 1.687.757 1.687 1.688a1.69 1.69 0 0 1-1.688 1.687H6.376zm0-8.25h3c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-3v-3zm6.375 1.5A3.375 3.375 0 0 0 9.375 3H4.5v12h5.438a3.562 3.562 0 0 0 3.562-3.563c0-1.212-.609-2.28-1.534-2.923a3.347 3.347 0 0 0 .784-2.139z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__copy"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.375 4.5h8.25a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-8.25a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75zm.75 1.5v9h6.75V6h-6.75zm4.5-3h-7.5v9.75h-1.5V2.25a.75.75 0 0 1 .75-.75h8.25V3z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__deleteline"><path d="M3.75 4.875V3h10.5v1.875H9.937V7.5H15V9H3V7.5h5.063V4.875H3.75zM9.938 15H8.063v-4.5h1.875V15z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__italic"><path d="M7.5 3v1.5h1.665l-2.25 9H5.25V15h5.25v-1.5H8.843l2.251-9h1.657V3H7.5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-down"><g mask="url(#hda)"><path fill-rule="evenodd" clip-rule="evenodd" d="m15.071 10.568 2.775-1.942a.416.416 0 0 0 0-.683l-7.607-5.325a.417.417 0 0 0-.478 0L2.154 7.943a.417.417 0 0 0 0 .683l2.775 1.942 1.385-1.065-1.74-1.219L10 4.486l5.428 3.798-1.741 1.219 1.384 1.065z" fill="#636C78" /><path d="M10.833 15H9.167V8.333a.833.833 0 1 1 1.666 0V15z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 14.655-2.327-2.328a.833.833 0 1 0-1.179 1.179l2.77 2.77a1.042 1.042 0 0 0 1.473 0l2.769-2.77a.833.833 0 1 0-1.179-1.179L10 14.655z" fill="#33383E" /></g></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-up"><g mask="url(#hfa)"><path fill-rule="evenodd" clip-rule="evenodd" d="m4.929 9.432-2.775 1.942a.417.417 0 0 0 0 .683l7.607 5.325c.143.1.334.1.478 0l7.607-5.325a.415.415 0 0 0 0-.683L15.07 9.432l-1.384 1.065 1.74 1.219L10 15.514l-5.428-3.798 1.741-1.219L4.93 9.432z" fill="#636C78" /><path d="M9.167 5h1.666v6.667a.833.833 0 0 1-1.666 0V5z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 5.345 2.327 2.328a.833.833 0 1 0 1.179-1.179l-2.77-2.77a1.042 1.042 0 0 0-1.473 0l-2.769 2.77a.833.833 0 1 0 1.179 1.179L10 5.345z" fill="#33383E" /></g></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667 2.33 5.885a.417.417 0 0 0 0 .73L10 10.833l7.67-4.218a.417.417 0 0 0 0-.73L10 1.667zm4.875 4.583L10 3.57 5.125 6.25 10 8.931l4.875-2.68z" /><path d="M17.5 8.674 10 12.799 2.5 8.674v1.902l7.5 4.125 7.5-4.125V8.674z" /><path d="M17.5 12.424 10 16.55l-7.5-4.125v1.902l7.5 4.125 7.5-4.125v-1.902z" /></symbol><symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__locked"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 11v8h12v-8H6zM5 9a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1H5z" fill="#F54531" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9V7a3 3 0 0 0-6 0v2h6zm-3-7a5 5 0 0 0-5 5v3.95c0 .027.023.05.05.05h9.9a.05.05 0 0 0 .05-.05V7a5 5 0 0 0-5-5z" fill="#F54531" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__spacing"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 16.667h1.667V3.333H2.5v13.334zm13.333 0H17.5V3.333h-1.667v13.334zM10 6.75l-1.708 4.083h3.416L10 6.75zM8.933 5h2.133l4.009 9.583h-1.808L12.4 12.5H7.6l-.867 2.083H4.925L8.933 5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__straw"><path d="m4.879 13.227 6.954-6.953 2.121 2.12L7 15.35c-.296.295-.651.5-.97.56l-1.592.299c-.298.056-.474-.12-.418-.419l.298-1.591c.06-.32.265-.675.56-.97z" stroke="#606770" stroke-width="1.5" /><path fill-rule="evenodd" clip-rule="evenodd" d="m15.079 7.912.38 2.345a.5.5 0 0 1-.14.433l-.35.35a.5.5 0 0 1-.707 0L9.077 5.854a.5.5 0 0 1 0-.707l.353-.353a.5.5 0 0 1 .426-.141l2.261.328 2.428-2.428A2.083 2.083 0 0 1 17.492 5.5l-2.413 2.412z" fill="#606770" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-left"><path d="M17.5 4.167h-15v1.666h15V4.167zM13.333 7.5H2.5v1.667h10.833V7.5zM2.5 10.833h15V12.5h-15v-1.667zm10.833 3.334H2.5v1.666h10.833v-1.666z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-right"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333H6.667v1.667H17.5V7.5zm-15 3.333h15V12.5h-15v-1.667zm15 3.334H6.667v1.666H17.5v-1.666z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-distortion"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.216 5.413a14.496 14.496 0 0 0-10.432 0l.998 7.981a13.637 13.637 0 0 1 8.436 0l.998-7.981zM3.121 4.24a1.1 1.1 0 0 0-.682 1.157l1.094 8.75a.854.854 0 0 0 1.147.694 12.302 12.302 0 0 1 8.64 0 .854.854 0 0 0 1.148-.694l1.094-8.75a1.1 1.1 0 0 0-.683-1.157 15.83 15.83 0 0 0-11.758 0z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.334 13.58 6 4.58l1.333-.05.333 9-1.332.05zm4-9.382L10 13.532l1.332.047.333-9.333-1.332-.048z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M14.333 8.719a18.618 18.618 0 0 0-10.666 0v1.396a17.285 17.285 0 0 1 10.666 0V8.72z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__trash"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.982 1.5a.375.375 0 0 0-.336.207L6 3H2.625v1.5h1.17l.707 11.3a.75.75 0 0 0 .748.7h7.5a.75.75 0 0 0 .748-.7l.707-11.3h1.17V3H12l-.646-1.293a.375.375 0 0 0-.336-.207H6.982zM5.3 4.5h7.397l-.65 10.5H5.951l-.65-10.5z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__underline"><path d="M4.875 3v5.625A4.13 4.13 0 0 0 9 12.75a4.13 4.13 0 0 0 4.125-4.125V3H11.25v5.625c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V3H4.875zm9.375 10.5V15H3.75v-1.5h10.5z" /></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__unlock"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9H9V7a3 3 0 0 1 6 0h2A5 5 0 0 0 7 7v2H5a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4zm-7.95 2H6v8h12v-8H7.05z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__writing-mode"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.666 4.583V3.75h10v2.5H15v-.833h-2.5v9.166h1.666v1.667H9.167v-1.667h1.666V5.417h-2.5v.834H6.667V4.583zm-3.332 7.084v-7.5H5v7.5h1.667l-3.333 4.166v-4.166z" /></symbol>',t.insertBefore(o,t.firstChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}var G=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const En=["xlink:href"],In={name:"SvgIcon"};function Mn(e){const t=e,o=L(()=>`#svg-icon__${t.filename}`);return(n,s)=>(E(),z("svg",ue({class:[`svg-icon__${e.filename}`,"svg-icon"],"aria-hidden":"true"},n.$attrs),[C("use",{"xlink:href":b(o)},null,8,En)],16))}const zn=Object.assign(In,{props:{filename:String},setup:Mn});var Ct=G(zn,[["__scopeId","data-v-3d81af54"]]);const Rn={name:"SkyButton"};function Tn(e){const t=e,o=L(()=>{const n=[];return t.size&&n.push(`sky-button--${t.size}`),t.plain&&n.push("sky-button--plain"),n});return(n,s)=>(E(),z("button",ue({type:"button",class:["sky-button",b(o)]},n.$attrs),[me(n.$slots,"default",{},void 0,!0)],16))}const On=Object.assign(Rn,{props:{plain:{type:Boolean,default:!1},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},setup:Tn});var Pn=G(On,[["__scopeId","data-v-504bc46a"]]);const Bn=["type","value"],An={key:0,class:"sky-input__append flex-center"},Ln={name:"SkyInput"};function Hn(e,{emit:t}){const o=e,n=un(),s=yt(),l=P(null),a=L(()=>{const c=[];return o.size&&c.push(`sky-input--${o.size}`),n.append&&c.push("sky-input--append"),c});function i(c){t("input",c.target.value,c)}function r(c){t("change",c.target.value,c),Re(()=>{l.value.value=o.value})}return(c,u)=>(E(),z("div",{class:q(["sky-input",[...b(a),b(s).class]])},[C("input",ue({ref:(m,g)=>{g.elInput=m,l.value=m},class:"sky-input__inner",type:e.type,value:e.value},c.$attrs,{onInput:i,onChange:r}),null,16,Bn),c.$slots.append?(E(),z("div",An,[me(c.$slots,"append",{},void 0,!0)])):be("",!0)],2))}const Dn=Object.assign(Ln,{props:{value:[String,Number],type:{type:String,default:"text"},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},emits:["input","change"],setup:Hn});var kt=G(Dn,[["__scopeId","data-v-3d656d19"]]);const Ie=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e);const Vn={name:"SkyInputNumber",inheritAttrs:!1};function jn(e,{emit:t}){const o=e,n=yt(),s=L(()=>{const g="sky-input__number",$=[g,o.class];return n.size&&$.push(`${g}--${n.size}`),n.readonly!==void 0&&$.push(`${g}-readonly`),$}),l=L(()=>typeof o.max=="number"&&n.value>=o.max),a=L(()=>typeof o.min=="number"&&n.value<=o.min);function i(g){return g=Number(g),typeof o.min=="number"&&(g<o.min&&(g=o.min),g>o.max&&(g=o.max)),g}function r(g,$){t("input",i(g),$)}function c(g,$){t("change",i(g),$)}function u(){l.value||t("change",Ie(n.value+o.step,{decimal:o.decimal}))}function m(){a.value||t("change",Ie(n.value-o.step,{decimal:o.decimal}))}return(g,$)=>{const I=T("svg-icon");return E(),z("div",{class:q(b(s))},[d(kt,ue({type:"number"},b(n),{onInput:r,onChange:c}),null,16),C("div",{class:q(["sky-input__number-arrow flex-center top-0",{"sky-disabled":b(l)}]),onClick:u},[d(I,{filename:"arrow-up"})],2),C("div",{class:q(["sky-input__number-arrow flex-center bottom-0",{"sky-disabled":b(a)}]),style:{transform:"rotateX(180deg)"},onClick:m},[d(I,{filename:"arrow-up"})],2)],2)}}const Fn=Object.assign(Vn,{props:{min:Number,max:Number,decimal:{type:Number,default:0},step:{type:Number,default:1},class:{type:String,default:""}},emits:["input","change"],setup:jn});var Nn=G(Fn,[["__scopeId","data-v-00c01dec"]]);const Gn=e=>(Te("data-v-a4f171f0"),e=e(),Oe(),e),qn={class:"sky-select","data-sky-popup":""},Un=Gn(()=>C("div",{class:"absolute w-full h-full top-0 cursor-pointer"},null,-1)),Wn={class:"sky-select__arrow flex-center"},Kn={name:"SkySelect"};function Yn(e,{expose:t,emit:o}){const n=e;dn("vmSelect",Pe());const s=P(!1),l=P(!n.lazyOption);function a(){l.value=!0,Re(()=>{s.value=!s.value})}function i(r){o("update:value",r),o("change",r),s.value=!1}return t({handleChange:i}),(r,c)=>{const u=T("SkyInput"),m=T("svg-icon"),g=T("SkyPopup");return E(),z("div",qn,[C("div",{onClick:a},[d(u,{value:e.value,readonly:""},null,8,["value"]),Un,C("div",Wn,[d(m,{filename:"arrow-down--line"})])]),l.value?(E(),Y(g,{key:0,visible:s.value,"onUpdate:visible":c[0]||(c[0]=$=>s.value=$),class:"sky-select__popup"},{default:R(()=>[me(r.$slots,"default",{},void 0,!0)]),_:3},8,["visible"])):be("",!0)])}}const Xn=Object.assign(Kn,{props:{value:{type:[String,Number],required:!0},lazyOption:{type:Boolean,default:!0}},emits:["update:value","change"],setup:Yn});var Jn=G(Xn,[["__scopeId","data-v-a4f171f0"]]);const Zn={key:1},Qn={name:"SkyOption",inheritAttrs:!1};function eo(e){const t=e,o=ne("vmSelect"),n=L(()=>({active:t.value===o.props.value}));function s(){o.exposed.handleChange(t.value)}return(l,a)=>(E(),z("div",{class:q(["sky-option",b(n)]),onClick:s},[l.$slots.default?me(l.$slots,"default",{key:0},void 0,!0):(E(),z("span",Zn,ye(e.label),1))],2))}const to=Object.assign(Qn,{props:{label:{type:String,default:""},value:{required:!0}},setup:eo});var no=G(to,[["__scopeId","data-v-050ebc6e"]]);const He=(e,{onmousedown:t,onmousemove:o,onmouseup:n}={})=>{let s=e.getBoundingClientRect();const l={x:0,y:0},a=u=>{let m=u.pageX-s.x,g=u.pageY-s.y;m<0&&(m=0),m>s.width&&(m=s.width),g<0&&(g=0),g>s.height&&(g=s.height),l.x=Ie(m/s.width,{decimal:2}),l.y=Ie(g/s.height,{decimal:2})},i=u=>{a(u),o&&o(l,u)},r=u=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),n&&n(l,u)},c=u=>{s=e.getBoundingClientRect(),a(u),document.addEventListener("mousemove",i),document.addEventListener("mouseup",r),t&&t(l,u)};return e.addEventListener("mousedown",c),{destroy(){e.removeEventListener("mousedown",c)}}},$t=(e,t,o)=>{let n=Math.round(e).toString(16),s=Math.round(t).toString(16),l=Math.round(o).toString(16);return n.length===1&&(n="0"+n),s.length===1&&(s="0"+s),l.length===1&&(l="0"+l),"#"+n+s+l},qe=(e,t,o,n=1)=>{const s=$t(e,t,o);let l=Math.round(n*255).toString(16);return l.length===1&&(l="0"+l),s+l},Et=(e,t,o)=>{e/=255,t/=255,o/=255;const n=Math.min(e,t,o),s=Math.max(e,t,o),l=s-n;let a=0,i=0;const r=s;if(l===0)a=i=0;else{i=l/s;const c=((s-e)/6+l/2)/l,u=((s-t)/6+l/2)/l,m=((s-o)/6+l/2)/l;e===s?a=m-u:t===s?a=1/3+c-m:o===s&&(a=2/3+u-c),a<0?a+=1:a>1&&(a-=1)}return[a*360,i*100,r*100]},oo=(e,t,o,n=1)=>[...Et(e,t,o),n];function so(e,t,o){e=e/360*6,t/=100,o/=100;const n=Math.floor(e),s=e-n,l=o*(1-t),a=o*(1-s*t),i=o*(1-(1-s)*t),r=n%6,c=[o,a,l,l,i,o][r],u=[i,o,o,a,l,l][r],m=[l,l,i,o,o,a][r];return[Math.round(c*255),Math.round(u*255),Math.round(m*255)]}const lo=(e,t,o)=>{const[n,s,l]=so(e,t,o);return $t(n,s,l)},ao=(e,t,o,n=1)=>`${lo(e,t,o)}${n===0?"00":Math.round(n*255).toString(16)}`,Je=e=>{e=e.slice(0,7);let t=0,o=0,n=0;return e.length==4?(t=+("0x"+e[1]+e[1]),o=+("0x"+e[2]+e[2]),n=+("0x"+e[3]+e[3])):e.length==7&&(t=+("0x"+e[1]+e[2]),o=+("0x"+e[3]+e[4]),n=+("0x"+e[5]+e[6])),[t,o,n]},Ze=e=>{const t=Je(e),o=+("0x"+e[7]+e[8]);return[...t,+(o/255).toFixed(2)]},io=e=>{const[t,o,n,s]=Ze(e);return oo(t,o,n,s)},It=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",Mt=(e,t)=>{const o=[];return t.forEach(n=>{o.push(`${n.color} ${n.offset*100}%`)}),`linear-gradient(${e}deg, ${o.join(",")})`};const Qe=e=>(Te("data-v-50c50297"),e=e(),Oe(),e),ro={class:"sky-color-picker"},co={class:"mb-3"},uo={key:1,class:"sky-cp__gradient flex-center"},fo={class:"sky-cp__gradient-bar w-48 h-4"},po=["data-sort","onMousedown","onKeyup"],mo=Qe(()=>C("div",{class:"sky-cpp__color-saturation"},null,-1)),go=Qe(()=>C("div",{class:"sky-cpp__color-value"},null,-1)),ho={class:"sky-cps__track"},_o={class:"sky-cps__track"},vo={class:"flex justify-between mt-3.5"},yo={key:0,class:"sky-cp__picking-model"},bo=Qe(()=>C("div",{class:"sky-cp__straw-mousetrack"},null,-1)),wo={name:"SkyColorPicker",inheritAttrs:!1};function So(e,{emit:t}){const o=e,n=P(It(o.value)),s=P(90),l=P([]),a=Ee({h:0,s:0,l:0,a:0}),i=P("#f00"),r=P("#000"),c=P(0),u=P(!1);let m=P({});const g=P(),$=P(),I=P(),S=P(),M=P(),p=P(),h=P();let v=null,y=null,w=null,k=null,_=null,f=null,x=!0,B=null;const A={color:o.defaultColor,gradient:o.defaultGradient,image:o.defaultImage},V=L(()=>o.modes.includes("\u6E10\u53D8")),F=L(()=>{const O=Je(r.value).join(",");return{background:`linear-gradient(to right, rgba(${O}, 0) 0%, rgb(${O}) 100%)`}});we(m,O=>{xe(O.color)}),we(()=>o.value,O=>{const j=It(O);j!==n.value&&(n.value=j),te(j),pe(O)});const U=we(a,D,{deep:!0});function D(O){const j=ao(...Object.values(O));let Q;n.value==="\u7EAF\u8272"?Q=j:n.value==="\u6E10\u53D8"&&(m.value.color=j,Q=Mt(s.value,l.value)),Se(j),Z(Q)}oe(he);async function he(){I.value.style.left=`${a.s}%`,I.value.style.top=`${100-a.l}%`,S.value.style.left=`${a.h/360*100}%`,p.value.style.left=`${a.a*100}%`,V.value&&(v=He(g.value,{onmousedown:O,onmousemove:j,onmouseup:Q}));function O(X){if(_)return;const ve=l.value.findIndex(ke=>ke.offset>=X.x),H=l.value[ve-1],W=Ze(H.color),Ye=l.value[ve],gt=Ze(Ye.color),ht=[];for(let ke=0;ke<3;ke+=1)ht.push(W[ke]+(gt[ke]-W[ke])*X.x);const nn=Ye.offset-X.x-(X.x-H.offset)>0?W[3]:gt[3],on=qe(...ht,nn);m.value={color:on,offset:X.x},l.value.splice(ve,0,m.value)}function j(X){if(!_)return;m.value.offset=X.x,l.value.sort((H,W)=>H.offset-W.offset);const ve=Mt(s.value,l.value);Z(ve)}function Q(){_=!1}y=He($.value,{onmousemove:ae,onmouseup:ae});function ae(X){Ke();const ve=X.x*100,H=X.y*100;a.s=Math.round(ve),a.l=Math.round(100-H),I.value.style.left=`${ve}%`,I.value.style.top=`${H}%`}w=He(M.value,{onmousemove:_e,onmouseup:_e});function _e(X){Ke(),a.h=X.x*360,S.value.style.left=`${X.x*100}%`}k=He(h.value,{onmousemove:Fe,onmouseup:Fe});function Fe(X){Ke(),a.a=X.x,p.value.style.left=`${X.x*100}%`}te(n.value),pe(o.value)}Be(()=>{y==null||y.destroy(),w==null||w.destroy(),k==null||k.destroy(),U(),v&&v.destroy()});function pe(O){n.value==="\u7EAF\u8272"?A.color=O:n.value==="\u6E10\u53D8"?A.gradient=O:n.value==="\u56FE\u6848"&&(A.image=O)}function Z(O){O!==o.value&&(pe(O),t("update:value",O))}async function le(O){if(O===n.value)return;n.value=O;let j;O==="\u7EAF\u8272"?j=A.color:O==="\u6E10\u53D8"?j=A.gradient:O==="\u56FE\u6848"&&(j=A.image),Z(j)}function te(O){O==="\u7EAF\u8272"?xe(o.value):O==="\u6E10\u53D8"&&(l.value.length===0?o.value.match(/[^,]+/g).forEach((j,Q)=>{if(Q===0){s.value=Number(j.match(/\d+/)[0]);return}let[ae,_e]=j.trim().split(" ");ae.startsWith("#")||(ae=qe(ae)),_e=_e.match(/\d+/)[0]/100,l.value.push({color:ae,offset:_e}),m.value=l.value[0]}):xe(m.value.color))}function Se(O){var j;i.value=`hsl(${a.h}, 100%, 50%)`,r.value=O.slice(0,7),f=r.value,c.value=Math.round(((j=a.a)!=null?j:1)*100)}function xe(O){if(x){const j=io(O);a.h=j[0],a.s=j[1],a.l=j[2],a.a=j[3],Se(O);let Q=a.s;const ae=Math.round(100-a.l);I.value.style.left=`${Q}%`,I.value.style.top=`${ae}%`,Q=a.h/360,S.value.style.left=`${Q*100}%`,p.value.style.left=`${a.a*100}%`}}function Ce(O){_=!0,m.value=O}function je(O){if(!["Backspace","Delete"].includes(O.key)||l.value.length===2)return;const j=l.value.indexOf(m.value);l.value.splice(j,1),m.value=l.value[0]}function Qt(O){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(O)){const j=Je(O),[Q,ae,_e]=Et(...j);a.h=Q,a.s=ae,a.l=_e,I.value.style.left=`${a.s}%`,I.value.style.top=`${100-a.l}%`,S.value.style.left=`${a.h/360*100}%`,r.value=O}else r.value=f}function mt(O){a.a=O/100,p.value.style.left=`${O}%`}function Ke(){x=!1,B&&clearTimeout(B),B=setTimeout(()=>{x=!0},16)}async function en(){}function tn(){}return(O,j)=>{const Q=T("SkyTabPanel"),ae=T("SkyTabs"),_e=T("svg-icon"),Fe=T("SkyButton"),X=T("SkyInput"),ve=T("SkyInputNumber");return E(),z(J,null,[C("div",ro,[C("div",co,ye(n.value),1),e.modes.length>1?(E(),Y(ae,{key:0,value:n.value,"onUpdate:value":le},{default:R(()=>[(E(!0),z(J,null,de(e.modes,H=>(E(),Y(Q,{key:H,label:H},null,8,["label"]))),128))]),_:1},8,["value"])):be("",!0),b(V)?Ae((E(),z("div",uo,[C("div",fo,[C("div",{ref:(H,W)=>{W.elGradientTrack=H,g.value=H},class:"sky-cpgb__track h-full",style:N([{width:"174px"},{background:e.value}])},[(E(!0),z(J,null,de(l.value,(H,W)=>(E(),z("div",{key:W,class:q(["sky-cpgb__pointer",{"sky-cpgb__pointer--active":H===b(m)}]),"data-sort":W,style:N({left:`${H.offset*100}%`,background:H.color}),tabindex:"-1",onMousedown:Ye=>Ce(H),onKeyup:Ge(je,["stop"])},null,46,po))),128))],4)])],512)),[[Le,n.value==="\u6E10\u53D8"]]):be("",!0),C("div",{ref:(H,W)=>{W.elPalette=H,$.value=H},class:"sky-cp__palette",style:N({background:i.value})},[mo,go,C("div",{ref:(H,W)=>{W.elPalettePointer=H,I.value=H},class:"sky-cpp__pointer"},null,512)],4),C("div",{ref:(H,W)=>{W.elSliderHux=H,M.value=H},class:"sky-cp__slider sky-cp__slider-hux"},[C("div",ho,[C("div",{ref:(H,W)=>{W.elSliderHuxPointer=H,S.value=H},class:"sky-cpst__pointer"},null,512)])],512),C("div",{ref:(H,W)=>{W.elSliderAlpha=H,h.value=H},class:"sky-cp__slider sky-cp__slider-alpha"},[C("div",{class:"sky-cpsa__background",style:N(b(F))},null,4),C("div",_o,[C("div",{ref:(H,W)=>{W.elSliderAlphaPointer=H,p.value=H},class:"sky-cpst__pointer"},null,512)])],512),C("div",vo,[d(Fe,{size:"small",onClick:en},{default:R(()=>[d(_e,{filename:"straw"})]),_:1}),d(X,{value:r.value,class:"w-24 mx-1",size:"small",onChange:Qt},null,8,["value"]),d(ve,{value:c.value,"onUpdate:value":j[0]||(j[0]=H=>c.value=H),class:"w-12",size:"small",min:0,max:100,onInput:mt,onChange:mt},null,8,["value"])])]),(E(),Y(bt,{to:"body"},[u.value?(E(),z("div",yo,[C("canvas",{class:"sky-cp__straw-canvas",onClick:tn}),bo])):be("",!0)]))],64)}}const xo=Object.assign(wo,{props:{value:{type:String,default:"#ffffff00"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8","\u56FE\u6848"]},defaultColor:{type:String,default:"#ffffff00"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value"],setup:So});var Co=G(xo,[["__scopeId","data-v-50c50297"]]),ko={watch:{visible(e){if(!e)return;for(this.mountEl=this.$parent.$el;this.mountEl&&!Reflect.has(this.mountEl.dataset,"skyPopup");)this.mountEl=this.mountEl.parentElement;if(!this.mountEl)return;const{top:t,left:o,width:n,height:s}=this.mountEl.getBoundingClientRect();this.$el.style.top=`${t+s}px`,this.$el.style.left=`${o+n/2}px`}}};const $o={name:"SkyPopup",mixins:[ko]};function Eo(e,{emit:t}){const o=e,n=L(()=>({width:`${o.width}px`}));return(s,l)=>Ae((E(),Y(b(fn),{class:"sky-popup",style:N(b(n)),onTrigger:l[0]||(l[0]=a=>t("update:visible",!1))},{default:R(()=>[me(s.$slots,"default",{},void 0,!0)]),_:3},8,["style"])),[[Le,e.visible]])}const Io=Object.assign($o,{props:{visible:{type:Boolean,default:!1},width:{type:Number,default:200}},emits:["update:visible"],setup:Eo});var Mo=G(Io,[["__scopeId","data-v-54ee3737"]]);const zo={class:"sky-tabs"},Ro={class:"sky-tabs__header"},To={class:"sky-tabs__header-shell"},Oo=["onClick"],Po={class:"sky-tabs__content"},Bo={name:"SkyTabs"};function Ao(e,{expose:t,emit:o}){const n=e;we(()=>n.value,()=>{r()});const s=P([]),l=Ee({width:0,left:0});let a=0;oe(()=>{a=100/s.value.length,l.width=`${a}%`,r()});let i=null;function r(u=-1){var m,g,$,I;u<0&&(u=s.value.findIndex(S=>S.props.label===n.value)),l.left=`${a*u}%`,(g=(m=i==null?void 0:i.exposed)==null?void 0:m.changeActive)==null||g.call(m,!1),i=s.value[u],(I=($=i.exposed)==null?void 0:$.changeActive)==null||I.call($,!0)}function c(u,m){o("update:value",u.props.label),r(m)}return t({tabs:s}),(u,m)=>(E(),z("div",zo,[C("div",Ro,[C("div",To,[(E(!0),z(J,null,de(s.value,(g,$)=>(E(),z("div",{key:g.props.label,class:q(["sky-tab__title",{"sky-active":g.props.label===e.value}]),onClick:I=>c(g,$)},ye(g.props.label),11,Oo))),128)),C("div",{class:"sky-tab__slider",style:N(b(l))},null,4)])]),C("div",Po,[me(u.$slots,"default",{},void 0,!0)])]))}const Lo=Object.assign(Bo,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup:Ao});var Ho=G(Lo,[["__scopeId","data-v-48b1e296"]]);const Do={name:"SkyTabPanel"};function Vo(e,{expose:t}){const o=Pe();o.parent.exposed.tabs.value.push(o);const n=P(!1),s=L(()=>({display:n.value?"block":"none"}));function l(a){n.value=a}return t({changeActive:l}),(a,i)=>(E(),z("div",{class:"sky-tab-panel",style:N(b(s))},[me(a.$slots,"default")],4))}const jo=Object.assign(Do,{props:{label:{type:String,required:!0}},setup:Vo});const Fo={name:"SkyTooltip",props:{content:{type:[String,Number],default:""},direction:{type:String,default:"top",validator(e){return["top","right","bottom","left"].includes(e)}},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},computed:{rootClass(){const e=[`sky-tooltip--${this.direction}`];return this.disabled&&e.push("sky-tooltip--disabled"),this.active&&e.push("sky-tooltip--active"),e}}},No=["data-tips"];function Go(e,t,o,n,s,l){return E(),z("div",{class:q(["sky-tooltip",l.rootClass]),"data-tips":o.content},[me(e.$slots,"default",{},void 0,!0)],10,No)}var qo=G(Fo,[["render",Go],["__scopeId","data-v-d2e76e10"]]);const Uo={class:"sky-dialog__header"},Wo={class:"sky-dialog__body"},Ko={class:"sky-dialog__footer"},Yo={name:"SkyDialog"};function Xo(e,{emit:t}){const o=e,n=L(()=>({display:o.visible?"flex":"none"})),s=L(()=>({width:o.width,height:o.height}));async function l(){o.maskClosable&&t("update:visible",!1),await Re(),t("afterClose")}return(a,i)=>(E(),Y(bt,{to:e.teleportTo},[C("div",{class:q(["sky-dialog flex-center",a.$attrs.class]),style:N(b(n))},[C("div",{class:"mask",onClick:l}),C("div",{class:"sky-dialog__panel",style:N(b(s))},[C("div",Uo,[me(a.$slots,"header",{},void 0,!0)]),C("div",Wo,[me(a.$slots,"default",{},void 0,!0)]),C("div",Ko,[me(a.$slots,"footer",{},void 0,!0)])],4)],6)],8,["to"]))}const Jo=Object.assign(Yo,{props:{visible:{type:Boolean,default:!1},width:{type:String,default:"80%"},height:{type:String,default:"80%"},teleportTo:{type:String,default:"body"},maskClosable:{type:Boolean,default:!0}},emits:["update:visible","afterClose"],setup:Xo});var Zo=G(Jo,[["__scopeId","data-v-3a726588"]]);const Qo={name:"SkySlider"};function es(e,{emit:t}){const o=e,n=P(!1),s=P(null),l=P(null);let a=null,i=null,r=null;const c=L(()=>Math.round(o.max-o.min)),u=L(()=>Math.round((o.value-o.min)/c.value*100)),m=L(()=>({width:`${u.value}%`})),g=L(()=>({left:`${u.value}%`}));oe(()=>{a=He(s.value,{onmousedown:$,onmousemove:$}),i=()=>{n.value=!0},r=()=>{n.value=!1},l.value.addEventListener("mousedown",i),document.addEventListener("mouseup",r)}),Be(()=>{a.destroy(),l.value.removeEventListener("mousedown",i),document.removeEventListener("mouseup",r)});function $(I){let S=I.x*c.value;o.step>0&&(S=Math.round(I.x*o.max/o.step)*o.step);const M=Ie(S+o.min,{decimal:2});M!==o.value&&t("update:value",M)}return(I,S)=>{const M=T("SkyTooltip");return E(),z("div",{class:"sky-slider",ref:(p,h)=>{h.elRoot=p,s.value=p}},[C("div",{class:"sky-slider__progress",style:N(b(m))},null,4),C("div",{ref:(p,h)=>{h.elPointer=p,l.value=p},class:"sky-slider__pointer",style:N(b(g))},[Ae(d(M,{content:e.value,active:n.value},null,8,["content","active"]),[[Le,e.showTooltip]])],4)],512)}}const ts=Object.assign(Qo,{props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:0},showTooltip:{type:Boolean,default:!0}},emits:["update:value"],setup:es});var ns=G(ts,[["__scopeId","data-v-7e8a13ac"]]);const os={name:"SkyProgress"};function ss(e){const t=e,o=P(),n=L(()=>{const l="sky-progress";return[l,`${l}__${t.type}`]});let s;return we(()=>t.percent,l=>{s.animate(l),s.setText(`${Math.round(t.percent*100)}%`)}),oe(()=>{s=new pn[t.type](o.value,ce({color:"#1D4ED8",strokeWidth:2,trailColor:"#E5E7EB",trailWidth:2,text:{value:`${Math.round(t.percent*100)}%`,style:{}}},t.options))}),mn(()=>{s.destroy()}),(l,a)=>(E(),z("div",{ref:(i,r)=>{r.elProgressInner=i,o.value=i},class:q(["sky-progress",b(n)])},null,2))}const ls=Object.assign(os,{props:{percent:{type:Number,default:0},type:{type:String,default:"Line",validator:e=>["Line","Circle","SemiCircle"].includes(e)},options:Object},setup:ss});var as=G(ls,[["__scopeId","data-v-067c2d98"]]);const is=[Pn,kt,Nn,Jn,no,Co,Mo,Ho,jo,qo,Zo,ns,as];var rs={install(e){is.forEach(t=>{e.component(t.name,t)})}};const ie={text:"text",image:"image"},zt={gif:"image/gif"},Rt="SourceHanSansSC-Regular",se={h:"horizontal-tb",v:"vertical-rl"},cs={class:"cloud-text"},us={class:"text__effect"},ds=["textContent"],fs=["textContent"],ps={name:"CloudText",inheritAttrs:!1};function ms(e){const t=e,o=P(),n=L(()=>{const i={fontWeight:t.cloud.fontWeight,fontStyle:t.cloud.fontStyle,textDecoration:t.cloud.textDecoration,textAlign:t.cloud.textAlign,color:t.cloud.color,writingMode:t.cloud.writingMode,fontFamily:t.cloud.fontFamily},r=t.cloud.writingMode===se.v;return Ne(ce({},i),{width:r?"auto":"100%",height:r?"100%":"auto"})});oe(()=>{Object.assign(o.value.style,{fontSize:`${t.cloud.fontSize}px`,lineHeight:t.cloud.lineHeight,letterSpacing:`${t.cloud.letterSpacing}px`})});function s(i){var c,u,m,g,$,I;const r={fontSize:i.fontSize?`${i.fontSize}px`:"",textAlign:(c=i.textAlign)!=null?c:"",color:i.color,textDecoration:(u=i.textDecoration)!=null?u:"",writingMode:(m=i.writingMode)!=null?m:"",fontWeight:(g=i.fontWeight)!=null?g:"",fontStyle:($=i.fontStyle)!=null?$:"",lineHeight:(I=i.lineHeight)!=null?I:"",letterSpacing:i.letterSpacing?`${i.letterSpacing}px`:""};return i.fontFamily&&(r.fontFamily=i.fontFamily),r}function l(i){return{webkitTextStroke:`${i.width}px rgba(${i.color.join(",")})`}}function a(i){const{distance:r,angle:c,color:u,blur:m}=i,g=r*Math.cos((180-c)*(Math.PI/180)),$=r*Math.sin((180-c)*(Math.PI/180));return{textShadow:`${g}px ${$}px ${m}px rgba(${u.join(",")})`}}return(i,r)=>(E(),z("div",cs,[C("div",us,[(E(!0),z(J,null,de(e.cloud.strokes,(c,u)=>(E(),z("div",{key:`stroke${u}`,class:"text__stroke",style:N(l(c))},[(E(!0),z(J,null,de(e.cloud.texts,(m,g)=>(E(),z("span",{key:g,style:N(s(m)),textContent:ye(m.text)},null,12,ds))),128))],4))),128)),(E(!0),z(J,null,de(e.cloud.shadows,(c,u)=>(E(),z("div",{key:`shadow${u}`,class:"text__shadow",style:N(a(c))},[(E(!0),z(J,null,de(e.cloud.texts,(m,g)=>(E(),z("span",{key:g,style:N(s(m)),textContent:ye(m.text)},null,12,fs))),128))],4))),128))]),C("div",ue({ref:(c,u)=>{u.elTextContent=c,o.value=c},class:"text__content",style:b(n)},i.$attrs),[(E(!0),z(J,null,de(e.cloud.texts,(c,u)=>(E(),z("span",{key:u,style:N(s(c))},ye(c.text),5))),128))],16)]))}const gs=Object.assign(ps,{props:{cloud:{type:Object,required:!0}},setup:ms});const hs={name:"CloudTextEditor"};function _s(e,{expose:t}){const o=e,n=ne("sky"),s=["ne","nw","sw","se"],l={moveable:{onClick:$,onChangeTarget:I,onResizeStart:S,onResize:M,keepRatio:[...s],renderDirections:m(o.cloud.writingMode),onLeaveSelect:I}};let a=null,i=null;const r=P(),c=P(!0),u=L(()=>({width:`${o.cloud.width/n.state.scale}px`,height:`${o.cloud.height/n.state.scale}px`,transform:`scale(${n.state.scale})`,transformOrigin:"top left"}));we(c,p=>{p?o.cloud.text=a.textContent:(n.moveable.instance.passDragArea=!0,g()),i.style.display=p?"block":"none",a.setAttribute("contenteditable",!p)}),we(()=>o.cloud.writingMode,p=>{l.moveable.renderDirections=m(p),n.moveable.updateState(),n.cloud.updateCloudsElementRect()}),oe(()=>{a=r.value.querySelector(".text__content"),i=r.value.querySelector(".text__effect")});function m(p){return p===se.v?[...s,"n","s"]:[...s,"w","e"]}function g(){window.getSelection().removeAllRanges(),window.getSelection().selectAllChildren(a)}function $(p){o.cloud.lock||p.metaKey||p.shiftKey||(c.value=!1)}function I(){c.value=!0}function S(p){const{datas:h}=p;h.startFontSize=o.cloud.fontSize,h.startLetterSpacing=o.cloud.letterSpacing}function M(p){const{datas:h,direction:v}=p,[y,w]=v,{el:k}=n.cloudVM[o.cloud.id].subTree;if(o.cloud.writingMode===se.h){if(w===0){const{clientHeight:_}=a;k.style.height=`${_}px`,o.cloud.height=_}}else if(o.cloud.writingMode===se.v&&y===0){const{clientWidth:_}=a;k.style.width=`${_}px`,o.cloud.width=_}y!==0&&w!==0&&(o.cloud.fontSize=h.startFontSize*h.scale[0],o.cloud.letterSpacing=h.startLetterSpacing*h.scale[0],Object.assign(a.style,{fontSize:`${o.cloud.fontSize}px`,letterSpacing:`${o.cloud.letterSpacing}px`}),o.cloud.texts.forEach(_=>{_.fontSize&&Reflect.deleteProperty(_,"fontSize")}))}return t({skyHooks:l,readonly:c}),(p,h)=>(E(),z("div",{ref:(v,y)=>{y.elRoot=v,r.value=v},class:"cloud-text__editor",style:N(b(u))},[d(gs,{cloud:e.cloud},null,8,["cloud"])],4))}const vs=Object.assign(hs,{props:{cloud:{type:Object,required:!0}},setup:_s}),ys={class:"cloud__image"},bs=["src"],ws={name:"CloudImage"};function Ss(e){return(t,o)=>(E(),z("div",ys,[C("img",{src:e.cloud.src,alt:"",class:"image__content"},null,8,bs)]))}const xs=Object.assign(ws,{props:{cloud:{type:Object,required:!0}},setup:Ss}),Cs={name:"CloudImageEditor"};function ks(e,{expose:t}){return t({skyHooks:{moveable:{keepRatio:["ne","nw","sw","se"]}}}),(n,s)=>(E(),Y(xs,gn(hn(n.$attrs)),null,16))}const $s=Object.assign(Cs,{setup:ks});const Es={class:"header"},Is={name:"ControlPanelHeader"};function Ms(e){return(t,o)=>{const n=T("svg-icon");return E(),z("div",Es,[e.showBack?(E(),Y(n,{key:0,filename:"arrow-left",onClick:o[0]||(o[0]=s=>t.$emit("back"))})):be("",!0),C("div",null,ye(e.title),1)])}}const zs=Object.assign(Is,{props:{showBack:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["back"],setup:Ms});var De=G(zs,[["__scopeId","data-v-f6da17be"]]),Tt=`/* purgecss start ignore */

.sky-renderer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.sky-background {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-repeat: no-repeat;
}

.sky-clouds {
  position: absolute;
}

.sky-cloud {
  position: absolute;
}

/* purgecss end ignore */
`,Ot=`/* purgecss start ignore */

.text-index {
  word-wrap: break-word;
}

.text__effect {
  position: absolute;
  width: 100%;
  height: 100%;
}

.text__content {
  position: absolute; /* \u7528\u6765\u63D0\u5347 DOM \u5C42\u7EA7 + \u83B7\u53D6\u5185\u5BB9\u771F\u5B9E\u5BBD\u9AD8 */
}

/* purgecss end ignore */
`,Pt=`/* purgecss start ignore */

.cloud__image {
  height: 100%;
}

.image__content {
  display: block;
  width: 100%;
  height: 100%;
  -webkit-user-drag: none;
}

/* purgecss end ignore */
`;function et(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}var Rs=et(Tt)+et(Ot)+et(Pt);const Ts={key:0,class:"multiple-mask flex-center"},Os={name:"BarColorPicker",inheritAttrs:!1};function Ps(e){const t=ne("sky"),o=P(!1),n=P(null);return oe(()=>{n.value=t.vm.subTree.children[0].el}),(s,l)=>{const a=T("SkyColorPicker"),i=T("SkyPopup");return E(),z("div",{class:"bar__color-picker",onPointerdown:l[2]||(l[2]=Ge(r=>o.value=!o.value,["stop"]))},[C("div",{class:"relative h-6 rounded cursor-pointer",style:N({background:s.$attrs.value})},[e.multiple?(E(),z("div",Ts,"\u591A\u79CD\u989C\u8272")):be("",!0)],4),d(i,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=r=>o.value=r),width:256,onPointerdown:l[1]||(l[1]=Ge(()=>{},["stop"]))},{default:R(()=>[d(a,ue({"straw-el":n.value,"straw-css":b(Rs)},s.$attrs),null,16,["straw-el","straw-css"])]),_:1},8,["visible"])],32)}}const Bs=Object.assign(Os,{props:{multiple:{type:Boolean,default:!1}},setup:Ps});var Bt=G(Bs,[["__scopeId","data-v-23d9899a"]]);const As={class:"flex justify-between items-center text-xs"},Ls=C("div",null,"\u5B57\u95F4\u8DDD",-1),Hs={class:"flex justify-between items-center text-xs mt-2"},Ds=C("div",null,"\u884C\u95F4\u8DDD",-1),Vs={name:"PopupSpacing"};function js(e,{emit:t}){const o=e,n=L({get:()=>o.letterSpacing,set:i=>{t("update:letterSpacing",i)}}),s=L({get:()=>o.lineHeight,set:i=>{t("update:lineHeight",i)}}),l=L(()=>o.fontSize>50?-50:-o.fontSize),a=L(()=>o.fontSize<50?50:o.fontSize);return(i,r)=>{const c=T("SkySlider"),u=T("SkyInputNumber"),m=T("SkyPopup");return E(),Y(m,ue({width:240},i.$attrs),{default:R(()=>[C("div",As,[Ls,d(c,{value:b(n),"onUpdate:value":r[0]||(r[0]=g=>wt(n)?n.value=g:null),min:b(l),max:b(a),"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),d(u,{value:Math.round(b(n)),size:"small",class:"w-12",min:b(l),max:b(a),onChange:r[1]||(r[1]=g=>n.value=g)},null,8,["value","min","max"])]),C("div",Hs,[Ds,d(c,{value:b(s),"onUpdate:value":r[2]||(r[2]=g=>wt(s)?s.value=g:null),min:.5,max:2.5,"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),d(u,{value:b(s),min:.5,max:2.5,decimal:2,step:.02,size:"small",class:"w-12",onChange:r[3]||(r[3]=g=>s.value=g)},null,8,["value","min","max","step"])])]),_:1},16)}}const Fs=Object.assign(Vs,{props:{letterSpacing:{type:Number,default:0},lineHeight:{type:Number,default:1},fontSize:{type:Number,required:!0}},emits:["update:letterSpacing","update:lineHeight"],setup:js}),tt=_n.create();tt.interceptors.response.use(e=>e.data);const Ns="https://znlbwo.xyz/cors/",Gs="https://www.gaoding.com/api/v2",qs="https://fonter.dancf.com/",Us=async e=>await tt.get(`${Ns}${Gs}/fonts`,{params:{type:"font",page_size:100,page_num:e,region_id:1,biz_code:1,endpoint:4}});async function Ws(e){return await tt.get(`${qs}/subset`,{params:ce({from_site:"gaoding",type:"woff"},e),responseType:"blob"})}async function nt(e){return new Promise((t,o)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=o,n.readAsDataURL(e)})}const Ks=e=>{if(typeof e!="string")return!1;const t="Arial";if(e.toLowerCase()==t.toLowerCase())return!0;const o="a",n=100,s=100,l=100,a=document.createElement("canvas"),i=a.getContext("2d");a.width=s,a.height=l,i.textAlign="center",i.fillStyle="black",i.textBaseline="middle";const r=c=>{i.clearRect(0,0,s,l),i.font=n+"px "+c+", "+t,i.fillText(o,s/2,l/2);const u=i.getImageData(0,0,s,l).data;return[].slice.call(u).filter(m=>m!=0)};return r(t).join("")!==r(e).join("")};function ot(e,t){const o=document.createElement("style");return o.id=e,o.innerHTML=`@font-face { font-family: "${e}"; src: local("${e}"), url("${t}"); }`,o}function At(){const e=[];return ge.state.clouds.filter(o=>o.type===ie.text).forEach(o=>{o.fontFamily&&!e.includes(o.fontFamily)&&e.push(o.fontFamily),o.texts.forEach(n=>{n.fontFamily&&!e.includes(n.fontFamily)&&e.push(n.fontFamily)})}),e}const Ve=St("font",{state:()=>({list:[],download:{}}),actions:{async fetch(){this.list=[];const e=vn("SKY_FONTS",[]);if(e.value.length>0&&this.list.push(...e.value),this.list.length===0){for(let t=1;t<99;t+=1){const o=await Us(t);if(this.list.push(...o),o.length<100)break}e.value=this.list}},async addFont2Style(e,t){if(this.download[e]||Ks(e))return;const n=await(await fetch(t,{headers:{responseType:"blob"}})).blob(),s=await nt(n);this.download[e]=s,document.head.appendChild(ot(e,s))}}});function Ys(){const e=document.getSelection();let{anchorNode:t,anchorOffset:o,focusNode:n,focusOffset:s}=e;function l(){o=e.focusOffset,s=e.anchorOffset}let a=t==null?void 0:t.parentElement,i=n==null?void 0:n.parentElement;const r=a==null?void 0:a.parentElement,c=Array.from(r.children);let u=c.indexOf(a),m=c.indexOf(i);return u>m?(u=m,m=c.indexOf(a),a=i,i=t==null?void 0:t.parentElement,l()):u===m&&o>s&&l(),{selection:e,elTextContent:r,anchorEl:a,anchorElIndex:u,focusEl:i,focusElIndex:m,anchorOffset:o,focusOffset:s}}function st(e,t,o){const n=ce({},e),s=ce({},e),l=ce({},e);n.text=e.text.slice(0,t),s.text=e.text.slice(t,o),l.text=e.text.slice(o);const a=[];return t!==0&&a.push(n),a.push(s),o!==e.text.length&&a.push(l),a}function lt(e,t,o,n){const s=new Range;s.setStart(e,t),s.setEnd(o,n),window.getSelection().removeAllRanges(),window.getSelection().addRange(s)}function Xs(){}function $e(e,t,o){return o===void 0&&(o=e[0][t]),e.some(n=>n[t]!==o)}function Lt(e,t,o){return o===void 0&&(o=e[0][t]),e.every(n=>n[t]===o)}const{toString:Js,hasOwnProperty:Zs}=Object.prototype,Qs=e=>Js.call(e).slice(8,-1),Ht=(e,t)=>Zs.call(e,t),Ue=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,9),fe=e=>Qs(e)==="Number"?`${e}px`:e,el=(e,t)=>{Object.keys(e).forEach(o=>{Ht(t,o)&&(e[o]=t[o])})},tl=(e=0)=>new Promise(t=>setTimeout(t,e)),Dt=(e,t)=>e.filter(o=>!t.includes(o)),nl=e=>e.filter((t,o,n)=>n.indexOf(t)===o),ol=(e,t)=>e.length===t.length&&nl([...e,...t]).length===e.length,sl=(e,t)=>e/t,ll=(e,t)=>e*t,Me=(e,t,o)=>ll(sl(e,t),o),Vt=e=>e.metaKey||e.shiftKey||e.ctrlKey;const al={name:"AdvancedPanel"};function il(e){return(t,o)=>(E(),z("div",{ref:(n,s)=>{s.elRoot=n},class:"subcontrol-panel__advanced-text"},[d(De,{"show-back":"",title:"\u9AD8\u7EA7\u8BBE\u7F6E",onBack:o[0]||(o[0]=n=>t.$emit("back"))})],512))}const rl=Object.assign(al,{setup:il});var cl=G(rl,[["__scopeId","data-v-753a872f"]]);const ul={class:"body"},dl={class:"bar__font"},fl=["src"],pl={class:"bar bar-tool"},ml={class:"bar bar__color","data-sky-popup":""},gl={class:"bar bar-tool","data-sky-popup":""},hl={name:"ControlPanelCloudText"};function _l(e){const t=P(),o=P(),n=ne("sky"),{targetClouds:s}=n.runtime,[l]=s,a=Ve(),i=P(!1),r=Ee({fontFamily:l.fontFamily,fontSize:l.fontSize,hasMultipleFontSize:$e(s,"fontSize"),fontWeight:l.fontWeight,fontStyle:l.fontStyle,textDecoration:l.textDecoration,textAlign:l.textAlign,color:l.color,hasMultipleColor:$e(s,"color"),writingMode:l.writingMode,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing});let c=n.birdVM[l.id],u=null;const m=L(()=>r.writingMode===se.v);xt(()=>{el(r,l)}),oe(()=>{S(r.fontFamily)});function g(_,f,x){const B=r[_]===f&&x!=null?x:f;r[_]=B,s.forEach(A=>{A[_]=B})}function $(_,f,x,B){const V=$e(_,f,x)?x:B;r[f]=V,_.forEach(F=>{F[f]=V})}function I(_,f,x){if(!(u&&u.selection.isCollapsed)){if(s.length>1)g(_,f,x);else if(c.exposed.readonly.value)g(_,f,x),l.texts.forEach(B=>Reflect.deleteProperty(B,_));else if(u){const{elTextContent:B,anchorOffset:A,anchorEl:V,anchorElIndex:F,focusOffset:U,focusEl:D,focusElIndex:he}=u;if(V===D){const pe=l.texts[F],[Z]=V.childNodes;if(!u.selection.isCollapsed)if(A===0&&U===Z.length)$([pe],_,f,x),lt(Z,0,Z,Z.length);else{const le=st(pe,A,U);l.texts.splice(F,1,...le);const te=[];le.length===1?te.push(...le):A===0?te.push(le[0]):te.push(le[1]),$(te,_,f,x),Re(()=>{const Se=Array.from(B.children),xe=F+(A===0?0:1),[Ce]=Se[xe].childNodes;lt(Ce,0,Ce,Ce.length)})}}else{const pe=[];let Z=l.texts[he],le=st(Z,0,U);pe.push(le[0]),l.texts.splice(he,1,...le);for(let te=F+1;te<he;te+=1)Z=l.texts[te],pe.push(Z);Z=l.texts[F],le=st(Z,A,Z.text.length),pe.push(le[A===0?0:1]),l.texts.splice(F,1,...le),$(pe,_,f,x),Re(()=>{const te=Array.from(B.children),Se=F+(A===0?0:1),xe=Se+(he-F-1)+(U===D.length?0:1),[Ce]=te[Se].childNodes,[je]=te[xe].childNodes;lt(Ce,0,je,je.length)})}}}}function S(_){const f=a.list.find(A=>A.name===_);if(!f)return;const x=o.value.querySelector(".select__font-family").querySelector(".sky-input__inner"),B={backgroundImage:`url(${f.preview.url})`,backgroundSize:"80%",backgroundPosition:"12px center",backgroundRepeat:"no-repeat"};Object.assign(x.style,B)}function M(_){I("fontFamily",_),S(_);const f=a.list.find(x=>x.name===_);a.addFont2Style(f.name,f.content.woff)}function p(){g("writingMode",m.value?se.h:se.v),s.forEach(_=>{const{width:f,height:x}=_;_.width=x,_.height=f})}function h(_){g("letterSpacing",_),n.runtime.targetClouds.forEach(f=>{const x=n.birdVM[f.id].subTree.el.querySelector(".text__content");x.style.letterSpacing=`${_}px`,f.writingMode===se.h?f.height=x.clientHeight:f.writingMode===se.v&&(f.width=x.clientWidth)}),n.cloud.updateCloudsElementRect()}function v(_){g("lineHeight",_),n.runtime.targetClouds.forEach(f=>{const x=n.birdVM[f.id].subTree.el.querySelector(".text__content");x.style.lineHeight=_,f.writingMode===se.h?f.height=x.clientHeight:f.writingMode===se.v&&(f.width=x.clientWidth)}),n.cloud.updateCloudsElementRect()}const y=P(!1);function w(){y.value=!0}function k(){y.value=!1}return document.onselectionchange=()=>{if(c.exposed.readonly.value){u=null;return}u=Ys();const _=l.texts.slice(u.anchorElIndex,u.focusElIndex+1),[f]=_;Object.assign(r,{hasMultipleFontSize:$e(_,"fontSize"),fontWeight:$e(_,"fontWeight",700)?400:700,fontStyle:$e(_,"fontStyle","italic")?"normal":"italic",color:f.color||l.color,hasMultipleColor:$e(_,"color"),textDecoration:Lt(_,"textDecoration","underline")?"underline":Lt(_,"textDecoration","line-through")?"line-through":"none"})},(_,f)=>{const x=T("SkyOption"),B=T("SkySelect"),A=T("SkyInputNumber"),V=T("SkyTooltip"),F=T("svg-icon"),U=T("SkyButton");return E(),z(J,null,[C("div",{ref:(D,he)=>{he.refRoot=D,o.value=D},class:"control-panel__cloud-text"},[d(De,{title:"\u6587\u5B57"}),C("div",ul,[C("div",dl,[d(B,{ref:(D,he)=>{he.refSelectFontFamily=D,t.value=D},value:b(r).fontFamily,class:"select__font-family",onChange:M},{default:R(()=>[(E(!0),z(J,null,de(b(a).list,D=>(E(),Y(x,{key:D.id,label:D.name,value:D.name},{default:R(()=>[C("img",{src:D.preview.url,alt:""},null,8,fl)]),_:2},1032,["label","value"]))),128))]),_:1},8,["value"]),d(A,{class:"ml-2",value:Math.round(b(r).fontSize),onInput:f[0]||(f[0]=D=>I("fontSize",D)),onChange:f[1]||(f[1]=D=>I("fontSize",D))},null,8,["value"])]),C("div",pl,[d(U,{plain:"",class:q({active:b(r).fontWeight===700}),onClick:f[2]||(f[2]=D=>I("fontWeight",700,400))},{default:R(()=>[d(V,{content:"\u52A0\u7C97",direction:"bottom"}),d(F,{filename:"bold"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).fontStyle==="italic"}),onClick:f[3]||(f[3]=D=>I("fontStyle","italic","normal"))},{default:R(()=>[d(V,{content:"\u659C\u4F53",direction:"bottom"}),d(F,{filename:"italic"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).textDecoration==="underline"}),onClick:f[4]||(f[4]=D=>I("textDecoration","underline","none"))},{default:R(()=>[d(V,{content:"\u4E0B\u5212\u7EBF",direction:"bottom"}),d(F,{filename:"underline"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).textDecoration==="line-through"}),onClick:f[5]||(f[5]=D=>I("textDecoration","line-through","none"))},{default:R(()=>[d(V,{content:"\u5220\u9664\u7EBF",direction:"bottom"}),d(F,{filename:"deleteline"})]),_:1},8,["class"])]),C("div",{class:q(["bar bar-tool",{vertical:b(m)}])},[d(U,{plain:"",class:q({active:b(r).textAlign==="left"}),onClick:f[6]||(f[6]=D=>g("textAlign","left"))},{default:R(()=>[d(V,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),d(F,{filename:"text-align-left"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).textAlign==="center"}),onClick:f[7]||(f[7]=D=>g("textAlign","center"))},{default:R(()=>[d(V,{content:"\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),d(F,{filename:"align-center"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).textAlign==="right"}),onClick:f[8]||(f[8]=D=>g("textAlign","right"))},{default:R(()=>[d(V,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),d(F,{filename:"text-align-right"})]),_:1},8,["class"]),d(U,{plain:"",class:q({active:b(r).textAlign==="justify"}),onClick:f[9]||(f[9]=D=>g("textAlign","justify"))},{default:R(()=>[d(V,{content:"\u4E24\u7AEF\u5BF9\u9F50",direction:"bottom"}),d(F,{filename:"align-justify"})]),_:1},8,["class"])],2),C("div",ml,[d(Bt,{value:b(r).color,modes:["\u7EAF\u8272"],multiple:b(r).isMultipleColor,"onUpdate:value":f[10]||(f[10]=D=>I("color",D))},null,8,["value","multiple"])]),C("div",gl,[d(U,{plain:"",class:q({active:b(m)}),onClick:p},{default:R(()=>[d(V,{content:"\u6587\u5B57\u7AD6\u7248",direction:"bottom"}),d(F,{filename:"writing-mode"})]),_:1},8,["class"]),d(U,{plain:"",onClick:f[11]||(f[11]=D=>i.value=!i.value)},{default:R(()=>[d(V,{content:"\u95F4\u8DDD",direction:"bottom"}),d(F,{filename:"spacing"})]),_:1}),d(Fs,{visible:i.value,"onUpdate:visible":f[12]||(f[12]=D=>i.value=D),letterSpacing:b(r).letterSpacing,"onUpdate:letterSpacing":[f[13]||(f[13]=D=>b(r).letterSpacing=D),h],lineHeight:b(r).lineHeight,"onUpdate:lineHeight":[f[14]||(f[14]=D=>b(r).lineHeight=D),v],fontSize:b(r).fontSize},null,8,["visible","letterSpacing","lineHeight","fontSize"]),d(U,{plain:""},{default:R(()=>[d(V,{content:"\u6587\u5B57\u53D8\u5F62",direction:"bottom"}),d(F,{filename:"text-distortion"})]),_:1})]),C("div",{onClick:w},"\u9AD8\u7EA7")])],512),y.value?(E(),Y(cl,{key:0,onBack:k})):be("",!0)],64)}}const vl=Object.assign(hl,{setup:_l});var yl=G(vl,[["__scopeId","data-v-7137c6d8"]]);const bl={class:"control-panel__cloud-image"},wl={class:"body"},Sl=ee("\u66FF\u6362\u56FE\u7247"),xl={name:"ControlPanelCloudImage"};function Cl(e){function t(){const o=document.createElement("input");o.type="file",o.click(),o.onchange=async n=>{const[s]=n.target.files;sky.runtime.targetClouds.forEach(l=>{l.src=URL.createObjectURL(s),l.mime=s.type,o.remove()})}}return(o,n)=>{const s=T("SkyButton");return E(),z("div",bl,[d(De,{title:"\u56FE\u7247"}),C("div",wl,[d(s,{onClick:t},{default:R(()=>[Sl]),_:1})])])}}const kl=Object.assign(xl,{setup:Cl});const $l=e=>(Te("data-v-713a1b99"),e=e(),Oe(),e),El={class:"control-panel__group"},Il={class:"body"},Ml={class:"bar bar-tool mt-3"},zl=$l(()=>C("div",{class:"h-4 w-px bg-gray-300"},null,-1)),Rl={name:"ControlPanelGroup"};function Tl(e){const t=ne("sky"),o=L(()=>{var s;return t.runtime.targetClouds.length===1&&((s=t.runtime.targetClouds[0])==null?void 0:s.type)==="clouds"});function n(){o.value?t.cloud.unGroup():t.cloud.toGroup()}return(s,l)=>{const a=T("SkyButton"),i=T("SkyTooltip"),r=T("svg-icon");return E(),z("div",El,[d(De,{title:"\u7EC4\u5408"}),C("div",Il,[d(a,{class:"button__group",onClick:n},{default:R(()=>[ee(ye(b(o)?"\u62C6\u5206":"\u6210")+"\u7EC4 ",1)]),_:1}),C("div",Ml,[d(a,{plain:"",onClick:b(t).cloud.alignTop},{default:R(()=>[d(i,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-top"})]),_:1},8,["onClick"]),d(a,{plain:"",onClick:b(t).cloud.alignVerticalMiddle},{default:R(()=>[d(i,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),d(a,{plain:"",onClick:b(t).cloud.alignBottom},{default:R(()=>[d(i,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-bottom"})]),_:1},8,["onClick"]),zl,d(a,{plain:"",onClick:b(t).cloud.alignLeft},{default:R(()=>[d(i,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-left"})]),_:1},8,["onClick"]),d(a,{plain:"",onClick:b(t).cloud.alignHorizontalMiddle},{default:R(()=>[d(i,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),d(a,{plain:"",onClick:b(t).cloud.alignRight},{default:R(()=>[d(i,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),d(r,{filename:"align-right"})]),_:1},8,["onClick"])])])])}}const Ol=Object.assign(Rl,{setup:Tl});var jt=G(Ol,[["__scopeId","data-v-713a1b99"]]);const at=St("background",{state:()=>({type:"\u989C\u8272",color:"#ffffff00",image:""}),getters:{bgStyle:e=>({background:e.type==="\u989C\u8272"?e.color:`url(${e.image})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"})},actions:{setState(e){Object.assign(this.$state,e)}}});const it=e=>(Te("data-v-a27faf08"),e=e(),Oe(),e),Pl={class:"control-panel__default"},Bl={class:"body"},Al={class:"panel-label"},Ll=it(()=>C("span",null,"\u753B\u5E03\u5C3A\u5BF8",-1)),Hl=ee("\u7F16\u8F91"),Dl={class:"size"},Vl=ee("\u5BBD"),jl=it(()=>C("i",{class:"w-2"},null,-1)),Fl=ee("\u9AD8"),Nl=it(()=>C("div",{class:"panel-label"},[C("span",null,"\u753B\u5E03\u80CC\u666F")],-1)),Gl=ee("\u4E0A\u4F20\u80CC\u666F\u56FE"),ql={name:"ControlPanelDefault"};function Ul(e){const t=ne("sky"),o=at(),n=L(()=>`${parseInt(t.state.width/t.state.scale)}px`),s=L(()=>`${parseInt(t.state.height/t.state.scale)}px`);function l(i){o.type=i}function a(){const i=document.createElement("input");i.type="file",i.click(),i.onchange=async r=>{const[c]=r.target.files,u=new FileReader;u.onload=()=>{o.image=u.result},u.readAsDataURL(c)}}return(i,r)=>{const c=T("SkyButton"),u=T("SkyInput"),m=T("SkyTabPanel"),g=T("SkyTabs");return E(),z("div",Pl,[d(De,{title:"\u753B\u5E03"}),C("div",Bl,[C("div",Al,[Ll,d(c,{size:"small",plain:""},{default:R(()=>[Hl]),_:1})]),C("div",Dl,[d(u,{value:b(n),readonly:""},{append:R(()=>[Vl]),_:1},8,["value"]),jl,d(u,{value:b(s),readonly:""},{append:R(()=>[Fl]),_:1},8,["value"])]),Nl,d(g,{value:b(o).type,"onUpdate:value":[r[1]||(r[1]=$=>b(o).type=$),l],class:"bg-tabs","data-sky-popup":""},{default:R(()=>[d(m,{class:"bar bar__color",label:"\u989C\u8272"},{default:R(()=>[d(Bt,{value:b(o).color,"onUpdate:value":r[0]||(r[0]=$=>b(o).color=$),"default-color":"#ffffff00",modes:["\u7EAF\u8272","\u6E10\u53D8"]},null,8,["value"])]),_:1}),d(m,{label:"\u56FE\u7247"},{default:R(()=>[d(c,{style:{height:"40px"},onClick:a},{default:R(()=>[Gl]),_:1})]),_:1})]),_:1},8,["value"])])])}}const Wl=Object.assign(ql,{setup:Ul});var Kl=G(Wl,[["__scopeId","data-v-a27faf08"]]);const rt=e=>(Te("data-v-32d25074"),e=e(),Oe(),e),Yl=rt(()=>C("div",{class:"title"},"\u753B\u5E03\u5BF9\u9F50",-1)),Xl={class:"flex justify-between items-center"},Jl=rt(()=>C("div",{class:"h-4 w-px bg-gray-300"},null,-1)),Zl=rt(()=>C("div",{class:"title mt-3"},"\u56FE\u5C42\u987A\u5E8F",-1)),Ql={class:"flex justify-between items-center"},ea={class:"relative"},ta={class:"layer-step"},na={name:"PopupLayer"};function oa(e){const t=e,o=ne("sky"),n=P(0),s=P([]),l=L(()=>s.value.length),a=L(()=>l.value===0?0:l.value-1);we(()=>t.visible,u=>{if(!u)return;const m=o.cloud.getOverlappingClouds4Cloud(),[g,...$]=o.runtime.targetClouds;s.value=m.filter(I=>!$.includes(I)),n.value=s.value.findIndex(I=>I.id===g.id)});function i(u){u>n.value?o.cloud.moveUp():o.cloud.moveDown(),n.value=u}function r(){n.value<=0||i(n.value-1)}function c(){n.value>=a||i(n.value+1)}return(u,m)=>{const g=T("SkyTooltip"),$=T("svg-icon"),I=T("SkyButton"),S=T("SvgIcon"),M=T("SkySlider"),p=T("SkyPopup");return E(),Y(p,ue({class:"popup__layer",width:240,visible:e.visible},u.$attrs),{default:R(()=>[Yl,C("div",Xl,[d(I,{plain:"",onClick:b(o).cloud.alignEditorTop},{default:R(()=>[d(g,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-top"})]),_:1},8,["onClick"]),d(I,{plain:"",onClick:b(o).cloud.alignEditorVerticalMiddle},{default:R(()=>[d(g,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),d(I,{plain:"",onClick:b(o).cloud.alignEditorBottom},{default:R(()=>[d(g,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-bottom"})]),_:1},8,["onClick"]),Jl,d(I,{plain:"",onClick:b(o).cloud.alignEditorLeft},{default:R(()=>[d(g,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-left"})]),_:1},8,["onClick"]),d(I,{plain:"",onClick:b(o).cloud.alignEditorHorizontalMiddle},{default:R(()=>[d(g,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),d(I,{plain:"",onClick:b(o).cloud.alignEditorRight},{default:R(()=>[d(g,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),d($,{filename:"align-right"})]),_:1},8,["onClick"])]),Zl,C("div",Ql,[d(S,{filename:"layer-down",onClick:r}),C("div",ea,[Ae(C("div",ta,[(E(!0),z(J,null,de(b(a),h=>(E(),z("div",{key:h,style:N({left:`${h/b(a)*100}%`}),class:"absolute w-px h-full bg-gray-400"},null,4))),128))],512),[[Le,b(l)>1]]),d(M,{value:n.value,max:b(a),step:1,disabled:b(a)===0,"show-tooltip":!1,class:"w-36",onInput:i},null,8,["value","max","disabled"])]),d(S,{filename:"layer-up",onClick:c})])]),_:1},16,["visible"])}}const sa=Object.assign(na,{props:{visible:{type:Boolean,default:!1}},setup:oa});var la=G(sa,[["__scopeId","data-v-32d25074"]]);const aa={class:"control-panel__container"},ia={key:0,class:"py-4 border-t mx-4"},ra={class:"bar mb-3"},ca=C("img",{src:"https://cdn.dancf.com/design/img/fill_opacity.f6330ad5.svg"},null,-1),ua={class:"bar bar-tool","data-sky-popup":""},da={name:"ControlPanelContainer"};function fa(e){const t=ne("sky"),o={[ie.text]:yl,[ie.image]:kl},n=P(!1),s=L(()=>{var $;return($=t.runtime.targetClouds[0])!=null?$:{}}),l=L(()=>t.runtime.targetClouds.length===0?Kl:t.runtime.targetClouds.length>1||s.value.type==="clouds"?jt:o[s.value.type]),a=L(()=>t.runtime.targetClouds.length===0?"default":t.runtime.targetClouds.length>1?"group":t.runtime.targetClouds[0].id),i=L(()=>a.value==="default"),r=L(()=>t.runtime.targetClouds.length===1&&!t.cloud.isCloudsObject(s.value));function c($){s.value.opacity=Ie($/100,{decimal:2})}function u(){s.value.lock?t.cloud.unlock():t.cloud.lock()}function m(){t.cloud.copy(),t.cloud.paste()}function g(){t.cloud.delete()}return($,I)=>{const S=T("SkySlider"),M=T("SkyInputNumber"),p=T("SkyTooltip"),h=T("svg-icon"),v=T("SkyButton");return E(),z("div",aa,[(E(),Y(Xe(b(l)),{key:b(a)})),b(i)?be("",!0):(E(),z("div",ia,[Ae(C("div",ra,[ca,d(S,{value:b(s).opacity,"onUpdate:value":I[0]||(I[0]=y=>b(s).opacity=y),min:0,max:1,"show-tooltip":!1,class:"w-28"},null,8,["value"]),d(M,{value:Math.round(b(s).opacity*100),min:0,max:100,size:"small",class:"w-12",onChange:c},null,8,["value"])],512),[[Le,b(r)]]),C("div",ua,[d(v,{plain:"",onClick:u},{default:R(()=>[d(p,{content:b(s).lock?"\u89E3\u9501":"\u9501\u5B9A"},null,8,["content"]),d(h,{filename:b(s).lock?"locked":"unlock"},null,8,["filename"])]),_:1}),d(v,{plain:"",disabled:b(s).lock,onPointerdown:I[1]||(I[1]=Ge(y=>n.value=!n.value,["stop"]))},{default:R(()=>[d(p,{content:"\u56FE\u5C42\u987A\u5E8F"}),d(h,{filename:"layer"})]),_:1},8,["disabled"]),d(la,{visible:n.value,"onUpdate:visible":I[2]||(I[2]=y=>n.value=y)},null,8,["visible"]),d(v,{plain:"",disabled:b(s).lock,onClick:m},{default:R(()=>[d(p,{content:"\u590D\u5236",disabled:b(s).lock},null,8,["disabled"]),d(h,{filename:"copy"})]),_:1},8,["disabled"]),d(v,{plain:"",disabled:b(s).lock,onClick:g},{default:R(()=>[d(p,{content:"\u5220\u9664",disabled:b(s).lock},null,8,["disabled"]),d(h,{filename:"trash"})]),_:1},8,["disabled"])])]))])}}const pa=Object.assign(da,{setup:fa}),We="sky-cloud--lock",ma="sky-background",ct=["nw","ne","sw","se"],ga=e=>e.classList.contains("sky-cloud"),ha=e=>{var t;return!((t=e.parentElement)==null?void 0:t.classList.contains("sky-renderer"))},_a=e=>e?e.classList.contains("sky-background"):!1,va=e=>e.classList.contains(We),Ft=e=>{for(;e&&!e.dataset.cloudId&&!ga(e);)if(e=e.parentElement,e==null?void 0:e.classList.contains("sky-renderer"))return null;return e},ut=e=>(e=Ft(e),e&&(ha(e)&&e.parentElement?ut(e.parentElement):e)),ya=["data-cloud-id","data-cloud-type"],ba=C("i",{class:"border-before"},null,-1),wa={name:"Cloud",inheritAttrs:!1};function Sa(e){const t=e,o=ne("SkyCloudComponents"),n=P(),s=L(()=>({opacity:t.cloud.opacity}));return oe(()=>{Object.assign(n.value.style,{width:`${t.cloud.width}px`,height:`${t.cloud.height}px`,top:`${t.cloud.top}px`,left:`${t.cloud.left}px`})}),(l,a)=>(E(),z("div",{ref:(i,r)=>{r.elRoot=i,n.value=i},class:"sky-cloud",style:N(b(s)),"data-cloud-id":e.cloud.id,"data-cloud-type":e.cloud.type},[(E(),Y(Xe(b(o)[e.cloud.type]),ue({ref:(i,r)=>{r.elCloud=i},cloud:e.cloud,class:"sky-bird"},l.$attrs),null,16,["cloud"])),ba],12,ya))}const dt=Object.assign(wa,{props:{cloud:{type:Object,require:!0,default:()=>({})}},setup:Sa}),xa={name:"CloudEditor",inheritAttrs:!1};function Ca(e){const t=e,o=ne("sky");P(),oe(()=>{const s=Pe();o.cloudVM[t.cloud.id]=s,o.birdVM[t.cloud.id]=s.subTree.component.subTree.children[0].component}),Be(()=>{Reflect.deleteProperty(o.cloudVM,t.cloud.id),Reflect.deleteProperty(o.birdVM,t.cloud.id)});function n(s){return{[We]:s.lock}}return(s,l)=>(E(),Y(dt,{cloud:t.cloud,class:q(n(e.cloud))},null,8,["cloud","class"]))}const ka=Object.assign(xa,{props:{cloud:{type:Object,require:!0,default:()=>({})}},setup:Ca}),$a=["data-cloud-id"],Ea=C("i",{class:"border-before"},null,-1),Ia={name:"Clouds",inheritAttrs:!1};function Ma(e){const t=e,o=P(),n=L(()=>({opacity:t.cloud.opacity}));return oe(()=>{Object.assign(o.value.style,{width:`${t.cloud.width}px`,height:`${t.cloud.height}px`,top:`${t.cloud.top}px`,left:`${t.cloud.left}px`})}),(s,l)=>{const a=T("Clouds",!0);return E(),z("div",{ref:(i,r)=>{r.elRoot=i,o.value=i},class:"sky-cloud sky-clouds sky-bird","data-cloud-id":t.cloud.id,style:N(b(n))},[C("div",null,[(E(!0),z(J,null,de(t.cloud.clouds,i=>(E(),z(J,{key:i.id},[i.type==="clouds"?(E(),Y(a,ue({key:0,cloud:i},s.$attrs),null,16,["cloud"])):(E(),Y(dt,ue({key:1,cloud:i},s.$attrs),null,16,["cloud"]))],64))),128))]),Ea],12,$a)}}const Nt=Object.assign(Ia,{props:{cloud:{type:Object,required:!0}},setup:Ma}),za={name:"CloudsEditor",inheritAttrs:!1};function Ra(e,{expose:t}){const o=e,n=ne("sky"),s={moveable:{renderDirections:[...ct],keepRatio:[...ct]}};P(),oe(()=>{const a=Pe();n.cloudVM[o.cloud.id]=a,n.birdVM[o.cloud.id]=a}),Be(()=>{Reflect.deleteProperty(n.cloudVM,o.cloud.id),Reflect.deleteProperty(n.birdVM,o.cloud.id)});function l(a){return{[We]:a.lock}}return t({skyHooks:s}),(a,i)=>(E(),Y(Nt,{cloud:e.cloud,class:q(l(e.cloud))},null,8,["cloud","class"]))}const Ta=Object.assign(za,{props:{cloud:{type:Object,required:!0}},setup:Ra});const Oa={name:"SkyEditor"};function Pa(e,{expose:t}){const o=e,n=ne("sky");n.vm=Pe();const s=P(),l=P(),a=L(()=>({width:`${n.state.width}px`,height:`${n.state.height}px`}));oe(()=>{n.moveable.createInstance(s.value),n.selecto.createInstance(document.querySelector(n.options.selecto)),l.value.$el.addEventListener("mousedown",g)}),Be(()=>{l.value.$el.removeEventListener("mousedown",g)}),we([()=>n.state.clouds,()=>o.bgStyle],()=>{n.history.unshift()},{immediate:!0,deep:!0}),xt(()=>{n.state.bgStyle=o.bgStyle});let i=null,r=null,c=!1;async function u(){c=!0;const[$]=r;!$||_a($)||va($)||(await n.moveable.setTarget(r),n.moveable.instance.dragStart(i))}async function m($){c||document.removeEventListener("mousemove",u),c?c=!1:(await n.moveable.setTarget(r),n.cloud.setSelectCloud($)),i=null,r=null}function g($){i=$,r=n.moveable.getTarget($),r.length>0&&(document.addEventListener("mousemove",u,{once:!0}),document.addEventListener("mouseup",m,{once:!0}))}return t({elSkyRenderer:l}),($,I)=>{const S=T("SkyRenderer"),M=T("ControlPanelContainer");return E(),z("div",{ref:(p,h)=>{h.elRoot=p,s.value=p},class:"sky-editor",style:N(b(a))},[d(S,{ref:(p,h)=>{h.elSkyRenderer=p,l.value=p},state:b(n).state,"cloud-components":{Cloud:ka,Clouds:Ta}},null,8,["state","cloud-components"]),d(M,{class:"sky-control-panel"})],4)}}const Ba=Object.assign(Oa,{props:{bgStyle:Object},setup:Pa});var Gt=G(Ba,[["__scopeId","data-v-2b816e98"]]);const Aa={class:"sky-renderer"},La={name:"SkyRenderer",inheritAttrs:!1};function Ha(e){const t=e,o=[ma];function n(s){return s.type==="clouds"?t.cloudComponents.Clouds||Nt:t.cloudComponents.Cloud||dt}return(s,l)=>(E(),z("div",Aa,[C("div",{class:q(o),style:N(t.state.bgStyle)},null,4),(E(!0),z(J,null,de(t.state.clouds,a=>(E(),Y(Xe(n(a)),ue({key:a.id,cloud:a},s.$attrs),null,16,["cloud"]))),128))]))}const qt=Object.assign(La,{props:{state:Object,cloudComponents:{type:Object,default:()=>({})}},setup:Ha}),Da={install(e,t){e.component(qt.name,qt),e.provide("SkyCloudComponents",t)}};function Va(e){const t={};return t.zoom=(o=1)=>{if(o===0||o===e.state.scale)return;const n=s=>{s.forEach(async l=>{const a=Me(l.width,e.state.scale,o),i=Me(l.height,e.state.scale,o),r=Me(l.top,e.state.scale,o),c=Me(l.left,e.state.scale,o);l.width=a,l.height=i,l.top=r,l.left=c,l.clouds&&l.clouds.length>0&&n(l.clouds)})};n(e.state.clouds),e.cloud.updateCloudsElementRect(e.state.clouds),e.state.width=Me(e.state.width,e.state.scale,o),e.state.height=Me(e.state.height,e.state.scale,o),setTimeout(()=>{e.moveable.instance.updateRect()})},t}function ja(e){const t={};t.getClouds=()=>{const{scale:n,clouds:s}=e.state,l=JSON.parse(JSON.stringify(s)),a=i=>{i.forEach(r=>{r.top=r.top/n,r.left=r.left/n,r.width=r.width/n,r.height=r.height/n,r.clouds&&r.clouds.length>0&&a(r.clouds)})};return a(l),l},t.getOverlappingClouds4Point=n=>{const{clientX:s,clientY:l}=n,a=i=>{const r=e.cloud.queryCloudElementById(i.id),c=r==null?void 0:r.getBoundingClientRect();if(!c)return!1;const u=s>=c.left&&s<=c.right,m=l>=c.top&&l<=c.bottom;return u&&m};return e.state.clouds.filter(a)},t.updateCloudsElementRect=(n=e.runtime.targetClouds)=>{n.forEach(s=>{const l=e.cloud.queryCloudElementById(s.id);l.style.top=fe(s.top),l.style.left=fe(s.left),l.style.width=fe(s.width),l.style.height=fe(s.height),e.moveable.instance.updateTarget(),s.clouds&&s.clouds.length>0&&t.updateCloudsElementRect(s.clouds)}),e.moveable.instance.updateRect()},t.getOverlappingClouds4Cloud=()=>{const n=e.moveable.instance.getRect(),s=n.left,l=n.left+n.width,a=n.top,i=n.top+n.height,r=m=>m>=s&&m<=l,c=m=>m>=a&&m<=i,u=(m,g)=>r(m)&&c(g);return e.state.clouds.filter(({top:m,left:g,width:$,height:I})=>{const S=g,M=g+$,p=m,h=m+I;return u(S,p)||u(M,p)||u(S,h)||u(M,h)||p<a&&h>i&&r(S)||S<s&&M>l&&c(p)})},t.findCloudById=(n,s=e.state.clouds)=>{if(!n)return;let l=s.find(a=>a.id===n);if(l)return l;for(let a=0;a<s.length;a+=1)if(Array.isArray(s[a].clouds)&&(l=t.findCloudById(n,s[a].clouds),l))return l},t.findCloudByElement=n=>{const s=ut(n);if(!!s)return t.findCloudById(s.dataset.cloudId)},t.queryCloudElementById=n=>e.vm.subTree.el.querySelector(`[data-cloud-id="${n}"]`);const o=n=>{if(!n)return null;const[s]=e.runtime.targetClouds;if(!s||!t.isCloudsObject(s)||Vt(n))return null;const l=Ft(n.target);if(!l)return null;const a=t.findCloudById(l.dataset.cloudId,s.clouds);return(a==null?void 0:a.pid)?a:null};return t.setSelectCloud=n=>{var a,i,r,c,u,m,g,$,I,S,M;const s=o(n),l=e.runtime.selectCloud;l!==s&&(e.runtime.selectCloud=s,(a=e.vm.subTree.el.querySelector(".sky-cloud-select"))==null||a.classList.remove("sky-cloud-select"),l&&((m=(u=(c=(r=(i=e.cloudVM[l.id])==null?void 0:i.exposed)==null?void 0:r.skyHooks)==null?void 0:c.moveable)==null?void 0:u.onLeaveSelect)==null||m.call(u)),s&&((g=e.cloud.queryCloudElementById(s.id))==null||g.classList.add("sky-cloud-select"),(M=(S=(I=($=e.cloudVM[s.id].exposed)==null?void 0:$.skyHooks)==null?void 0:I.moveable)==null?void 0:S.onEnterSelect)==null||M.call(S)))},t.create=n=>{var s,l;return n=JSON.parse(JSON.stringify(n)),Object.assign({pid:"",width:100,height:100,top:e.state.height/2-((s=n==null?void 0:n.height)!=null?s:0/2),left:e.state.width/2-((l=n==null?void 0:n.width)!=null?l:0/2),angle:0,lock:!1,opacity:1,transform:""},n,{id:Ue()})},t.push=async(...n)=>{e.state.clouds.push(...n),await tl(),await e.moveable.setTarget(n.map(s=>e.cloud.queryCloudElementById(s.id)))},t.lock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!0}),e.moveable.updateState())},t.unlock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!1}),e.moveable.updateState())},t.delete=async({force:n=!1}={})=>{if(e.runtime.targetClouds.length===0)return;const[s]=e.runtime.targetClouds;if(s.lock&&!n)return;const l=e.runtime.targetClouds.map(a=>a.id);await e.moveable.setTarget([]),l.forEach(a=>{const i=e.state.clouds.findIndex(r=>r.id===a);e.state.clouds.splice(i,1)})},t.copy=()=>{if(e.runtime.targetClouds.length!==0)return e.runtime.clipboard=JSON.stringify(e.runtime.targetClouds),e.runtime.clipboard},t.paste=async()=>{if(!e.runtime.clipboard)return;const n=r=>{var c;(c=r.clouds)==null||c.forEach(u=>{u.pid=r.id,u.id=Ue(),t.isCloudsObject(u)&&n(u)})},s=JSON.parse(e.runtime.clipboard),l={top:Math.min(...s.map(r=>r.top)),left:Math.min(...s.map(r=>r.left))},a=e.runtime.targetClouds.length>0?e.moveable.instance.getRect():l,i={top:a.top-l.top,left:a.left-l.left};s.forEach(r=>{r.id=Ue(),r.top+=i.top+10,r.left+=i.left+10,t.isCloudsObject(r)&&n(r)}),await t.push(...s),t.copy()},t.cut=()=>{!t.copy()||t.delete()},t.toGroup=async()=>{const{top:n,left:s,width:l,height:a}=e.moveable.instance.getRect(),i=[...e.runtime.targetClouds],r=Ue();await t.delete({force:!0}),i.forEach(c=>{c.pid=r,c.top=c.top-n,c.left=c.left-s}),await t.push({id:r,top:n,left:s,width:l,height:a,clouds:i,pid:"",type:"clouds",lock:!1,transform:""})},t.unGroup=async()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const{clouds:s,top:l,left:a}=n[0];!s||(await t.delete({force:!0}),s.forEach(i=>{i.pid="",i.top=i.top+l,i.left=i.left+a}),t.push(...s))},t.moveTop=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;n.push(...s),s.forEach(l=>{const a=n.findIndex(i=>i.id===l.id);n.splice(a,1)})},t.moveUp=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s.slice(-1),a=t.getOverlappingClouds4Cloud(),i=a.findIndex(u=>u.id===l.id);let r;i+1>=a.length?r=l:r=a[i+1];const c=n.findIndex(u=>u.id===r.id);n.splice(c+1,0,...s),s.forEach(u=>{const m=n.findIndex(g=>g.id===u.id);n.splice(m,1)})},t.moveDown=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s,a=t.getOverlappingClouds4Cloud(),i=a.findIndex(u=>u.id===l.id);let r;i===0?r=l:r=a[i-1];const c=n.findIndex(u=>u.id===r.id);s.forEach(u=>{const m=n.findIndex(g=>g.id===u.id);n.splice(m,1)}),n.splice(c,0,...s)},t.moveBottom=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;s.reverse().forEach(l=>{const a=n.findIndex(i=>i.id===l.id);n.splice(a,1)}),n.unshift(...s.reverse())},t.isCloudsObject=n=>n.type==="clouds"&&Reflect.has(n,"clouds"),t.alignTop=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.top));n.forEach(l=>{l.top=s}),e.cloud.updateCloudsElementRect()},t.alignVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(i=>i.top)),l=Math.max(...n.map(i=>i.top+i.height)),a=s+(l-s)/2;n.forEach(i=>{i.top=a-i.height/2}),e.cloud.updateCloudsElementRect()},t.alignBottom=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.top+l.height));n.forEach(l=>{l.top=s-l.height}),e.cloud.updateCloudsElementRect()},t.alignHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(i=>i.left)),l=Math.max(...n.map(i=>i.left+i.width)),a=s+(l-s)/2;n.forEach(i=>{i.left=a-i.width/2}),e.cloud.updateCloudsElementRect()},t.alignLeft=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.left));n.forEach(l=>{l.left=s}),e.cloud.updateCloudsElementRect()},t.alignRight=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.left+l.width));n.forEach(l=>{l.left=s-l.width}),e.cloud.updateCloudsElementRect()},t.alignEditorTop=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=0}),e.cloud.updateCloudsElementRect())},t.alignEditorVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.height/2;n.forEach(l=>{l.top=s-l.height/2}),e.cloud.updateCloudsElementRect()},t.alignEditorBottom=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=e.state.height-s.height}),e.cloud.updateCloudsElementRect())},t.alignEditorLeft=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=0}),e.cloud.updateCloudsElementRect())},t.alignEditorHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.width/2;n.forEach(l=>{l.left=s-l.width/2}),e.cloud.updateCloudsElementRect()},t.alignEditorRight=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=e.state.width-s.width}),e.cloud.updateCloudsElementRect())},t}const Fa=(e=0)=>new Promise(t=>setTimeout(t,e)),Na={"-1,-1":"nw","0,-1":"n","1,-1":"ne","1,0":"e","1,1":"se","0,1":"s","-1,1":"sw","-1,0":"w"},Ga=["n","nw","ne","s","se","sw","e","w"],qa=e=>{const{top:t,left:o,width:n,height:s}=e,l=o+n,a=t+s;return{pos1:[o,t],pos2:[l,t],pos3:[o,a],pos4:[l,a]}};function Ua(e){const t={};t.updateState=async()=>{var y,w,k,_,f;const{target:S}=t.instance;if(!Array.isArray(S)||S.length===0)return;const[M]=S,p=e.cloud.findCloudById(M.dataset.cloudId),h=p?!p.lock:!1;t.instance.draggable=h,t.instance.resizable=h,t.instance.rotatable=h,t.instance.origin=h,p?(S.length>1?t.instance.renderDirections=ct:t.instance.renderDirections=(f=(_=(k=(w=(y=e.birdVM[M.dataset.cloudId])==null?void 0:y.exposed)==null?void 0:w.skyHooks)==null?void 0:k.moveable)==null?void 0:_.renderDirections)!=null?f:Ga,t.instance.passDragArea=!h):t.instance.passDragArea=!0;const v=[];(p==null?void 0:p.lock)&&v.push("lock"),t.instance.className=v.join(" ")},t.getTarget=S=>{let M=ut(S.target);if(!M)return[];if(!Vt(S))return[M];const h=e.cloud.findCloudById(M.dataset.cloudId);if((h==null?void 0:h.lock)||e.runtime.targetClouds[0].lock)return t.instance.target;const v=[...t.instance.target],y=v.findIndex(w=>w===M);return y<0?v.push(M):v.splice(y,1),v},t.setTarget=async S=>{const M=t.instance.target;if(S){if(ol(S,M))return;t.instance.target=S,await Fa();const p=S.map(y=>e.cloud.findCloudById(y.dataset.cloudId));e.runtime.targetClouds=e.state.clouds.filter(y=>p.includes(y)),e.cloud.setSelectCloud(null),Dt(M,S).forEach(y=>{var k,_,f,x;const w=e.birdVM[y.dataset.cloudId];(x=(f=(_=(k=w==null?void 0:w.exposed)==null?void 0:k.skyHooks)==null?void 0:_.moveable)==null?void 0:f.onLeaveTarget)==null||x.call(f)}),Dt(S,M).forEach(y=>{var k,_,f,x;const w=e.birdVM[y.dataset.cloudId];(x=(f=(_=(k=w==null?void 0:w.exposed)==null?void 0:k.skyHooks)==null?void 0:_.moveable)==null?void 0:f.onEnterTarget)==null||x.call(f)}),e.state.clouds.forEach(y=>{var k,_,f,x;const w=e.birdVM[y.id];(x=(f=(_=(k=w==null?void 0:w.exposed)==null?void 0:k.skyHooks)==null?void 0:_.moveable)==null?void 0:f.onChangeTarget)==null||x.call(f)})}else t.instance.target=[],M.forEach(p=>{var v,y,w,k;const h=e.birdVM[p.dataset.cloudId];(k=(w=(y=(v=h==null?void 0:h.exposed)==null?void 0:v.skyHooks)==null?void 0:y.moveable)==null?void 0:w.onLeaveTarget)==null||k.call(w)});t.updateState()};const o=()=>{const{target:S}=t.instance;if(!Array.isArray(S))return;const M=t.instance.getRect(),p={pos1:M.pos1,pos2:M.pos2,pos3:M.pos3,pos4:M.pos4},h=[];e.state.clouds.forEach(v=>{if(S.findIndex(f=>f.dataset.cloudId===v.id)>=0)return;const w=qa(v),k=[];Object.values(p).forEach(f=>{Object.values(w).forEach(x=>{const B=Math.abs(f[0]-x[0]),A=Math.abs(f[1]-x[1]);k.push(Math.sqrt(B*B+A*A))})});const _=Math.min(...k);Ht(v,"minDistance")?v.minDistance=_:Object.defineProperty(v,"minDistance",{value:_,writable:!0}),h.push(v)}),h.sort((v,y)=>v.minDistance-y.minDistance),t.instance.elementGuidelines=h.slice(0,5).map(v=>e.cloud.queryCloudElementById(v.id))},n=S=>{const{target:M,top:p,left:h}=S;M.style.top=fe(p),M.style.left=fe(h);const v=e.state.clouds.find(y=>y.id===M.dataset.cloudId);v.top=p,v.left=h,o()},s=S=>{S.events.forEach(n)},l=S=>{var y,w,k,_,f,x,B,A,V,F;const{target:M,datas:p,direction:h}=S,v=e.cloud.findCloudById(M.dataset.cloudId);!v||(p.targetCloud=v,p.startTop=v.top,p.startLeft=v.left,p.startWidth=v.width,p.startHeight=v.height,p.isClouds=e.cloud.isCloudsObject(v),p.birdVM=e.birdVM[v.id],t.instance.keepRatio=(f=(_=(k=(w=(y=p.birdVM)==null?void 0:y.exposed)==null?void 0:w.skyHooks)==null?void 0:k.moveable)==null?void 0:_.keepRatio)==null?void 0:f.includes(Reflect.get(Na,h.join())),(F=(V=(A=(B=(x=p.birdVM)==null?void 0:x.exposed)==null?void 0:B.skyHooks)==null?void 0:A.moveable)==null?void 0:V.onResizeStart)==null||F.call(V,S))},a=S=>{var w,k,_,f,x;const{target:M,width:p,height:h,drag:v,datas:y}=S;y.scale=[p/y.startWidth,h/y.startHeight],M.style.width=fe(p),M.style.height=fe(h),y.targetCloud.width=p,y.targetCloud.height=h,y.isClouds&&(M.firstElementChild.style.transform=`scale(${y.scale[0]}, ${y.scale[1]})`,M.firstElementChild.style.transformOrigin="left top"),n(v),(x=(f=(_=(k=(w=y.birdVM)==null?void 0:w.exposed)==null?void 0:k.skyHooks)==null?void 0:_.moveable)==null?void 0:f.onResize)==null||x.call(f,S)},i=S=>{var v,y,w,k,_;const{target:M,datas:p}=S,h=f=>{f.forEach(x=>{var A,V,F;x.top=x.top*p.scale[1],x.left=x.left*p.scale[0],x.width=x.width*p.scale[0],x.height=x.height*p.scale[1];const B=e.cloud.queryCloudElementById(x.id);if(!!B)if(B.style.top=fe(x.top),B.style.left=fe(x.left),B.style.width=fe(x.width),B.style.height=fe(x.height),x.clouds)h(x.clouds);else{const U=e.birdVM[x.id];(F=(V=(A=U==null?void 0:U.exposed)==null?void 0:A.moveable)==null?void 0:V.onResizeEndInGroup)==null||F.call(V,S)}})};p.isClouds&&(M.firstElementChild.style.transform="",M.firstElementChild.style.transformOrigin="",h(p.targetCloud.clouds)),(_=(k=(w=(y=(v=p.birdVM)==null?void 0:v.exposed)==null?void 0:y.skyHooks)==null?void 0:w.moveable)==null?void 0:k.onResizeEnd)==null||_.call(k,S)},r=S=>{S.events.forEach(l),e.moveable.instance.keepRatio=!0},c=S=>{S.events.forEach(a)},u=S=>{const{target:M,drag:p,absoluteRotate:h}=S;M.style.transform=p.transform;const v=e.state.clouds.find(y=>y.id===M.dataset.cloudId);!v||(v.transform=p.transform,v.rotate=h)},m=S=>{S.events.forEach(u)},g=()=>{e.history.disable=!0},$=S=>{e.history.disable=!1,!!S.isDrag&&e.history.unshift()},I=async S=>{var p,h,v,y;if(e.runtime.targetClouds.length>1){const w=t.getTarget(S.inputEvent);await t.setTarget(w)}e.cloud.setSelectCloud(S.inputEvent);const M=e.birdVM[S.target.dataset.cloudId];(y=(v=(h=(p=M==null?void 0:M.exposed)==null?void 0:p.skyHooks)==null?void 0:h.moveable)==null?void 0:v.onClick)==null||y.call(v,S.inputEvent)};return t.createInstance=S=>{window.moveableInstance=t.instance=new yn(S,{target:[],snappable:!0,dragArea:!0,horizontalGuidelines:[0,S.offsetWidth],verticalGuidelines:[0,S.offsetHeight]}),t.instance.on("drag",n),t.instance.on("dragGroup",s),t.instance.on("resizeStart",l),t.instance.on("resize",a),t.instance.on("resizeEnd",i),t.instance.on("resizeGroupStart",r),t.instance.on("resizeGroup",c),t.instance.on("rotate",u),t.instance.on("rotateGroup",m),t.instance.on("renderStart",g),t.instance.on("renderEnd",$),t.instance.on("renderGroupStart",g),t.instance.on("renderGroupEnd",$),t.instance.on("click",I),t.instance.on("clickGroup",I),t.updateState()},t}function Wa(e){let t=!1;const o={instance:null};return o.createInstance=i=>{o.instance=new bn({container:i,selectableTargets:[".sky-cloud"],selectByClick:!1,selectFromInside:!1,hitRate:0,getElementRect:wn}),o.instance.on("dragStart",n),o.instance.on("select",l),o.instance.on("selectEnd",a)},new Proxy(o,{get(i,r){return Reflect.has(i,r)?Reflect.get(i,r):Reflect.get(o.instance,r)},set(i,r,c){return Reflect.has(i,r)?Reflect.set(i,r,c):Reflect.set(i.instance,r,c),!0}});function n(i){const r=document.querySelector(".moveable-control-box"),c=document.querySelector(".sky-control-panel");if((r==null?void 0:r.contains(i.inputEvent.target))||(c==null?void 0:c.contains(i.inputEvent.target)))return i.stop();document.addEventListener("mousemove",s,{once:!0})}function s(){t=!0,e.moveable.setTarget([])}function l(i){const r=i.selected.filter(c=>!c.classList.contains(We));e.moveable.setTarget(r)}function a(){t||(document.removeEventListener("mousemove",s),e.moveable.setTarget([])),t=!1}}let Ut;function Ka(e){const t={stacks:[],pointer:0,disable:!1,delay:500},o=n=>{t.pointer=n;const s=JSON.parse(t.stacks[n]);!s||(t.disable=!0,Object.assign(e.state,s.state),Object.assign(e.runtime,s.runtime),setTimeout(async()=>{const l=s.runtime.targetClouds.map(a=>e.cloud.queryCloudElementById(a.id));await e.moveable.setTarget(l),e.cloud.updateCloudsElementRect(s.state.clouds),t.disable=!1}))};return t.unshift=()=>{t.disable||(clearTimeout(Ut),Ut=setTimeout(()=>{t.pointer>0&&t.stacks.splice(0,t.pointer),t.stacks.unshift(JSON.stringify({state:e.state,runtime:e.runtime})),t.pointer>0&&(t.pointer=0);const{maxHistoryStack:n}=e.options;n&&t.stacks.length>n&&t.stacks.pop()},t.delay))},t.back=()=>{const n=t.pointer+1;n>=t.stacks.length||o(n)},t.forward=()=>{const n=t.pointer-1;n<0||o(n)},t}function Ya(e){var o;e=ce({maxHistoryStack:20},e);const t={options:e,vm:null,cloudVM:{},birdVM:{}};return t.state={width:800,height:800,scale:1,bgStyle:{},clouds:[]},t.runtime={targetClouds:[],selectCloud:null,clipboard:""},t.editor=Va(t),t.cloud=ja(t),t.moveable=Ua(t),t.selecto=Wa(t),t.history=Ka(t),t.setState=async n=>{Reflect.has(n,"width")&&(t.moveable.instance.verticalGuidelines=[0,n.width]),Reflect.has(n,"height")&&(t.moveable.instance.horizontalGuidelines=[0,n.height]),Reflect.has(n,"scale")&&t.editor.zoom(n.scale),Reflect.has(n,"clouds")&&await t.moveable.setTarget([]),Object.assign(t.state,n)},(o=e.initMousetrap)==null||o.call(e,t),t}const Xa={install(e,t,o){t.state=Ee(t.state),t.runtime=Ee(t.runtime),e.use(Da,o.components),e.component(Gt.name,Gt),e.provide("sky",t),o.ControlPanelContainer&&e.component(o.ControlPanelContainer.name,o.ControlPanelContainer)}},re=navigator.userAgent.indexOf("Mac")>=0,Wt="SKY_DATA",Ja=()=>{const e=localStorage.getItem(Wt);if(!!e)return JSON.parse(e)},Kt=e=>{localStorage.setItem(Wt,JSON.stringify(e))};function Za(e){K.bind("up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-1},!0)}),K.bind("shift+up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-10},!0)}),K.bind(`${re?"command":"ctrl"}+up`,t=>{t.preventDefault(),e.cloud.moveUp()}),K.bind(`${re?"command":"ctrl"}+shift+up`,t=>{t.preventDefault(),e.cloud.moveTop()}),K.bind("right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:1},!0)}),K.bind("shift+right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:10},!0)}),K.bind(`${re?"command":"ctrl"}+right`,t=>{t.preventDefault()}),K.bind("down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:1},!0)}),K.bind("shift+down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:10},!0)}),K.bind(`${re?"command":"ctrl"}+down`,t=>{t.preventDefault(),e.cloud.moveDown()}),K.bind(`${re?"command":"ctrl"}+shift+down`,t=>{t.preventDefault(),e.cloud.moveBottom()}),K.bind("left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-1},!0)}),K.bind("shift+left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-10},!0)}),K.bind(`${re?"command":"ctrl"}+left`,t=>{t.preventDefault()}),K.bind(["backspace","del"],t=>{t.preventDefault(),e.cloud.delete()}),K.bind(`${re?"command":"ctrl"}+c`,t=>{t.preventDefault(),e.cloud.copy()}),K.bind(`${re?"command":"ctrl"}+v`,t=>{t.preventDefault(),e.cloud.paste()}),K.bind(`${re?"command":"ctrl"}+x`,t=>{t.preventDefault(),e.cloud.cut()}),K.bind(`${re?"command":"ctrl"}+z`,t=>{t.preventDefault(),e.history.back()}),K.bind(`${re?"command":"ctrl"}+shift+z`,t=>{t.preventDefault(),e.history.forward()}),K.bind(`${re?"command":"ctrl"}+s`,t=>{t.preventDefault(),Kt(e.state)}),K.bind(`${re?"command":"ctrl"}+a`,async t=>{t.preventDefault();const o=document.querySelector(".sky-editor__app .sky-renderer");if(!o)return;const n=Array.from(o.children).filter(s=>s.dataset.cloudId);await e.moveable.setTarget(n)})}const ge=Ya({initMousetrap:Za,selecto:".app-main"});window.sky=ge;var Qa={install(e){e.use(Xa,ge,{ControlPanelContainer:pa,components:{[ie.text]:vs,[ie.image]:$s}})}};async function ei(e){return await window.PSD.fromURL(e)}function ti(e){const[t,o,n]=e;let[,,,s]=e;return s>1&&(s=s/255),[t,o,n,s]}function ni(e){const[t,o,n,s]=e;return[s*255,n*255,o*255,t]}const oi={InsF:"inner",CtrF:"center",OutF:"outer"};function si({xx:e,xy:t}){const o=Math.sqrt(e*e+t*t),n=Math.asin(t/o)*180/Math.PI;return{scale:o,angle:n}}function li({xx:e,xy:t,yx:o,yy:n,tx:s,ty:l}){return{a:e,b:t,c:o,d:n,tx:s,ty:l}}function ai(e,t){const{objectEffects:o,typeTool:n}=t.adjustments,{StyleRun:s}=n.engineData.EngineDict;let l=0;const a=s.RunArray.map((u,m)=>{const g=s.RunLengthArray[m],$={text:e.text.value.substr(l,g),fontSize:u.StyleSheet.StyleSheetData.FontSize},{FillColor:I}=u.StyleSheet.StyleSheetData;return I&&($.color=qe(...ni(I.Values))),l+=g,$}),i=[],r=[];if(o){const{FrFX:u,DrSh:m}=o.data;u&&i.push({type:Reflect.get(oi,u.Styl.value),width:u["Sz  "].value,color:[u["Clr "]["Rd  "],u["Clr "]["Grn "],u["Clr "]["Bl  "],u.Opct.value/100]}),m&&r.push({color:[m["Clr "]["Rd  "],m["Clr "]["Grn "],m["Clr "]["Bl  "],m.Opct.value/100],distance:m.Dstn.value,blur:m.blur.value,angle:m.lagl.value})}const{angle:c}=si(n.transform);return{type:ie.text,width:e.width,height:e.height,top:e.top,left:e.left,text:e.text.value,opacity:e.opacity,textAlign:e.text.font.alignment[0],fontFamily:n.fonts()[0].slice(1).replace("\0",""),fontSize:e.text.font.sizes[0],color:qe(...ti(e.text.font.colors[0])),textDecoration:s.RunArray[0].StyleSheet.StyleSheetData.Underline?"underline":"",writingMode:n.obj.textData.Ornt.value==="Hrzn"?se.h:se.v,fontWeight:"",fontStyle:"",texts:a,strokes:i,shadows:r,angle:c,transform:li(n.transform)}}function Yt(e,t){return{src:t.image.toBase64(),type:ie.image,width:e.width,height:e.height,top:e.top,left:e.left,opacity:e.opacity}}function ii(e,t){return t.typeTool?ai(e,t):Yt(e,t)}async function ri(e){const{children:t,document:o}=e.tree().export(),n=r=>e.layers.find(c=>c.name===r.name&&c.top===r.top&&c.right===r.right&&c.bottom===r.bottom&&c.left===r.left&&c.width===r.width&&c.height===r.height),s={color:"#ffffff00",image:""},[l]=t.slice(-1);if(["Background","background","\u80CC\u666F"].includes(l.name)){const r=n(l),c=Yt(l,r);s.image=c.src,t.pop()}const a={background:s,width:o.width,height:o.height,clouds:[]},i=r=>{r.forEach(c=>{if(c.type==="group"&&Array.isArray(c.children))return i(c.children);const u=n(c);if(!u)return;const m=ii(c,u);a.clouds.unshift(m)})};return i(t),a}async function ci(e){const t=URL.createObjectURL(e),o=await ei(t);return URL.revokeObjectURL(t),ri(o)}const ui=(e,t)=>{const{clientWidth:o,clientHeight:n}=document.querySelector(".app-main");let s=o,l=e;const a=e/o;t/n>a&&(s=n,l=t);let r=s/(l+40);return r=Math.floor(r/5*100),r=r*5/100,r};function ft(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}const di="<style>"+ft(Tt)+ft(Pt)+ft(Ot)+"</style>",fi=50,pt=100;async function pi(e){var M;const t=(M=e.onProgress)!=null?M:Xs,n=ge.vm.subTree.el.querySelector(".sky-renderer").cloneNode(!0),s=ge.state.clouds.filter(p=>p.type===ie.image&&p.mime===zt.gif);let l,a;if(s.length===0){const p=await Xt(n);t(.5),l=await i(p)}else{a=new window.GIF({worker:4,quality:10});const[p,h]=await Promise.all([r(),c()]);if(t(.4),s.length===1)l=await u(p[0],p[0].frames.length,{fontStyles:h});else{const{totalTime:v,frameLen:y,delay:w}=g(p);I(p,v),t(.4),l=await S(p,y,w,{fontStyles:h})}}return t(1),l;function i(p){return new Promise(h=>{const{canvas:v,ctx:y}=Zt(ge.state.width,ge.state.height),w=new Image;w.onload=()=>{y==null||y.drawImage(w,0,0),v.toBlob(k=>{h(k),w.remove(),v.remove()})},w.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(p)}`})}async function r(){return await Promise.all(s.map(async h=>{const y=(await gi(h.src)).map(k=>Ne(ce({},k),{newDelay:0})),[w]=y;return{frames:y,el:n.querySelector(`[data-cloud-id="${h.id}"] img.image__content`),totalTime:y.reduce((k,_)=>k+_.delay,0),width:w.dims.width,height:w.dims.height}}))}async function c(){const p=ge.state.clouds.filter(w=>w.type===ie.text),h={};p.forEach(w=>{h[w.fontFamily]?h[w.fontFamily]+=w.text:h[w.fontFamily]=w.text});const v=Ve();return await Promise.all(Object.keys(h).map(async w=>{const k=v.list.find(x=>x.name===w),_=await Ws({font_id:k.id,content:h[w]}),f=await nt(_);h[w]=f})),Object.keys(h).reduce((w,k)=>w+ot(k,h[k]).outerHTML,"")}function u(p,h,{fontStyles:v}={}){return new Promise(async k=>{const _=[];for(let f=0;f<h;f+=1)_.push(y(f));await Promise.all(_),a.on("finished",function(f){k(f)}),a.render(),t(.8)});async function y(k){const _=w(k);m(p,_);const f=await Jt(n,{fontStyles:v});a.addFrame(f,{delay:_.delay})}function w(k){const{length:_}=p.frames;for(;k>=_;)k-=_;return p.frames[k]}}function m(p,h){const{dims:v,patch:y}=h,{canvas:w,ctx:k}=Zt(p.width,p.height);k==null||k.putImageData(new ImageData(y,v.width,v.height),v.left,v.top);const _=w.toDataURL();p.el.src=_}function g(p){const h=p.map(x=>x.totalTime),v=Math.min(...h),y=Math.max(...h),w=y/v;let k=0;w>2?k=$(v,y):k=h.reduce((x,B)=>x+B,0)/h.length;let _=fi,f=k/_;return f>pt&&(_=_*(f/pt),f=pt),{totalTime:k,frameLen:f,delay:_}}function $(p,h){const v=h/p,w=v%1>.5?Math.ceil(v):Math.floor(v);return p*w}function I(p,h){p.forEach(v=>{const{totalTime:y,frames:w}=v,k=Math.floor(h/y);let _=h-y;k!==0&&(_=(h-k*y)/k),_!==0&&(w.forEach(f=>{const x=f.delay/y;f.delay+=_*x}),v.totalTime=Math.round(w.reduce((f,x)=>f+x.delay,0)))})}function S(p,h,v,{fontStyles:y}={}){return new Promise(async(f,x)=>{const B=[];for(let A=0;A<h;A+=1)B.push(w(A));await Promise.all(B),t(.8),a.on("finished",function(A){f(A)}),a.render()});async function w(f){const x=await k(f);a.addFrame(x,{delay:v})}async function k(f){return p.forEach(x=>{const B=_(x,f*v);m(x,B)}),await Jt(n,{fontStyles:y})}function _(f,x){for(;x>f.totalTime;)x-=f.totalTime;let B=0,A;for(let V=0;V<f.frames.length;V+=1)if(B+=f.frames[V].delay,Math.ceil(B)>=x){A=f.frames[V];break}return A}}}async function Xt(e,{fontStyles:t}={}){e=e.cloneNode(!0),await s();const n=new XMLSerializer().serializeToString(e);return`
    <svg
      xmlns='http://www.w3.org/2000/svg'
      width='${ge.state.width}'
      height='${ge.state.height}'
    >
      ${di}
      ${t!=null?t:l()}
      <foreignObject
        x='0'
        y='0'
        width='100%'
        height='100%'
      >
        ${n}
      </foreignObject>
    </svg>
  `;function s(){const a=[];let i=Array.from(e.querySelectorAll(`[data-cloud-type="${ie.image}"] .image__content`));if(i=i.filter(c=>!c.src.startsWith("data")),i.length===0)return;return i.forEach(c=>a.push(r(c))),Promise.all(a);async function r(c){const{src:u}=c,m=await mi(u);c.src=m}}function l(){let a="";const i=Ve();return At().forEach(c=>{a+=ot(c,i.download[c]).outerHTML}),a}}async function Jt(e,{fontStyles:t}={}){const o=await Xt(e,{fontStyles:t});return new Promise((n,s)=>{const l=new Image;l.onload=()=>{n(l)},l.onerror=s,l.src=`data:image/svg+xml;charset=utf-8,${o}`})}async function mi(e){const o=await(await fetch(e)).blob();return await nt(o)}function Zt(e,t){const o=document.createElement("canvas");o.width=e,o.height=t;const n=o.getContext("2d");return{canvas:o,ctx:n}}function gi(e){return fetch(e).then(t=>t.arrayBuffer()).then(t=>Sn(t)).then(t=>xn(t,!0))}function hi(e={}){const{scale:t}=ge.state;return ce({fontFamily:Rt,fontSize:60,textAlign:"left",color:"#000000ff",textDecoration:"none",writingMode:se.h,fontWeight:400,fontStyle:"normal",lineHeight:1,letterSpacing:0,shadows:[],strokes:[],text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57",texts:[{text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57"}],type:ie.text,width:360*t,height:60*t},e)}const _i=["https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-162514-cd8e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-171637-c12e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-173400-043f.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-172721-5a2d.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210728-175810-8e4f.gif"];function vi(e={}){return ce({src:_i[Math.floor(Math.random()*5)],type:ie.image,mime:zt.gif},e)}const yi={class:"app-header"},bi=ee("PSD"),wi=ee("viewport-"),Si=ee("viewport+"),xi=ee("Adaptive"),Ci=ee("Save"),ki=ee("Add Text"),$i=ee("Add Image"),Ei=ee("Generate Image"),Ii=["href"],Mi={setup(e){const t=ne("sky"),o=Ve(),n=P(!1),s=P(0),l=P(""),a=Ee({strokeWidth:4,trailWidth:4,svgStyle:{display:"block",width:"200px"}});async function i(v){const y=await ci(v),w=y.clouds.map(k=>t.cloud.create(k));w.filter(k=>k.type===ie.text).forEach(k=>{o.list.find(f=>f.name===k.fontFamily)||(k.fontFamily=Rt)}),t.setState(Ne(ce({},y),{clouds:w,scale:1})),setTimeout(u)}async function r(){const y=await(await fetch("odyssey-demo.psd")).blob(),w=new File([y],"odyssey-demo.psd");await i(w)}async function c(v){await i(v.target.files[0])}function u(){t.setState({scale:ui(t.state.width/t.state.scale,t.state.height/t.state.scale)})}function m(){t.setState({scale:(Math.round(t.state.scale*100)-5)/100})}function g(){t.setState({scale:1})}function $(){t.setState({scale:(Math.round(t.state.scale*100)+5)/100})}function I(){Kt(t.state)}function S(){t.cloud.push(t.cloud.create(hi()))}function M(){t.cloud.push(t.cloud.create(vi()))}async function p(){n.value=!0,console.time("handleGenerateImage");const v=await pi({onProgress:y=>{n.value&&(s.value=y)}});console.timeEnd("handleGenerateImage"),l.value=URL.createObjectURL(v),console.log(l.value)}function h(){n.value=!1,l.value="",s.value=0}return(v,y)=>{const w=T("SkyButton"),k=T("SkyProgress"),_=T("SkyDialog");return E(),z(J,null,[C("div",yi,[C("input",{type:"file",onChange:c},null,32),d(w,{onClick:r},{default:R(()=>[bi]),_:1}),d(w,{onClick:m},{default:R(()=>[wi]),_:1}),d(w,{onClick:g},{default:R(()=>[ee(ye(b(t).state.scale),1)]),_:1}),d(w,{onClick:$},{default:R(()=>[Si]),_:1}),d(w,{onClick:u},{default:R(()=>[xi]),_:1}),d(w,{onClick:I},{default:R(()=>[Ci]),_:1}),d(w,{onClick:S},{default:R(()=>[ki]),_:1}),d(w,{onClick:M},{default:R(()=>[$i]),_:1}),d(w,{onClick:p},{default:R(()=>[Ei]),_:1})]),d(_,{visible:n.value,"onUpdate:visible":y[0]||(y[0]=f=>n.value=f),width:"600px",height:"360px",class:"generate-process",onAfterClose:h},{default:R(()=>[d(k,{percent:s.value,type:"Circle",options:b(a)},null,8,["percent","options"]),C("a",{target:"_blank",class:"block mt-4",href:l.value},ye(l.value),9,Ii)]),_:1},8,["visible"])],64)}}};var zi=G(Mi,[["__scopeId","data-v-4c559158"]]);const Ri={name:"AsideCategory"},Ti={class:"aside-category"};function Oi(e,t,o,n,s,l){return E(),z("div",Ti)}var Pi=G(Ri,[["render",Oi],["__scopeId","data-v-79ac52e0"]]);const Bi={class:"app-main"},Ai={setup(e){const t=ne("sky"),o=at(),n=L(()=>({width:`${t.state.width}px`,height:`${t.state.height}px`}));return(s,l)=>{const a=T("sky-editor");return E(),z("div",Bi,[C("div",{class:"sky-editor-container",style:N(b(n))},[d(a,{class:"sky-editor__app","bg-style":b(o).bgStyle},null,8,["bg-style"])],4)])}}};var Li=G(Ai,[["__scopeId","data-v-b6fa9642"]]);const Hi={setup(e){const t=at(),o=Ve(),n=o.fetch();return oe(async()=>{const s=Ja();if(s){const{background:a}=s.bgStyle,i={};if(a.startsWith("url")){i.type="\u56FE\u7247";const[r]=a.match(/(?<=url\()[^)]+/);i.image=r}else i.type="\u989C\u8272",i.color=a;t.setState(i),sky.setState(s)}await n,At().forEach(a=>{const i=o.list.find(r=>r.name===a);o.addFont2Style(a,i.content.woff)})}),(s,l)=>(E(),z(J,null,[d(zi),d(Pi),d(Li)],64))}},ze=Cn(Hi);window.app=ze;ze.use(kn());ze.component(Ct.name,Ct);ze.use(rs);ze.use(Qa);const Di=ze.mount("#app");console.log("vm",Di);
