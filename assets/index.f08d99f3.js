var en=Object.defineProperty,tn=Object.defineProperties;var nn=Object.getOwnPropertyDescriptors;var ft=Object.getOwnPropertySymbols;var on=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable;var pt=(e,t,o)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,le=(e,t)=>{for(var o in t||(t={}))on.call(t,o)&&pt(e,o,t[o]);if(ft)for(var o of ft(t))sn.call(t,o)&&pt(e,o,t[o]);return e},Ae=(e,t)=>tn(e,nn(t));import{c as A,o as I,a as R,r as ce,m as ae,u as C,b as ln,d as mt,e as O,f as S,g as ye,n as N,h as be,i as P,j as f,p as an,w as T,k as Me,l as Re,q as ze,s as ee,t as pe,v as Ce,x as me,y as ie,z as Le,A as Z,F as Y,B as re,C as ke,D as $e,E as F,T as ht,G as He,O as rn,H as cn,I as un,J as dn,K as fn,L as pn,M as mn,N as hn,P as gn,Q,R as vn,S as qe,U as _n,V as yn,W as bn,X as q,Y as wn,Z as Sn,_ as xn,$ as Cn}from"./vendor.17ab2c7c.js";const kn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}};kn();if(typeof window!="undefined"){let e=function(){let t=document.body,o=document.getElementById("__svg__icons__dom__1637162971255__");o||(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.style.position="absolute",o.style.width="0",o.style.height="0",o.id="__svg__icons__dom__1637162971255__"),o.innerHTML='<symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-bottom"><rect x="3.333" y="16.666" width="1.667" height="13.333" rx=".833" transform="rotate(-90 3.333 16.666)" fill="#636C78" /><path d="M7.5 3.611A1.11 1.11 0 0 1 8.611 2.5h2.778A1.11 1.11 0 0 1 12.5 3.611v8.611c0 .614-.498 1.111-1.111 1.111H8.61a1.111 1.111 0 0 1-1.111-1.11V3.61z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8.944 3.944v7.945h2.112V3.944H8.944zM8.611 2.5A1.11 1.11 0 0 0 7.5 3.611v8.611a1.11 1.11 0 0 0 1.111 1.111h2.778a1.11 1.11 0 0 0 1.111-1.11V3.61c0-.614-.498-1.111-1.111-1.111H8.61z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-center"><path d="M17.5 4.167h-15v1.666h15V4.167zM15 7.5H5v1.667h10V7.5zM2.5 10.833h15V12.5h-15v-1.667zM15 14.167H5v1.666h10v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-horizontal-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 3.333a.833.833 0 0 0-.833.834V7.5h1.666V4.167A.833.833 0 0 0 10 3.334zm.833 9.167H9.167v3.334a.833.833 0 0 0 1.666 0V12.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15.367 8.8H4.633v2.4h10.734V8.8zm1.3-.3a1 1 0 0 0-1-1H4.333a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h11.334a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-justify"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333h-15v1.667h15V7.5zm-15 3.333h15V12.5h-15v-1.667zm11 3.334h-11v1.666h11v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-left"><rect x="3.333" y="3.333" width="1.667" height="13.333" rx=".833" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2 8.8H7.967v2.4H16.2V8.8zm1.3-.3a1 1 0 0 0-1-1H7.667a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1H16.5a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-right"><rect width="1.667" height="13.333" rx=".833" transform="matrix(-1 0 0 1 16.667 3.333)" fill="#636C78" /><path d="M3.5 7.5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h8.833a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 8.8h8.233v2.4H3.8V8.8zm-1.3-.3a1 1 0 0 1 1-1h8.833a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-top"><rect x="16.667" y="3.333" width="1.667" height="13.333" rx=".833" transform="rotate(90 16.667 3.333)" fill="#636C78" /><path d="M12.5 16.5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V7.667a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1V16.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 16.2V7.967H8.8V16.2h2.4zm.3 1.3a1 1 0 0 0 1-1V7.667a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1V16.5a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-vertical-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.667 10a.833.833 0 0 0-.834-.834H12.5v1.667h3.333c.46 0 .834-.373.834-.833zm-9.167.833V9.166H4.167a.833.833 0 0 0 0 1.667H7.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 15.367V4.633H8.8v10.733h2.4zm.3 1.3a1 1 0 0 0 1-1V4.332a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v11.334a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-down--line"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.94 5.727 8 8.78l3.06-3.053.94.94-4 4-4-4 .94-.94z" /></symbol><symbol fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-left"><path clip-rule="evenodd" d="m4.667 8 5.402-5.337.936.949L6.564 8l4.441 4.388-.937.949L4.668 8z" /></symbol><symbol viewBox="0 0 8 4" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-up"><path fill-rule="evenodd" clip-rule="evenodd" d="M.854 3.146A.5.5 0 0 0 1.207 4h5.586a.5.5 0 0 0 .353-.854L4.354.354a.5.5 0 0 0-.708 0L.854 3.146z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__bold"><path d="M6.375 13.125V9.75h3.563c.93 0 1.687.757 1.687 1.688a1.69 1.69 0 0 1-1.688 1.687H6.376zm0-8.25h3c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-3v-3zm6.375 1.5A3.375 3.375 0 0 0 9.375 3H4.5v12h5.438a3.562 3.562 0 0 0 3.562-3.563c0-1.212-.609-2.28-1.534-2.923a3.347 3.347 0 0 0 .784-2.139z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__copy"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.375 4.5h8.25a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-8.25a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75zm.75 1.5v9h6.75V6h-6.75zm4.5-3h-7.5v9.75h-1.5V2.25a.75.75 0 0 1 .75-.75h8.25V3z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__deleteline"><path d="M3.75 4.875V3h10.5v1.875H9.937V7.5H15V9H3V7.5h5.063V4.875H3.75zM9.938 15H8.063v-4.5h1.875V15z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__italic"><path d="M7.5 3v1.5h1.665l-2.25 9H5.25V15h5.25v-1.5H8.843l2.251-9h1.657V3H7.5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-down"><g mask="url(#hda)"><path fill-rule="evenodd" clip-rule="evenodd" d="m15.071 10.568 2.775-1.942a.416.416 0 0 0 0-.683l-7.607-5.325a.417.417 0 0 0-.478 0L2.154 7.943a.417.417 0 0 0 0 .683l2.775 1.942 1.385-1.065-1.74-1.219L10 4.486l5.428 3.798-1.741 1.219 1.384 1.065z" fill="#636C78" /><path d="M10.833 15H9.167V8.333a.833.833 0 1 1 1.666 0V15z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 14.655-2.327-2.328a.833.833 0 1 0-1.179 1.179l2.77 2.77a1.042 1.042 0 0 0 1.473 0l2.769-2.77a.833.833 0 1 0-1.179-1.179L10 14.655z" fill="#33383E" /></g></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-up"><g mask="url(#hfa)"><path fill-rule="evenodd" clip-rule="evenodd" d="m4.929 9.432-2.775 1.942a.417.417 0 0 0 0 .683l7.607 5.325c.143.1.334.1.478 0l7.607-5.325a.415.415 0 0 0 0-.683L15.07 9.432l-1.384 1.065 1.74 1.219L10 15.514l-5.428-3.798 1.741-1.219L4.93 9.432z" fill="#636C78" /><path d="M9.167 5h1.666v6.667a.833.833 0 0 1-1.666 0V5z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 5.345 2.327 2.328a.833.833 0 1 0 1.179-1.179l-2.77-2.77a1.042 1.042 0 0 0-1.473 0l-2.769 2.77a.833.833 0 1 0 1.179 1.179L10 5.345z" fill="#33383E" /></g></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667 2.33 5.885a.417.417 0 0 0 0 .73L10 10.833l7.67-4.218a.417.417 0 0 0 0-.73L10 1.667zm4.875 4.583L10 3.57 5.125 6.25 10 8.931l4.875-2.68z" /><path d="M17.5 8.674 10 12.799 2.5 8.674v1.902l7.5 4.125 7.5-4.125V8.674z" /><path d="M17.5 12.424 10 16.55l-7.5-4.125v1.902l7.5 4.125 7.5-4.125v-1.902z" /></symbol><symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__locked"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 11v8h12v-8H6zM5 9a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1H5z" fill="#F54531" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9V7a3 3 0 0 0-6 0v2h6zm-3-7a5 5 0 0 0-5 5v3.95c0 .027.023.05.05.05h9.9a.05.05 0 0 0 .05-.05V7a5 5 0 0 0-5-5z" fill="#F54531" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__spacing"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 16.667h1.667V3.333H2.5v13.334zm13.333 0H17.5V3.333h-1.667v13.334zM10 6.75l-1.708 4.083h3.416L10 6.75zM8.933 5h2.133l4.009 9.583h-1.808L12.4 12.5H7.6l-.867 2.083H4.925L8.933 5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__straw"><path d="m4.879 13.227 6.954-6.953 2.121 2.12L7 15.35c-.296.295-.651.5-.97.56l-1.592.299c-.298.056-.474-.12-.418-.419l.298-1.591c.06-.32.265-.675.56-.97z" stroke="#606770" stroke-width="1.5" /><path fill-rule="evenodd" clip-rule="evenodd" d="m15.079 7.912.38 2.345a.5.5 0 0 1-.14.433l-.35.35a.5.5 0 0 1-.707 0L9.077 5.854a.5.5 0 0 1 0-.707l.353-.353a.5.5 0 0 1 .426-.141l2.261.328 2.428-2.428A2.083 2.083 0 0 1 17.492 5.5l-2.413 2.412z" fill="#606770" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-left"><path d="M17.5 4.167h-15v1.666h15V4.167zM13.333 7.5H2.5v1.667h10.833V7.5zM2.5 10.833h15V12.5h-15v-1.667zm10.833 3.334H2.5v1.666h10.833v-1.666z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-right"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333H6.667v1.667H17.5V7.5zm-15 3.333h15V12.5h-15v-1.667zm15 3.334H6.667v1.666H17.5v-1.666z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-distortion"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.216 5.413a14.496 14.496 0 0 0-10.432 0l.998 7.981a13.637 13.637 0 0 1 8.436 0l.998-7.981zM3.121 4.24a1.1 1.1 0 0 0-.682 1.157l1.094 8.75a.854.854 0 0 0 1.147.694 12.302 12.302 0 0 1 8.64 0 .854.854 0 0 0 1.148-.694l1.094-8.75a1.1 1.1 0 0 0-.683-1.157 15.83 15.83 0 0 0-11.758 0z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.334 13.58 6 4.58l1.333-.05.333 9-1.332.05zm4-9.382L10 13.532l1.332.047.333-9.333-1.332-.048z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M14.333 8.719a18.618 18.618 0 0 0-10.666 0v1.396a17.285 17.285 0 0 1 10.666 0V8.72z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__trash"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.982 1.5a.375.375 0 0 0-.336.207L6 3H2.625v1.5h1.17l.707 11.3a.75.75 0 0 0 .748.7h7.5a.75.75 0 0 0 .748-.7l.707-11.3h1.17V3H12l-.646-1.293a.375.375 0 0 0-.336-.207H6.982zM5.3 4.5h7.397l-.65 10.5H5.951l-.65-10.5z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__underline"><path d="M4.875 3v5.625A4.13 4.13 0 0 0 9 12.75a4.13 4.13 0 0 0 4.125-4.125V3H11.25v5.625c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V3H4.875zm9.375 10.5V15H3.75v-1.5h10.5z" /></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__unlock"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9H9V7a3 3 0 0 1 6 0h2A5 5 0 0 0 7 7v2H5a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4zm-7.95 2H6v8h12v-8H7.05z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__writing-mode"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.666 4.583V3.75h10v2.5H15v-.833h-2.5v9.166h1.666v1.667H9.167v-1.667h1.666V5.417h-2.5v.834H6.667V4.583zm-3.332 7.084v-7.5H5v7.5h1.667l-3.333 4.166v-4.166z" /></symbol>',t.insertBefore(o,t.firstChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}var j=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const $n={name:"SkyButton"};function En(e){const t=e,o=A(()=>{const n=[];return t.size&&n.push(`sky-button--${t.size}`),t.plain&&n.push("sky-button--plain"),n});return(n,s)=>(I(),R("button",ae({type:"button",class:["sky-button",C(o)]},n.$attrs),[ce(n.$slots,"default",{},void 0,!0)],16))}const In=Object.assign($n,{props:{plain:{type:Boolean,default:!1},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},setup:En});var Mn=j(In,[["__scopeId","data-v-504bc46a"]]);const Rn=["type","value"],zn={key:0,class:"sky-input__append flex-center"},Tn={name:"SkyInput"};function Pn(e,{emit:t}){const o=e,n=ln(),s=mt(),l=O(null),a=A(()=>{const c=[];return o.size&&c.push(`sky-input--${o.size}`),n.append&&c.push("sky-input--append"),c});function r(c){t("input",c.target.value,c)}function i(c){t("change",c.target.value,c),be(()=>{l.value.value=o.value})}return(c,d)=>(I(),R("div",{class:N(["sky-input",[...C(a),C(s).class]])},[S("input",ae({ref:(h,v)=>{v.elInput=h,l.value=h},class:"sky-input__inner",type:e.type,value:e.value},c.$attrs,{onInput:r,onChange:i}),null,16,Rn),c.$slots.append?(I(),R("div",zn,[ce(c.$slots,"append",{},void 0,!0)])):ye("",!0)],2))}const Bn=Object.assign(Tn,{props:{value:[String,Number],type:{type:String,default:"text"},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},emits:["input","change"],setup:Pn});var gt=j(Bn,[["__scopeId","data-v-3d656d19"]]);const Ee=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e);const On={name:"SkyInputNumber",inheritAttrs:!1};function An(e,{emit:t}){const o=e,n=mt(),s=A(()=>{const v="sky-input__number",M=[v,o.class];return n.size&&M.push(`${v}--${n.size}`),n.readonly!==void 0&&M.push(`${v}-readonly`),M}),l=A(()=>typeof o.max=="number"&&n.value>=o.max),a=A(()=>typeof o.min=="number"&&n.value<=o.min);function r(v){return v=Number(v),typeof o.min=="number"&&(v<o.min&&(v=o.min),v>o.max&&(v=o.max)),v}function i(v,M){t("input",r(v),M)}function c(v,M){t("change",r(v),M)}function d(){l.value||t("change",Ee(n.value+o.step,{decimal:o.decimal}))}function h(){a.value||t("change",Ee(n.value-o.step,{decimal:o.decimal}))}return(v,M)=>{const k=P("svg-icon");return I(),R("div",{class:N(C(s))},[f(gt,ae({type:"number"},C(n),{onInput:i,onChange:c}),null,16),S("div",{class:N(["sky-input__number-arrow flex-center top-0",{"sky-disabled":C(l)}]),onClick:d},[f(k,{filename:"arrow-up"})],2),S("div",{class:N(["sky-input__number-arrow flex-center bottom-0",{"sky-disabled":C(a)}]),style:{transform:"rotateX(180deg)"},onClick:h},[f(k,{filename:"arrow-up"})],2)],2)}}const Ln=Object.assign(On,{props:{min:Number,max:Number,decimal:{type:Number,default:0},step:{type:Number,default:1},class:{type:String,default:""}},emits:["input","change"],setup:An});var Hn=j(Ln,[["__scopeId","data-v-00c01dec"]]);const Dn=e=>(Me("data-v-25aed1d8"),e=e(),Re(),e),Vn={class:"sky-select","data-sky-popup":""},Fn=Dn(()=>S("div",{class:"absolute w-full h-full top-0 cursor-pointer"},null,-1)),jn={class:"sky-select__arrow flex-center"},Gn={name:"SkySelect"};function Nn(e,{expose:t,emit:o}){an("vmSelect",ze());const n=O(!1);function s(l){o("update:value",l),o("change",l),n.value=!1}return t({handleChange:s}),(l,a)=>{const r=P("SkyInput"),i=P("svg-icon"),c=P("SkyPopup");return I(),R("div",Vn,[S("div",{onClick:a[0]||(a[0]=d=>n.value=!n.value)},[f(r,{value:e.value,readonly:""},null,8,["value"]),Fn,S("div",jn,[f(i,{filename:"arrow-down--line"})])]),f(c,{visible:n.value,"onUpdate:visible":a[1]||(a[1]=d=>n.value=d),class:"sky-select__popup"},{default:T(()=>[ce(l.$slots,"default",{},void 0,!0)]),_:3},8,["visible"])])}}const qn=Object.assign(Gn,{props:{value:{type:[String,Number],required:!0}},emits:["update:value","change"],setup:Nn});var Un=j(qn,[["__scopeId","data-v-25aed1d8"]]);const Wn=["value"],Kn={key:1},Yn={name:"SkyOption",inheritAttrs:!1};function Xn(e){const t=e,o=ee("vmSelect"),n=A(()=>({active:t.value===o.props.value}));function s(){o.exposed.handleChange(t.value)}return(l,a)=>(I(),R("div",{class:N(["sky-option",C(n)]),value:e.value,onClick:s},[l.$slots.default?ce(l.$slots,"default",{key:0},void 0,!0):(I(),R("span",Kn,pe(e.label),1))],10,Wn))}const Jn=Object.assign(Yn,{props:{label:{type:String,default:""},value:{required:!0}},setup:Xn});var Zn=j(Jn,[["__scopeId","data-v-83d83e12"]]);const Te=(e,{onmousedown:t,onmousemove:o,onmouseup:n}={})=>{let s=e.getBoundingClientRect();const l={x:0,y:0},a=d=>{let h=d.pageX-s.x,v=d.pageY-s.y;h<0&&(h=0),h>s.width&&(h=s.width),v<0&&(v=0),v>s.height&&(v=s.height),l.x=Ee(h/s.width,{decimal:2}),l.y=Ee(v/s.height,{decimal:2})},r=d=>{a(d),o&&o(l,d)},i=d=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),n&&n(l,d)},c=d=>{s=e.getBoundingClientRect(),a(d),document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),t&&t(l,d)};return e.addEventListener("mousedown",c),{destroy(){e.removeEventListener("mousedown",c)}}},vt=(e,t,o)=>{let n=Math.round(e).toString(16),s=Math.round(t).toString(16),l=Math.round(o).toString(16);return n.length===1&&(n="0"+n),s.length===1&&(s="0"+s),l.length===1&&(l="0"+l),"#"+n+s+l},De=(e,t,o,n=1)=>{const s=vt(e,t,o);let l=Math.round(n*255).toString(16);return l.length===1&&(l="0"+l),s+l},_t=(e,t,o)=>{e/=255,t/=255,o/=255;const n=Math.min(e,t,o),s=Math.max(e,t,o),l=s-n;let a=0,r=0;const i=s;if(l===0)a=r=0;else{r=l/s;const c=((s-e)/6+l/2)/l,d=((s-t)/6+l/2)/l,h=((s-o)/6+l/2)/l;e===s?a=h-d:t===s?a=1/3+c-h:o===s&&(a=2/3+d-c),a<0?a+=1:a>1&&(a-=1)}return[a*360,r*100,i*100]},Qn=(e,t,o,n=1)=>[..._t(e,t,o),n];function eo(e,t,o){e=e/360*6,t/=100,o/=100;const n=Math.floor(e),s=e-n,l=o*(1-t),a=o*(1-s*t),r=o*(1-(1-s)*t),i=n%6,c=[o,a,l,l,r,o][i],d=[r,o,o,a,l,l][i],h=[l,l,r,o,o,a][i];return[Math.round(c*255),Math.round(d*255),Math.round(h*255)]}const to=(e,t,o)=>{const[n,s,l]=eo(e,t,o);return vt(n,s,l)},no=(e,t,o,n=1)=>`${to(e,t,o)}${n===0?"00":Math.round(n*255).toString(16)}`,Ue=e=>{e=e.slice(0,7);let t=0,o=0,n=0;return e.length==4?(t=+("0x"+e[1]+e[1]),o=+("0x"+e[2]+e[2]),n=+("0x"+e[3]+e[3])):e.length==7&&(t=+("0x"+e[1]+e[2]),o=+("0x"+e[3]+e[4]),n=+("0x"+e[5]+e[6])),[t,o,n]},We=e=>{const t=Ue(e),o=+("0x"+e[7]+e[8]);return[...t,+(o/255).toFixed(2)]},oo=e=>{const[t,o,n,s]=We(e);return Qn(t,o,n,s)},yt=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",bt=(e,t)=>{const o=[];return t.forEach(n=>{o.push(`${n.color} ${n.offset*100}%`)}),`linear-gradient(${e}deg, ${o.join(",")})`};const Ke=e=>(Me("data-v-7f0e7b72"),e=e(),Re(),e),so={class:"sky-color-picker"},lo={class:"mb-3"},ao={key:1,class:"sky-cp__gradient flex-center"},io={class:"sky-cp__gradient-bar w-48 h-4"},ro=["data-sort","onMousedown","onKeyup"],co=Ke(()=>S("div",{class:"sky-cpp__color-saturation"},null,-1)),uo=Ke(()=>S("div",{class:"sky-cpp__color-value"},null,-1)),fo={class:"sky-cps__track"},po={class:"sky-cps__track"},mo={class:"flex justify-between mt-3.5"},ho={key:0,class:"sky-cp__picking-model"},go=Ke(()=>S("div",{class:"sky-cp__straw-mousetrack"},null,-1)),vo={name:"SkyColorPicker",inheritAttrs:!1};function _o(e,{emit:t}){const o=e,n=O(yt(o.value)),s=O(90),l=O([]),a=Ce({h:0,s:0,l:0,a:0}),r=O("#f00"),i=O("#000"),c=O(0),d=O(!1);let h=O({});const v=O(),M=O(),k=O(),w=O(),E=O(),p=O(),m=O();let u=null,g=null,_=null,y=null,x=null,b=null,$=!0,z=null;const H={color:o.defaultColor,gradient:o.defaultGradient,image:o.defaultImage},V=A(()=>o.modes.includes("\u6E10\u53D8")),U=A(()=>{const B=Ue(i.value).join(",");return{background:`linear-gradient(to right, rgba(${B}, 0) 0%, rgb(${B}) 100%)`}});me(h,B=>{je(B.color)}),me(()=>o.value,B=>{const D=yt(B);D!==n.value&&(n.value=D),it(D),ve(B)});const K=me(a,te,{deep:!0});function te(B){const D=no(...Object.values(B));let J;n.value==="\u7EAF\u8272"?J=D:n.value==="\u6E10\u53D8"&&(h.value.color=D,J=bt(s.value,l.value)),rt(D),ge(J)}ie(xe);async function xe(){k.value.style.left=`${a.s}%`,k.value.style.top=`${100-a.l}%`,w.value.style.left=`${a.h/360*100}%`,p.value.style.left=`${a.a*100}%`,V.value&&(u=Te(v.value,{onmousedown:B,onmousemove:D,onmouseup:J}));function B(W){if(x)return;const fe=l.value.findIndex(_e=>_e.offset>=W.x),L=l.value[fe-1],G=We(L.color),Ne=l.value[fe],ut=We(Ne.color),dt=[];for(let _e=0;_e<3;_e+=1)dt.push(G[_e]+(ut[_e]-G[_e])*W.x);const Zt=Ne.offset-W.x-(W.x-L.offset)>0?G[3]:ut[3],Qt=De(...dt,Zt);h.value={color:Qt,offset:W.x},l.value.splice(fe,0,h.value)}function D(W){if(!x)return;h.value.offset=W.x,l.value.sort((L,G)=>L.offset-G.offset);const fe=bt(s.value,l.value);ge(fe)}function J(){x=!1}g=Te(M.value,{onmousemove:ne,onmouseup:ne});function ne(W){Ge();const fe=W.x*100,L=W.y*100;a.s=Math.round(fe),a.l=Math.round(100-L),k.value.style.left=`${fe}%`,k.value.style.top=`${L}%`}_=Te(E.value,{onmousemove:de,onmouseup:de});function de(W){Ge(),a.h=W.x*360,w.value.style.left=`${W.x*100}%`}y=Te(m.value,{onmousemove:Oe,onmouseup:Oe});function Oe(W){Ge(),a.a=W.x,p.value.style.left=`${W.x*100}%`}it(n.value),ve(o.value)}Le(()=>{g==null||g.destroy(),_==null||_.destroy(),y==null||y.destroy(),K(),u&&u.destroy()});function ve(B){n.value==="\u7EAF\u8272"?H.color=B:n.value==="\u6E10\u53D8"?H.gradient=B:n.value==="\u56FE\u6848"&&(H.image=B)}function ge(B){B!==o.value&&(ve(B),t("update:value",B))}async function Be(B){if(B===n.value)return;n.value=B;let D;B==="\u7EAF\u8272"?D=H.color:B==="\u6E10\u53D8"?D=H.gradient:B==="\u56FE\u6848"&&(D=H.image),ge(D)}function it(B){B==="\u7EAF\u8272"?je(o.value):B==="\u6E10\u53D8"&&(l.value.length===0?o.value.match(/[^,]+/g).forEach((D,J)=>{if(J===0){s.value=Number(D.match(/\d+/)[0]);return}let[ne,de]=D.trim().split(" ");ne.startsWith("#")||(ne=De(ne)),de=de.match(/\d+/)[0]/100,l.value.push({color:ne,offset:de}),h.value=l.value[0]}):je(h.value.color))}function rt(B){var D;r.value=`hsl(${a.h}, 100%, 50%)`,i.value=B.slice(0,7),b=i.value,c.value=Math.round(((D=a.a)!=null?D:1)*100)}function je(B){if($){const D=oo(B);a.h=D[0],a.s=D[1],a.l=D[2],a.a=D[3],rt(B);let J=a.s;const ne=Math.round(100-a.l);k.value.style.left=`${J}%`,k.value.style.top=`${ne}%`,J=a.h/360,w.value.style.left=`${J*100}%`,p.value.style.left=`${a.a*100}%`}}function Wt(B){x=!0,h.value=B}function Kt(B){if(!["Backspace","Delete"].includes(B.key)||l.value.length===2)return;const D=l.value.indexOf(h.value);l.value.splice(D,1),h.value=l.value[0]}function Yt(B){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(B)){const D=Ue(B),[J,ne,de]=_t(...D);a.h=J,a.s=ne,a.l=de,k.value.style.left=`${a.s}%`,k.value.style.top=`${100-a.l}%`,w.value.style.left=`${a.h/360*100}%`,i.value=B}else i.value=b}function ct(B){a.a=B/100,p.value.style.left=`${B}%`}function Ge(){$=!1,z&&clearTimeout(z),z=setTimeout(()=>{$=!0},16)}async function Xt(){}function Jt(){}return(B,D)=>{const J=P("SkyTabPanel"),ne=P("SkyTabs"),de=P("svg-icon"),Oe=P("SkyButton"),W=P("SkyInput"),fe=P("SkyInputNumber");return I(),R(Y,null,[S("div",so,[S("div",lo,pe(n.value),1),e.modes.length>1?(I(),Z(ne,{key:0,value:n.value,onChange:Be},{default:T(()=>[(I(!0),R(Y,null,re(e.modes,L=>(I(),Z(J,{key:L,label:L},null,8,["label"]))),128))]),_:1},8,["value"])):ye("",!0),C(V)?ke((I(),R("div",ao,[S("div",io,[S("div",{ref:(L,G)=>{G.elGradientTrack=L,v.value=L},class:"sky-cpgb__track h-full",style:F([{width:"174px"},{background:e.value}])},[(I(!0),R(Y,null,re(l.value,(L,G)=>(I(),R("div",{key:G,class:N(["sky-cpgb__pointer",{"sky-cpgb__pointer--active":L===C(h)}]),"data-sort":G,style:F({left:`${L.offset*100}%`,background:L.color}),tabindex:"-1",onMousedown:Ne=>Wt(L),onKeyup:He(Kt,["stop"])},null,46,ro))),128))],4)])],512)),[[$e,n.value==="\u6E10\u53D8"]]):ye("",!0),S("div",{ref:(L,G)=>{G.elPalette=L,M.value=L},class:"sky-cp__palette",style:F({background:r.value})},[co,uo,S("div",{ref:(L,G)=>{G.elPalettePointer=L,k.value=L},class:"sky-cpp__pointer"},null,512)],4),S("div",{ref:(L,G)=>{G.elSliderHux=L,E.value=L},class:"sky-cp__slider sky-cp__slider-hux"},[S("div",fo,[S("div",{ref:(L,G)=>{G.elSliderHuxPointer=L,w.value=L},class:"sky-cpst__pointer"},null,512)])],512),S("div",{ref:(L,G)=>{G.elSliderAlpha=L,m.value=L},class:"sky-cp__slider sky-cp__slider-alpha"},[S("div",{class:"sky-cpsa__background",style:F(C(U))},null,4),S("div",po,[S("div",{ref:(L,G)=>{G.elSliderAlphaPointer=L,p.value=L},class:"sky-cpst__pointer"},null,512)])],512),S("div",mo,[f(Oe,{size:"small",onClick:Xt},{default:T(()=>[f(de,{filename:"straw"})]),_:1}),f(W,{value:i.value,class:"w-24 mx-1",size:"small",onChange:Yt},null,8,["value"]),f(fe,{value:c.value,"onUpdate:value":D[0]||(D[0]=L=>c.value=L),class:"w-12",size:"small",min:0,max:100,onInput:ct,onChange:ct},null,8,["value"])])]),(I(),Z(ht,{to:"body"},[d.value?(I(),R("div",ho,[S("canvas",{class:"sky-cp__straw-canvas",onClick:Jt}),go])):ye("",!0)]))],64)}}const yo=Object.assign(vo,{props:{value:{type:String,default:"#ffffff00"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8","\u56FE\u6848"]},defaultColor:{type:String,default:"#ffffff00"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value"],setup:_o});var bo=j(yo,[["__scopeId","data-v-7f0e7b72"]]),wo={watch:{visible(e){if(!e)return;for(this.mountEl=this.$parent.$el;this.mountEl&&!Reflect.has(this.mountEl.dataset,"skyPopup");)this.mountEl=this.mountEl.parentElement;if(!this.mountEl)return;const{top:t,left:o,width:n,height:s}=this.mountEl.getBoundingClientRect();this.$el.style.top=`${t+s}px`,this.$el.style.left=`${o+n/2}px`}}};const So={name:"SkyPopup",mixins:[wo]};function xo(e,{emit:t}){const o=e,n=A(()=>({width:`${o.width}px`}));return(s,l)=>ke((I(),Z(C(rn),{class:"sky-popup",style:F(C(n)),onTrigger:l[0]||(l[0]=a=>t("update:visible",!1))},{default:T(()=>[ce(s.$slots,"default",{},void 0,!0)]),_:3},8,["style"])),[[$e,e.visible]])}const Co=Object.assign(So,{props:{visible:{type:Boolean,default:!1},width:{type:Number,default:200}},emits:["update:visible"],setup:xo});var ko=j(Co,[["__scopeId","data-v-54ee3737"]]);const $o={class:"sky-tabs"},Eo={class:"sky-tabs__header"},Io={class:"sky-tabs__header-shell"},Mo=["onClick"],Ro={class:"sky-tabs__content"},zo={name:"SkyTabs"};function To(e,{expose:t,emit:o}){const n=e;let s=0;const l=O([]),a=Ce({width:0,left:0});let r=null;function i(d){var v,M;const h=l.value.findIndex(k=>k.props.label===d);a.left=`${s*h}%`,r=l.value[h],(M=(v=r.exposed)==null?void 0:v.changeActive)==null||M.call(v,!0)}function c(d,h){var v,M;o("update:value",d.props.label),o("change",d.props.label),a.left=`${s*h}%`,(M=(v=r==null?void 0:r.exposed)==null?void 0:v.changeActive)==null||M.call(v,!1),r=l.value[h],r.exposed.changeActive(!0)}return me(()=>n.value,i),ie(()=>{s=100/l.value.length,a.width=`${s}%`,i(n.value)}),t({tabs:l}),(d,h)=>(I(),R("div",$o,[S("div",Eo,[S("div",Io,[(I(!0),R(Y,null,re(l.value,(v,M)=>(I(),R("div",{key:v.props.label,class:N(["sky-tab__title",{"sky-active":v.props.label===e.value}]),onClick:k=>c(v,M)},pe(v.props.label),11,Mo))),128)),S("div",{class:"sky-tab__slider",style:F(C(a))},null,4)])]),S("div",Ro,[ce(d.$slots,"default",{},void 0,!0)])]))}const Po=Object.assign(zo,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup:To});var Bo=j(Po,[["__scopeId","data-v-2fd72900"]]);const Oo={name:"SkyTabPanel"};function Ao(e,{expose:t}){const o=ze();o.parent.exposed.tabs.value.push(o);const n=O(!1),s=A(()=>({display:n.value?"block":"none"}));function l(a){n.value=a}return t({changeActive:l}),(a,r)=>(I(),R("div",{class:"sky-tab-panel",style:F(C(s))},[ce(a.$slots,"default")],4))}const Lo=Object.assign(Oo,{props:{label:{type:String,required:!0}},setup:Ao});const Ho={name:"SkyTooltip",props:{content:{type:[String,Number],default:""},direction:{type:String,default:"top",validator(e){return["top","right","bottom","left"].includes(e)}},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},computed:{rootClass(){const e=[`sky-tooltip--${this.direction}`];return this.disabled&&e.push("sky-tooltip--disabled"),this.active&&e.push("sky-tooltip--active"),e}}},Do=["data-tips"];function Vo(e,t,o,n,s,l){return I(),R("div",{class:N(["sky-tooltip",l.rootClass]),"data-tips":o.content},[ce(e.$slots,"default",{},void 0,!0)],10,Do)}var Fo=j(Ho,[["render",Vo],["__scopeId","data-v-d2e76e10"]]);const jo={class:"sky-dialog__header"},Go={class:"sky-dialog__body"},No={class:"sky-dialog__footer"},qo={name:"SkyDialog"};function Uo(e,{emit:t}){const o=e,n=A(()=>({display:o.visible?"flex":"none"})),s=A(()=>({width:o.width,height:o.height}));async function l(){o.maskClosable&&t("update:visible",!1),await be(),t("afterClose")}return(a,r)=>(I(),Z(ht,{to:e.teleportTo},[S("div",{class:N(["sky-dialog flex-center",a.$attrs.class]),style:F(C(n))},[S("div",{class:"mask",onClick:l}),S("div",{class:"sky-dialog__panel",style:F(C(s))},[S("div",jo,[ce(a.$slots,"header",{},void 0,!0)]),S("div",Go,[ce(a.$slots,"default",{},void 0,!0)]),S("div",No,[ce(a.$slots,"footer",{},void 0,!0)])],4)],6)],8,["to"]))}const Wo=Object.assign(qo,{props:{visible:{type:Boolean,default:!1},width:{type:String,default:"80%"},height:{type:String,default:"80%"},teleportTo:{type:String,default:"body"},maskClosable:{type:Boolean,default:!0}},emits:["update:visible","afterClose"],setup:Uo});var Ko=j(Wo,[["__scopeId","data-v-3a726588"]]);const Yo={name:"SkySlider"};function Xo(e,{emit:t}){const o=e,n=O(!1),s=O(null),l=O(null);let a=null,r=null,i=null;const c=A(()=>Math.round(o.max-o.min)),d=A(()=>Math.round((o.value-o.min)/c.value*100)),h=A(()=>({width:`${d.value}%`})),v=A(()=>({left:`${d.value}%`}));ie(()=>{a=Te(s.value,{onmousedown:M,onmousemove:M}),r=()=>{n.value=!0},i=()=>{n.value=!1},l.value.addEventListener("mousedown",r),document.addEventListener("mouseup",i)}),Le(()=>{a.destroy(),l.value.removeEventListener("mousedown",r),document.removeEventListener("mouseup",i)});function M(k){let w=k.x*c.value;o.step>0&&(w=Math.round(k.x*o.max/o.step)*o.step);const E=Ee(w+o.min,{decimal:2});E!==o.value&&t("update:value",E)}return(k,w)=>{const E=P("SkyTooltip");return I(),R("div",{class:"sky-slider",ref:(p,m)=>{m.elRoot=p,s.value=p}},[S("div",{class:"sky-slider__progress",style:F(C(h))},null,4),S("div",{ref:(p,m)=>{m.elPointer=p,l.value=p},class:"sky-slider__pointer",style:F(C(v))},[ke(f(E,{content:e.value,active:n.value},null,8,["content","active"]),[[$e,e.showTooltip]])],4)],512)}}const Jo=Object.assign(Yo,{props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:0},showTooltip:{type:Boolean,default:!0}},emits:["update:value"],setup:Xo});var Zo=j(Jo,[["__scopeId","data-v-7e8a13ac"]]);const Qo={name:"SkyProgress"};function es(e){const t=e,o=O(),n=A(()=>{const l="sky-progress";return[l,`${l}__${t.type}`]});let s;return me(()=>t.percent,l=>{s.animate(l),s.setText(`${Math.round(t.percent*100)}%`)}),ie(()=>{s=new cn[t.type](o.value,le({color:"#1D4ED8",strokeWidth:2,trailColor:"#E5E7EB",trailWidth:2,text:{value:`${Math.round(t.percent*100)}%`,style:{}}},t.options))}),un(()=>{s.destroy()}),(l,a)=>(I(),R("div",{ref:(r,i)=>{i.elProgressInner=r,o.value=r},class:N(["sky-progress",C(n)])},null,2))}const ts=Object.assign(Qo,{props:{percent:{type:Number,default:0},type:{type:String,default:"Line",validator:e=>["Line","Circle","SemiCircle"].includes(e)},options:Object},setup:es});var ns=j(ts,[["__scopeId","data-v-067c2d98"]]);const os=[Mn,gt,Hn,Un,Zn,bo,ko,Bo,Lo,Fo,Ko,Zo,ns];var ss={install(e){os.forEach(t=>{e.component(t.name,t)})}};const ls=["xlink:href"],as={name:"SvgIcon"};function is(e){const t=e,o=A(()=>`#svg-icon__${t.filename}`);return(n,s)=>(I(),R("svg",ae({class:[`svg-icon__${e.filename}`,"svg-icon"],"aria-hidden":"true"},n.$attrs),[S("use",{"xlink:href":C(o)},null,8,ls)],16))}const rs=Object.assign(as,{props:{filename:String},setup:is});var wt=j(rs,[["__scopeId","data-v-3d81af54"]]);const oe={text:"text",image:"image"},St={gif:"image/gif"},xt="SourceHanSansSC-Regular",he={h:"horizontal-tb",v:"vertical-rl"},cs={class:"cloud-text"},us={class:"text__effect"},ds=["textContent"],fs=["textContent"],ps=["contenteditable"],ms={name:"CloudText",inheritAttrs:!1};function hs(e){const t=e,o=A(()=>{const r=t.cloud.writingMode===he.v;return Ae(le({},n(t.cloud)),{width:r?"auto":"100%",height:r?"100%":"auto"})});function n(r){var c,d,h,v,M,k,w;const i={fontSize:r.fontSize?`${r.fontSize}px`:"",textAlign:(c=r.textAlign)!=null?c:"",color:r.color,textDecoration:(d=r.textDecoration)!=null?d:"",writingMode:(h=r.writingMode)!=null?h:"",fontWeight:(v=r.fontWeight)!=null?v:"",fontStyle:(M=r.fontStyle)!=null?M:"",lineHeight:(k=r.lineHeight)!=null?k:"",letterSpacing:(w=r.letterSpacing)!=null?w:""};return r.fontFamily&&(i.fontFamily=r.fontFamily),i}function s(r){return n(r)}function l(r){return{webkitTextStroke:`${r.width}px rgba(${r.color.join(",")})`}}function a(r){const{distance:i,angle:c,color:d,blur:h}=r,v=i*Math.cos((180-c)*(Math.PI/180)),M=i*Math.sin((180-c)*(Math.PI/180));return{textShadow:`${v}px ${M}px ${h}px rgba(${d.join(",")})`}}return(r,i)=>(I(),R("div",cs,[ke(S("div",us,[(I(!0),R(Y,null,re(e.cloud.strokes,(c,d)=>(I(),R("div",{key:`stroke${d}`,class:"text__stroke",style:F(l(c))},[(I(!0),R(Y,null,re(e.cloud.texts,(h,v)=>(I(),R("span",{key:v,style:F(s(h)),textContent:pe(h.text)},null,12,ds))),128))],4))),128)),(I(!0),R(Y,null,re(e.cloud.shadows,(c,d)=>(I(),R("div",{key:`shadow${d}`,class:"text__shadow",style:F(a(c))},[(I(!0),R(Y,null,re(e.cloud.texts,(h,v)=>(I(),R("span",{key:v,style:F(s(h)),textContent:pe(h.text)},null,12,fs))),128))],4))),128))],512),[[$e,e.readonly]]),S("div",ae({class:"text__content",style:C(o)},r.$attrs,{contenteditable:!e.readonly}),[(I(!0),R(Y,null,re(e.cloud.texts,(c,d)=>(I(),R("span",{key:d,style:F(s(c))},pe(c.text),5))),128))],16,ps)]))}const gs=Object.assign(ms,{props:{cloud:{type:Object,required:!0},readonly:{type:Boolean,default:!0}},setup:hs});const vs={name:"CloudTextEditor"};function _s(e,{expose:t}){const o=e,n=ee("sky"),s=["ne","nw","sw","se"],l={moveable:{onClick:v,onChangeTarget:M,onResizeStart:k,onResize:w,onResizeEnd:E,keepRatio:[...s],renderDirections:d(o.cloud.writingMode),onLeaveSelect:M}},a=O(),r=O(!0);O(JSON.stringify(o.cloud.texts));let i=null;const c=A(()=>({width:`${o.cloud.width/n.state.scale}px`,height:`${o.cloud.height/n.state.scale}px`,transform:`scale(${n.state.scale})`,transformOrigin:"top left"}));me(r,p=>{p||(n.moveable.instance.passDragArea=!0)}),me(()=>o.cloud.writingMode,p=>{l.moveable.renderDirections=d(p),n.moveable.updateState(),n.cloud.updateCloudsElementRect()}),ie(()=>{i=a.value.querySelector(".text__content"),["cloud.lineHeight"].forEach(p=>{me(()=>p,async()=>{await be(),n.cloud.updateCloudsElementRect()})})});function d(p){return p===he.v?[...s,"n","s"]:[...s,"w","e"]}function h(){window.getSelection().removeAllRanges(),window.getSelection().selectAllChildren(i)}function v(p){!r.value||o.cloud.lock||p.metaKey||p.shiftKey||n.runtime.targetClouds.find(m=>m.id===o.cloud.id)&&(r.value=!1,be(()=>{h()}))}function M(){r.value=!0,o.cloud.text=i.textContent}function k(p){const{datas:m}=p;m.startFontSize=o.cloud.fontSize}function w(p){const{datas:m,direction:u}=p,[g,_]=u,{el:y}=n.cloudVM[o.cloud.id].subTree;if(o.cloud.writingMode===he.h){if(_===0){const{clientHeight:x}=i;y.style.height=`${x}px`,o.cloud.height=x}}else if(o.cloud.writingMode===he.v&&g===0){const{clientWidth:x}=i;y.style.width=`${x}px`,o.cloud.width=x}g!==0&&_!==0&&(o.cloud.fontSize=m.startFontSize*m.scale[0])}function E(){}return t({skyHooks:l,readonly:r}),(p,m)=>(I(),R("div",{ref:(u,g)=>{g.elRoot=u,a.value=u},class:"cloud-text__editor",style:F(C(c)),onClick:v},[f(gs,{cloud:e.cloud,readonly:r.value},null,8,["cloud","readonly"])],4))}const ys=Object.assign(vs,{props:{cloud:{type:Object,required:!0}},setup:_s}),bs={class:"cloud__image"},ws=["src"],Ss={name:"CloudImage"};function xs(e){return(t,o)=>(I(),R("div",bs,[S("img",{src:e.cloud.src,alt:"",class:"image__content"},null,8,ws)]))}const Cs=Object.assign(Ss,{props:{cloud:{type:Object,required:!0}},setup:xs}),ks={name:"CloudImageEditor"};function $s(e,{expose:t}){return t({skyHooks:{moveable:{keepRatio:["ne","nw","sw","se"]}}}),(n,s)=>(I(),Z(Cs,dn(fn(n.$attrs)),null,16))}const Es=Object.assign(ks,{setup:$s});const Is={class:"header"},Ms={name:"ControlPanelHeader"};function Rs(e){return(t,o)=>{const n=P("svg-icon");return I(),R("div",Is,[e.showBack?(I(),Z(n,{key:0,filename:"arrow-left",onClick:o[0]||(o[0]=s=>t.emit("back"))})):ye("",!0),S("div",null,pe(e.title),1)])}}const zs=Object.assign(Ms,{props:{showBack:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["back"],setup:Rs});var Ve=j(zs,[["__scopeId","data-v-4f888f5e"]]),Ct=`/* purgecss start ignore */

.sky-renderer {
  position: absolute;
  top: 0;
  left: 0;
}

.sky-background {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-repeat: no-repeat;
}

.sky-clouds {
  position: absolute;
}

.sky-cloud {
  position: absolute;
}

/* purgecss end ignore */
`,kt=`/* purgecss start ignore */

.text-index {
  word-wrap: break-word;
}

.text__effect {
  position: absolute;
  width: 100%;
  height: 100%;
}

.text__content {
  position: absolute; /* \u7528\u6765\u63D0\u5347 DOM \u5C42\u7EA7 + \u83B7\u53D6\u5185\u5BB9\u771F\u5B9E\u5BBD\u9AD8 */
}

/* purgecss end ignore */
`,$t=`/* purgecss start ignore */

.cloud__image {
  height: 100%;
}

.image__content {
  display: block;
  width: 100%;
  height: 100%;
  -webkit-user-drag: none;
}

/* purgecss end ignore */
`;function Ye(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}var Ts=Ye(Ct)+Ye(kt)+Ye($t);const Ps={key:0,class:"multiple-mask flex-center"},Bs={name:"BarColorPicker",inheritAttrs:!1};function Os(e){const t=ee("sky"),o=O(!1),n=O(null);return ie(()=>{n.value=t.vm.subTree.children[0].el}),(s,l)=>{const a=P("SkyColorPicker"),r=P("SkyPopup");return I(),R("div",{class:"bar__color-picker",onPointerdown:l[2]||(l[2]=He(i=>o.value=!o.value,["stop"]))},[S("div",{class:"relative h-6 rounded cursor-pointer",style:F({background:s.$attrs.value})},[e.multiple?(I(),R("div",Ps,"\u591A\u79CD\u989C\u8272")):ye("",!0)],4),f(r,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=i=>o.value=i),width:256,onPointerdown:l[1]||(l[1]=He(()=>{},["stop"]))},{default:T(()=>[f(a,ae({"straw-el":n.value,"straw-css":C(Ts)},s.$attrs),null,16,["straw-el","straw-css"])]),_:1},8,["visible"])],32)}}const As=Object.assign(Bs,{props:{multiple:{type:Boolean,default:!1}},setup:Os});var Et=j(As,[["__scopeId","data-v-23d9899a"]]);const Ls={class:"flex justify-between items-center text-xs"},Hs=S("div",null,"\u5B57\u95F4\u8DDD",-1),Ds={class:"flex justify-between items-center text-xs mt-2"},Vs=S("div",null,"\u884C\u95F4\u8DDD",-1),Fs={name:"PopupSpacing"};function js(e){const t=e,o=A(()=>{const{fontSize:s}=t.cloud;return s>50?-50:-s}),n=A(()=>{const{fontSize:s}=t.cloud;return s<50?50:s});return(s,l)=>{const a=P("SkySlider"),r=P("SkyInputNumber"),i=P("SkyPopup");return I(),Z(i,ae({width:240},s.$attrs),{default:T(()=>[S("div",Ls,[Hs,f(a,{value:e.cloud.letterSpacing,"onUpdate:value":l[0]||(l[0]=c=>e.cloud.letterSpacing=c),min:C(o),max:C(n),"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),f(r,{value:Math.round(e.cloud.letterSpacing),size:"small",class:"w-12",min:C(o),max:C(n),onChange:l[1]||(l[1]=c=>e.cloud.letterSpacing=c)},null,8,["value","min","max"])]),S("div",Ds,[Vs,f(a,{value:e.cloud.lineHeight,"onUpdate:value":l[2]||(l[2]=c=>e.cloud.lineHeight=c),min:.5,max:2.5,"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),f(r,{value:e.cloud.lineHeight,min:.5,max:2.5,decimal:2,step:.02,size:"small",class:"w-12",onChange:l[3]||(l[3]=c=>e.cloud.lineHeight=c)},null,8,["value","min","max","step"])])]),_:1},16)}}const Gs=Object.assign(Fs,{props:{cloud:{type:Object,required:!0}},setup:js}),Xe=pn.create();Xe.interceptors.response.use(e=>e.data);const Ns="https://www.gaoding.com/api/v2",qs="https://fonter.dancf.com/",Us=async e=>await Xe.get(`${Ns}/fonts`,{params:{type:"font",page_size:100,page_num:e,region_id:1,biz_code:1,endpoint:4}});async function Ws(e){return await Xe.get(`${qs}/subset`,{params:le({from_site:"gaoding",type:"woff"},e),responseType:"blob"})}async function Je(e){return new Promise((t,o)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=o,n.readAsDataURL(e)})}const Ks=e=>{if(typeof e!="string")return!1;const t="Arial";if(e.toLowerCase()==t.toLowerCase())return!0;const o="a",n=100,s=100,l=100,a=document.createElement("canvas"),r=a.getContext("2d");a.width=s,a.height=l,r.textAlign="center",r.fillStyle="black",r.textBaseline="middle";const i=c=>{r.clearRect(0,0,s,l),r.font=n+"px "+c+", "+t,r.fillText(o,s/2,l/2);const d=r.getImageData(0,0,s,l).data;return[].slice.call(d).filter(h=>h!=0)};return i(t).join("")!==i(e).join("")};function Ze(e,t){const o=document.createElement("style");return o.id=e,o.innerHTML=`@font-face { font-family: "${e}"; src: local("${e}"), url("${t}"); }`,o}function It(){const e=[];return ue.state.clouds.filter(o=>o.type===oe.text).forEach(o=>{o.fontFamily&&!e.includes(o.fontFamily)&&e.push(o.fontFamily),o.texts.forEach(n=>{n.fontFamily&&!e.includes(n.fontFamily)&&e.push(n.fontFamily)})}),e}const Pe=mn("font",{state:()=>({list:[],download:{}}),actions:{async fetch(){this.list=[];const e=hn("SKY_FONTS",[]);if(e.value.length>0&&this.list.push(...e.value),this.list.length===0){for(let t=1;t<99;t+=1){const o=await Us(t);if(this.list.push(...o),o.length<100)break}e.value=this.list}},async addFont2Style(e,t){if(this.download[e]||Ks(e))return;const n=await(await fetch(t,{headers:{responseType:"blob"}})).blob(),s=await Je(n);this.download[e]=s,document.head.appendChild(Ze(e,s))}}});function Ys(){const e=document.getSelection();let{anchorNode:t,anchorOffset:o,focusNode:n,focusOffset:s}=e;function l(){o=e.focusOffset,s=e.anchorOffset}let a=t==null?void 0:t.parentElement,r=n==null?void 0:n.parentElement;const i=a==null?void 0:a.parentElement,c=Array.from(i.children);let d=c.indexOf(a),h=c.indexOf(r);return d>h?(d=h,h=c.indexOf(a),a=r,r=t==null?void 0:t.parentElement,l()):d===h&&o>s&&l(),{selection:e,elTextContent:i,anchorEl:a,anchorElIndex:d,focusEl:r,focusElIndex:h,anchorOffset:o,focusOffset:s}}function Qe(e,t,o){const n=le({},e),s=le({},e),l=le({},e);n.text=e.text.slice(0,t),s.text=e.text.slice(t,o),l.text=e.text.slice(o);const a=[];return t!==0&&a.push(n),a.push(s),o!==e.text.length&&a.push(l),a}function et(e,t,o,n){const s=new Range;s.setStart(e,t),s.setEnd(o,n),window.getSelection().removeAllRanges(),window.getSelection().addRange(s)}function Xs(){}function we(e,t,o){return o===void 0&&(o=e[0][t]),e.some(n=>n[t]!==o)}function Mt(e,t,o){return o===void 0&&(o=e[0][t]),e.every(n=>n[t]===o)}const{toString:Js,hasOwnProperty:Zs}=Object.prototype,Qs=e=>Js.call(e).slice(8,-1),Rt=(e,t)=>Zs.call(e,t),Fe=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,9),X=e=>Qs(e)==="Number"?`${e}px`:e,el=(e,t)=>{Object.keys(e).forEach(o=>{Rt(t,o)&&(e[o]=t[o])})},tl=(e=0)=>new Promise(t=>setTimeout(t,e)),zt=(e,t)=>e.filter(o=>!t.includes(o)),nl=e=>e.filter((t,o,n)=>n.indexOf(t)===o),ol=(e,t)=>e.length===t.length&&nl([...e,...t]).length===e.length,sl=(e,t)=>e/t,ll=(e,t)=>e*t,Ie=(e,t,o)=>ll(sl(e,t),o),Tt=e=>e.metaKey||e.shiftKey||e.ctrlKey;const al={class:"body"},il={class:"bar__font"},rl=["src"],cl={class:"bar bar-tool"},ul={class:"bar bar__color","data-sky-popup":""},dl={class:"bar bar-tool","data-sky-popup":""},fl={name:"ControlPanelCloudText"};function pl(e){const t=O(),o=O(),n=ee("sky"),{targetClouds:s}=n.runtime,[l]=s,a=Pe(),r=O(!1),i=Ce({fontFamily:l.fontFamily,fontSize:l.fontSize,hasMultipleFontSize:we(s,"fontSize"),fontWeight:l.fontWeight,fontStyle:l.fontStyle,textDecoration:l.textDecoration,textAlign:l.textAlign,color:l.color,hasMultipleColor:we(s,"color"),writingMode:l.writingMode,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing});let c=n.birdVM[l.id],d=null;const h=A(()=>i.writingMode===he.v);gn(()=>{el(i,l)}),ie(()=>{w(i.fontFamily)});function v(m,u,g){const _=i[m]===u&&g!=null?g:u;i[m]=_,s.forEach(y=>{y[m]=_})}function M(m,u,g,_){const x=we(m,u,g)?g:_;i[u]=x,m.forEach(b=>{b[u]=x})}function k(m,u,g){if(!(d&&d.selection.isCollapsed)){if(s.length>1)v(m,u,g);else if(c.exposed.readonly.value)v(m,u,g),l.texts.forEach(_=>Reflect.deleteProperty(_,m));else if(d){const{elTextContent:_,anchorOffset:y,anchorEl:x,anchorElIndex:b,focusOffset:$,focusEl:z,focusElIndex:H}=d;if(x===z){const V=l.texts[b],[U]=x.childNodes;if(!d.selection.isCollapsed)if(y===0&&$===U.length)M([V],m,u,g),et(U,0,U,U.length);else{const K=Qe(V,y,$);l.texts.splice(b,1,...K);const te=[];K.length===1?te.push(...K):y===0?te.push(K[0]):te.push(K[1]),M(te,m,u,g),be(()=>{const xe=Array.from(_.children),ve=b+(y===0?0:1),[ge]=xe[ve].childNodes;et(ge,0,ge,ge.length)})}}else{const V=[];let U=l.texts[H],K=Qe(U,0,$);V.push(K[0]),l.texts.splice(H,1,...K);for(let te=b+1;te<H;te+=1)U=l.texts[te],V.push(U);U=l.texts[b],K=Qe(U,y,U.text.length),V.push(K[y===0?0:1]),l.texts.splice(b,1,...K),M(V,m,u,g),be(()=>{const te=Array.from(_.children),xe=b+(y===0?0:1),ve=xe+(H-b-1)+($===z.length?0:1),[ge]=te[xe].childNodes,[Be]=te[ve].childNodes;et(ge,0,Be,Be.length)})}}}}function w(m){const u=a.list.find(y=>y.name===m);if(!u)return;const g=o.value.querySelector(".select__font-family").querySelector(".sky-input__inner"),_={backgroundImage:`url(${u.preview.url})`,backgroundSize:"80%",backgroundPosition:"12px center",backgroundRepeat:"no-repeat"};Object.assign(g.style,_)}function E(m){k("fontFamily",m),w(m);const u=a.list.find(g=>g.name===m);a.addFont2Style(u.name,u.content.woff)}function p(){v("writingMode",h.value?he.h:he.v),s.forEach(m=>{const{width:u,height:g}=m;m.width=g,m.height=u})}return document.onselectionchange=()=>{if(c.exposed.readonly.value){d=null;return}d=Ys();const m=l.texts.slice(d.anchorElIndex,d.focusElIndex+1),[u]=m;Object.assign(i,{hasMultipleFontSize:we(m,"fontSize"),fontWeight:we(m,"fontWeight",700)?400:700,fontStyle:we(m,"fontStyle","italic")?"normal":"italic",color:u.color||l.color,hasMultipleColor:we(m,"color"),textDecoration:Mt(m,"textDecoration","underline")?"underline":Mt(m,"textDecoration","line-through")?"line-through":"none"})},(m,u)=>{const g=P("SkyOption"),_=P("SkySelect"),y=P("SkyInputNumber"),x=P("SkyTooltip"),b=P("svg-icon"),$=P("SkyButton");return I(),R("div",{ref:(z,H)=>{H.refRoot=z,o.value=z},class:"control-panel__cloud-text"},[f(Ve,{title:"\u6587\u5B57"}),S("div",al,[S("div",il,[f(_,{ref:(z,H)=>{H.refSelectFontFamily=z,t.value=z},value:C(i).fontFamily,class:"select__font-family",onChange:E},{default:T(()=>[(I(!0),R(Y,null,re(C(a).list,z=>(I(),Z(g,{key:z.id,label:z.name,value:z.name},{default:T(()=>[S("img",{src:z.preview.url,alt:""},null,8,rl)]),_:2},1032,["label","value"]))),128))]),_:1},8,["value"]),f(y,{class:"ml-2",value:Math.round(C(i).fontSize),onInput:u[0]||(u[0]=z=>k("fontSize",z)),onChange:u[1]||(u[1]=z=>k("fontSize",z))},null,8,["value"])]),S("div",cl,[f($,{plain:"",class:N({active:C(i).fontWeight===700}),onClick:u[2]||(u[2]=z=>k("fontWeight",700,400))},{default:T(()=>[f(x,{content:"\u52A0\u7C97",direction:"bottom"}),f(b,{filename:"bold"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).fontStyle==="italic"}),onClick:u[3]||(u[3]=z=>k("fontStyle","italic","normal"))},{default:T(()=>[f(x,{content:"\u659C\u4F53",direction:"bottom"}),f(b,{filename:"italic"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).textDecoration==="underline"}),onClick:u[4]||(u[4]=z=>k("textDecoration","underline","none"))},{default:T(()=>[f(x,{content:"\u4E0B\u5212\u7EBF",direction:"bottom"}),f(b,{filename:"underline"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).textDecoration==="line-through"}),onClick:u[5]||(u[5]=z=>k("textDecoration","line-through","none"))},{default:T(()=>[f(x,{content:"\u5220\u9664\u7EBF",direction:"bottom"}),f(b,{filename:"deleteline"})]),_:1},8,["class"])]),S("div",{class:N(["bar bar-tool",{vertical:C(h)}])},[f($,{plain:"",class:N({active:C(i).textAlign==="left"}),onClick:u[6]||(u[6]=z=>v("textAlign","left"))},{default:T(()=>[f(x,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(b,{filename:"text-align-left"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).textAlign==="center"}),onClick:u[7]||(u[7]=z=>v("textAlign","center"))},{default:T(()=>[f(x,{content:"\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(b,{filename:"align-center"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).textAlign==="right"}),onClick:u[8]||(u[8]=z=>v("textAlign","right"))},{default:T(()=>[f(x,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(b,{filename:"text-align-right"})]),_:1},8,["class"]),f($,{plain:"",class:N({active:C(i).textAlign==="justify"}),onClick:u[9]||(u[9]=z=>v("textAlign","justify"))},{default:T(()=>[f(x,{content:"\u4E24\u7AEF\u5BF9\u9F50",direction:"bottom"}),f(b,{filename:"align-justify"})]),_:1},8,["class"])],2),S("div",ul,[f(Et,{value:C(i).color,modes:["\u7EAF\u8272"],multiple:C(i).isMultipleColor,"onUpdate:value":u[10]||(u[10]=z=>k("color",z))},null,8,["value","multiple"])]),S("div",dl,[f($,{plain:"",class:N({active:C(h)}),onClick:p},{default:T(()=>[f(x,{content:"\u6587\u5B57\u7AD6\u7248",direction:"bottom"}),f(b,{filename:"writing-mode"})]),_:1},8,["class"]),f($,{plain:"",onClick:u[11]||(u[11]=z=>r.value=!r.value)},{default:T(()=>[f(x,{content:"\u95F4\u8DDD",direction:"bottom"}),f(b,{filename:"spacing"})]),_:1}),f(Gs,{showSpacingPopup:r.value,"onUpdate:showSpacingPopup":u[12]||(u[12]=z=>r.value=z),cloud:C(i)},null,8,["showSpacingPopup","cloud"]),f($,{plain:""},{default:T(()=>[f(x,{content:"\u6587\u5B57\u53D8\u5F62",direction:"bottom"}),f(b,{filename:"text-distortion"})]),_:1})])])],512)}}const ml=Object.assign(fl,{setup:pl});var hl=j(ml,[["__scopeId","data-v-d470a282"]]);const gl={class:"control-panel__cloud-image"},vl={class:"body"},_l=Q("\u66FF\u6362\u56FE\u7247"),yl={name:"ControlPanelCloudImage"};function bl(e){function t(){const o=document.createElement("input");o.type="file",o.click(),o.onchange=async n=>{const[s]=n.target.files;sky.runtime.targetClouds.forEach(l=>{l.src=URL.createObjectURL(s),l.mime=s.type,o.remove()})}}return(o,n)=>{const s=P("SkyButton");return I(),R("div",gl,[f(Ve,{title:"\u56FE\u7247"}),S("div",vl,[f(s,{onClick:t},{default:T(()=>[_l]),_:1})])])}}const wl=Object.assign(yl,{setup:bl});const Sl=e=>(Me("data-v-25ac132d"),e=e(),Re(),e),xl={class:"control-panel__group"},Cl={class:"body"},kl={class:"bar bar-tool mt-3"},$l=Sl(()=>S("div",{class:"h-4 w-px bg-gray-300"},null,-1)),El={name:"ControlPanelGroup"};function Il(e){const t=ee("sky"),o=A(()=>{var s;return t.runtime.targetClouds.length===1&&((s=t.runtime.targetClouds[0])==null?void 0:s.type)==="clouds"});function n(){o.value?t.cloud.unGroup():t.cloud.toGroup()}return(s,l)=>{const a=P("SkyButton"),r=P("SkyTooltip"),i=P("svg-icon");return I(),R("div",xl,[f(Ve,{title:"\u7EC4\u5408"}),S("div",Cl,[f(a,{class:"button__group",onClick:n},{default:T(()=>[Q(pe(C(o)?"\u62C6\u5206":"\u6210")+"\u7EC4 ",1)]),_:1}),S("div",kl,[f(a,{plain:"",onClick:s.$sky.cloud.alignTop},{default:T(()=>[f(r,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-top"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:s.$sky.cloud.alignVerticalMiddle},{default:T(()=>[f(r,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:s.$sky.cloud.alignBottom},{default:T(()=>[f(r,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-bottom"})]),_:1},8,["onClick"]),$l,f(a,{plain:"",onClick:s.$sky.cloud.alignLeft},{default:T(()=>[f(r,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-left"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:s.$sky.cloud.alignHorizontalMiddle},{default:T(()=>[f(r,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:s.$sky.cloud.alignRight},{default:T(()=>[f(r,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(i,{filename:"align-right"})]),_:1},8,["onClick"])])])])}}const Ml=Object.assign(El,{setup:Il});var Pt=j(Ml,[["__scopeId","data-v-25ac132d"]]);const tt=e=>(Me("data-v-89f53d88"),e=e(),Re(),e),Rl={class:"control-panel__default"},zl={class:"body"},Tl={class:"panel-label"},Pl=tt(()=>S("span",null,"\u753B\u5E03\u5C3A\u5BF8",-1)),Bl=Q("\u7F16\u8F91"),Ol={class:"size"},Al=Q("\u5BBD"),Ll=tt(()=>S("i",{class:"w-2"},null,-1)),Hl=Q("\u9AD8"),Dl=tt(()=>S("div",{class:"panel-label"},[S("span",null,"\u753B\u5E03\u80CC\u666F")],-1)),Vl=Q("\u4E0A\u4F20\u80CC\u666F\u56FE"),Fl={name:"ControlPanelDefault"};function jl(e){const t=ee("sky"),o=O("\u989C\u8272"),n=O(!1),s=A(()=>`${parseInt(t.state.width/t.state.scale)}px`),l=A(()=>`${parseInt(t.state.height/t.state.scale)}px`),a=A({get(){return t.state.background.color},set(r){t.state.background.color=r}});return(r,i)=>{const c=P("SkyButton"),d=P("SkyInput"),h=P("SkyTabPanel"),v=P("SkyTabs"),M=P("SkyDialog");return I(),R("div",Rl,[f(Ve,{title:"\u753B\u5E03"}),S("div",zl,[S("div",Tl,[Pl,f(c,{size:"small",plain:""},{default:T(()=>[Bl]),_:1})]),S("div",Ol,[f(d,{value:C(s),readonly:""},{append:T(()=>[Al]),_:1},8,["value"]),Ll,f(d,{value:C(l),readonly:""},{append:T(()=>[Hl]),_:1},8,["value"])]),Dl,f(v,{value:o.value,"onUpdate:value":i[2]||(i[2]=k=>o.value=k),class:"bg-tabs","data-sky-popup":""},{default:T(()=>[f(h,{class:"bar bar__color",label:"\u989C\u8272"},{default:T(()=>[f(Et,{value:C(a),"onUpdate:value":i[0]||(i[0]=k=>vn(a)?a.value=k:null),"default-color":"#ffffff00",modes:["\u7EAF\u8272","\u6E10\u53D8"]},null,8,["value"])]),_:1}),f(h,{label:"\u56FE\u7247"},{default:T(()=>[f(c,{style:{height:"40px"},onClick:i[1]||(i[1]=k=>n.value=!0)},{default:T(()=>[Vl]),_:1})]),_:1})]),_:1},8,["value"])]),f(M,{visible:n.value,"onUpdate:visible":i[3]||(i[3]=k=>n.value=k)},null,8,["visible"])])}}const Gl=Object.assign(Fl,{setup:jl});var Nl=j(Gl,[["__scopeId","data-v-89f53d88"]]);const nt=e=>(Me("data-v-5dc12464"),e=e(),Re(),e),ql=nt(()=>S("div",{class:"title"},"\u753B\u5E03\u5BF9\u9F50",-1)),Ul={class:"flex justify-between items-center"},Wl=nt(()=>S("div",{class:"h-4 w-px bg-gray-300"},null,-1)),Kl=nt(()=>S("div",{class:"title mt-3"},"\u56FE\u5C42\u987A\u5E8F",-1)),Yl={class:"flex justify-between items-center"},Xl={class:"relative"},Jl={class:"layer-step"},Zl={name:"PopupLayer"};function Ql(e){const t=e,o=ee("sky"),n=O(0),s=O([]),l=A(()=>s.value.length),a=A(()=>l.value===0?0:l.value-1);me(()=>t.visible,d=>{if(!d)return;const h=o.cloud.getOverlappingClouds4Cloud(),[v,...M]=o.runtime.targetClouds;s.value=h.filter(k=>!M.includes(k)),n.value=s.value.findIndex(k=>k.id===v.id)});function r(d){d>n.value?o.cloud.moveUp():o.cloud.moveDown(),n.value=d}function i(){n.value<=0||r(n.value-1)}function c(){n.value>=a||r(n.value+1)}return(d,h)=>{const v=P("SkyTooltip"),M=P("svg-icon"),k=P("SkyButton"),w=P("SvgIcon"),E=P("SkySlider"),p=P("SkyPopup");return I(),Z(p,ae({class:"popup__layer",width:240,visible:e.visible},d.$attrs),{default:T(()=>[ql,S("div",Ul,[f(k,{plain:"",onClick:d.$sky.cloud.alignEditorTop},{default:T(()=>[f(v,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-top"})]),_:1},8,["onClick"]),f(k,{plain:"",onClick:d.$sky.cloud.alignEditorVerticalMiddle},{default:T(()=>[f(v,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),f(k,{plain:"",onClick:d.$sky.cloud.alignEditorBottom},{default:T(()=>[f(v,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-bottom"})]),_:1},8,["onClick"]),Wl,f(k,{plain:"",onClick:d.$sky.cloud.alignEditorLeft},{default:T(()=>[f(v,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-left"})]),_:1},8,["onClick"]),f(k,{plain:"",onClick:d.$sky.cloud.alignEditorHorizontalMiddle},{default:T(()=>[f(v,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),f(k,{plain:"",onClick:d.$sky.cloud.alignEditorRight},{default:T(()=>[f(v,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(M,{filename:"align-right"})]),_:1},8,["onClick"])]),Kl,S("div",Yl,[f(w,{filename:"layer-down",onClick:i}),S("div",Xl,[ke(S("div",Jl,[(I(!0),R(Y,null,re(C(a),m=>(I(),R("div",{key:m,style:F({left:`${m/C(a)*100}%`}),class:"absolute w-px h-full bg-gray-400"},null,4))),128))],512),[[$e,C(l)>1]]),f(E,{value:n.value,max:C(a),step:1,disabled:C(a)===0,"show-tooltip":!1,class:"w-36",onInput:r},null,8,["value","max","disabled"])]),f(w,{filename:"layer-up",onClick:c})])]),_:1},16,["visible"])}}const ea=Object.assign(Zl,{props:{visible:{type:Boolean,default:!1}},setup:Ql});var ta=j(ea,[["__scopeId","data-v-5dc12464"]]);const na={class:"control-panel__container"},oa={key:0,class:"py-4 border-t mx-4"},sa={class:"bar mb-3"},la=S("img",{src:"https://cdn.dancf.com/design/img/fill_opacity.f6330ad5.svg"},null,-1),aa={class:"bar bar-tool","data-sky-popup":""},ia={name:"ControlPanelContainer"};function ra(e){const t=ee("sky"),o={[oe.text]:hl,[oe.image]:wl},n=O(!1),s=A(()=>{var M;return(M=t.runtime.targetClouds[0])!=null?M:{}}),l=A(()=>t.runtime.targetClouds.length===0?Nl:t.runtime.targetClouds.length>1||s.value.type==="clouds"?Pt:o[s.value.type]),a=A(()=>t.runtime.targetClouds.length===0?"default":t.runtime.targetClouds.length>1?"group":t.runtime.targetClouds[0].id),r=A(()=>a.value==="default"),i=A(()=>t.runtime.targetClouds.length===1&&!t.cloud.isCloudsObject(s.value));function c(M){s.value.opacity=Ee(M/100,{decimal:2})}function d(){s.value.lock?t.cloud.unlock():t.cloud.lock()}function h(){t.cloud.copy(),t.cloud.paste()}function v(){t.cloud.delete()}return(M,k)=>{const w=P("SkySlider"),E=P("SkyInputNumber"),p=P("SkyTooltip"),m=P("svg-icon"),u=P("SkyButton");return I(),R("div",na,[(I(),Z(qe(C(l)),{key:C(a)})),C(r)?ye("",!0):(I(),R("div",oa,[ke(S("div",sa,[la,f(w,{value:C(s).opacity,"onUpdate:value":k[0]||(k[0]=g=>C(s).opacity=g),min:0,max:1,"show-tooltip":!1,class:"w-28"},null,8,["value"]),f(E,{value:Math.round(C(s).opacity*100),min:0,max:100,size:"small",class:"w-12",onChange:c},null,8,["value"])],512),[[$e,C(i)]]),S("div",aa,[f(u,{plain:"",onClick:d},{default:T(()=>[f(p,{content:C(s).lock?"\u89E3\u9501":"\u9501\u5B9A"},null,8,["content"]),f(m,{filename:C(s).lock?"locked":"unlock"},null,8,["filename"])]),_:1}),f(u,{plain:"",disabled:C(s).lock,onPointerdown:k[1]||(k[1]=He(g=>n.value=!n.value,["stop"]))},{default:T(()=>[f(p,{content:"\u56FE\u5C42\u987A\u5E8F"}),f(m,{filename:"layer"})]),_:1},8,["disabled"]),f(ta,{visible:n.value,"onUpdate:visible":k[2]||(k[2]=g=>n.value=g)},null,8,["visible"]),f(u,{plain:"",disabled:C(s).lock,onClick:h},{default:T(()=>[f(p,{content:"\u590D\u5236",disabled:C(s).lock},null,8,["disabled"]),f(m,{filename:"copy"})]),_:1},8,["disabled"]),f(u,{plain:"",disabled:C(s).lock,onClick:v},{default:T(()=>[f(p,{content:"\u5220\u9664",disabled:C(s).lock},null,8,["disabled"]),f(m,{filename:"trash"})]),_:1},8,["disabled"])])]))])}}const ca=Object.assign(ia,{setup:ra}),ua=e=>e.classList.contains("sky-cloud"),da=e=>{var t;return!((t=e.parentElement)==null?void 0:t.classList.contains("sky-renderer"))},ot=e=>e.classList.contains("sky-background"),fa=e=>e.classList.contains("sky-cloud-lock"),Bt=e=>{for(;e&&!e.dataset.cloudId&&!ua(e);)e=e.parentElement;return e},st=e=>(e=Bt(e),e&&(da(e)&&e.parentElement?st(e.parentElement):e));const pa={name:"SkyEditor"};function ma(e,{expose:t}){const o=ee("sky");o.vm=ze();const n=O(null),s=O(null);let l=null,a=null,r=!1;const i=A(()=>({width:`${o.state.width}px`,height:`${o.state.height}px`}));ie(()=>{o.moveable.createInstance(n.value)}),me([()=>o.state.clouds,()=>o.state.background],()=>{o.history.unshift()},{immediate:!0,deep:!0});async function c(){r=!0;const[v]=a;!v||ot(v)||fa(v)||(await o.moveable.setTarget(a),o.moveable.instance.dragStart(l))}async function d(v){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),r?r=!1:(await o.moveable.setTarget(a),o.cloud.setSelectCloud(v)),l=null,a=null}function h(v){l=v,a=o.moveable.getTarget(v),document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}return t({elSkyRenderer:s}),(v,M)=>{const k=P("SkyRenderer"),w=P("ControlPanelContainer");return I(),R("div",{ref:(E,p)=>{p.elRoot=E,n.value=E},class:"sky-editor",style:F(C(i))},[f(k,{ref:(E,p)=>{p.elSkyRenderer=E,s.value=E},background:C(o).state.background,clouds:C(o).state.clouds,scale:C(o).state.scale,onMousedown:h},null,8,["background","clouds","scale"]),f(w,{class:"sky-control-panel"})],4)}}const ha=Object.assign(pa,{setup:ma});var Ot=j(ha,[["__scopeId","data-v-39c16d44"]]);const At="sky-cloud-lock",ga=["nw","ne","sw","se"],Lt=e=>({width:X(e.width),height:X(e.height),top:X(e.top),left:X(e.left),transform:e.transform}),va=["data-cloud-id","data-cloud-type"],_a=S("i",{class:"border-before"},null,-1),ya={name:"Cloud",inheritAttrs:!1};function ba(e){const t=e,o=ee("sky"),n=ee("SkyCloudComponents"),s=O(),l=O(),a=A(()=>({opacity:t.cloud.opacity}));ie(()=>{const c=ze();o.cloudVM[t.cloud.id]=c,o.birdVM[t.cloud.id]=c.subTree.children[0].component,Object.assign(s.value.style,Lt(t.cloud))}),Le(()=>{Reflect.deleteProperty(o.cloudVM,t.cloud.id),Reflect.deleteProperty(o.birdVM,t.cloud.id)});function r(c){return{[At]:c.lock}}function i(c){return n[c]}return(c,d)=>(I(),R("div",{ref:(h,v)=>{v.elRoot=h,s.value=h},class:N(["sky-cloud",r(e.cloud)]),style:F(C(a)),"data-cloud-id":e.cloud.id,"data-cloud-type":e.cloud.type},[(I(),Z(qe(i(e.cloud.type)),ae({ref:(h,v)=>{v.elCloud=h,l.value=h},cloud:e.cloud,class:"sky-bird"},c.$attrs),null,16,["cloud"])),_a],14,va))}const Ht=Object.assign(ya,{props:{cloud:{type:Object,require:!0,default:()=>({})}},setup:ba}),wa=["data-cloud-id"],Sa=S("i",{class:"border-before"},null,-1),xa={name:"Clouds",inheritAttrs:!1};function Ca(e){const t=e,o=ee("sky"),n=O();ie(()=>{const l=ze();o.cloudVM[t.cloud.id]=l,o.birdVM[t.cloud.id]=l,Object.assign(n.value.style,Lt(t.cloud))}),Le(()=>{Reflect.deleteProperty(o.cloudVM,t.cloud.id),Reflect.deleteProperty(o.birdVM,t.cloud.id)});function s(l){return{[At]:l.lock}}return(l,a)=>{const r=P("Clouds",!0);return I(),R("div",{ref:(i,c)=>{c.elRoot=i,n.value=i},class:N([s(e.cloud),"sky-cloud sky-clouds sky-bird"]),"data-cloud-id":e.cloud.id},[S("div",null,[(I(!0),R(Y,null,re(e.cloud.clouds,i=>(I(),R(Y,{key:i.id},[i.type==="clouds"?(I(),Z(r,ae({key:0,cloud:i},l.$attrs),null,16,["cloud"])):(I(),Z(Ht,ae({key:1,cloud:i},l.$attrs),null,16,["cloud"]))],64))),128))]),Sa],10,wa)}}const ka=Object.assign(xa,{props:{cloud:{type:Object,required:!0}},setup:Ca}),$a={name:"SkyRenderer",inheritAttrs:!1};function Ea(e){const t=e,o=A(()=>({width:`${sky.state.width}px`,height:`${sky.state.height}px`})),n=A(()=>{var l;return{background:t.background.color,opacity:(l=t.background.opacity)!=null?l:1}});function s(l){return l.type==="clouds"?ka:Ht}return(l,a)=>(I(),R("div",{class:"sky-renderer",style:F(C(o))},[S("div",{class:"sky-background",style:F(C(n))},null,4),(I(!0),R(Y,null,re(e.clouds,r=>(I(),Z(qe(s(r)),ae({key:r.id,cloud:r},l.$attrs),null,16,["cloud"]))),128))],4))}const Dt=Object.assign($a,{props:{background:{type:Object,required:!0},clouds:{type:Array,default:()=>[]}},setup:Ea}),Ia={install(e,t){e.component(Dt.name,Dt),e.provide("SkyCloudComponents",t)}};function Ma(e){const t={};return t.setBackground=o=>{Object.assign(e.state.background,o)},t.zoom=(o=1)=>{if(o===0||o===e.state.scale)return;const n=s=>{s.forEach(async l=>{const a=Ie(l.width,e.state.scale,o),r=Ie(l.height,e.state.scale,o),i=Ie(l.top,e.state.scale,o),c=Ie(l.left,e.state.scale,o);l.width=a,l.height=r,l.top=i,l.left=c,l.clouds&&l.clouds.length>0&&n(l.clouds)})};n(e.state.clouds),e.cloud.updateCloudsElementRect(e.state.clouds),e.state.width=Ie(e.state.width,e.state.scale,o),e.state.height=Ie(e.state.height,e.state.scale,o),setTimeout(e.moveable.instance.updateRect)},t}function Ra(e){const t={};t.getClouds=()=>{const{scale:n,clouds:s}=e.state,l=JSON.parse(JSON.stringify(s)),a=r=>{r.forEach(i=>{i.top=i.top/n,i.left=i.left/n,i.width=i.width/n,i.height=i.height/n,i.clouds&&i.clouds.length>0&&a(i.clouds)})};return a(l),l},t.getOverlappingClouds4Point=n=>{const{clientX:s,clientY:l}=n,a=r=>{const i=e.cloud.queryCloudElementById(r.id),c=i==null?void 0:i.getBoundingClientRect();if(!c)return!1;const d=s>=c.left&&s<=c.right,h=l>=c.top&&l<=c.bottom;return d&&h};return e.state.clouds.filter(a)},t.updateCloudsElementRect=(n=e.runtime.targetClouds)=>{n.forEach(s=>{const l=e.cloud.queryCloudElementById(s.id);!l||(l.style.top=X(s.top),l.style.left=X(s.left),l.style.width=X(s.width),l.style.height=X(s.height),e.moveable.instance.updateTarget(),s.clouds&&s.clouds.length>0&&t.updateCloudsElementRect(s.clouds))}),e.moveable.instance.updateRect()},t.getOverlappingClouds4Cloud=()=>{const n=e.moveable.instance.getRect(),s=n.left,l=n.left+n.width,a=n.top,r=n.top+n.height,i=h=>h>=s&&h<=l,c=h=>h>=a&&h<=r,d=(h,v)=>i(h)&&c(v);return e.state.clouds.filter(({top:h,left:v,width:M,height:k})=>{const w=v,E=v+M,p=h,m=h+k;return d(w,p)||d(E,p)||d(w,m)||d(E,m)||p<a&&m>r&&i(w)||w<s&&E>l&&c(p)})},t.findCloudById=(n,s=e.state.clouds)=>{if(!n)return;let l=s.find(a=>a.id===n);if(l)return l;for(let a=0;a<s.length;a+=1)if(Array.isArray(s[a].clouds)&&(l=t.findCloudById(n,s[a].clouds),l))return l},t.findCloudByElement=n=>{const s=st(n);if(!!s)return t.findCloudById(s.dataset.cloudId)},t.queryCloudElementById=n=>e.vm.subTree.el.querySelector(`[data-cloud-id="${n}"]`);const o=n=>{if(!n)return null;const[s]=e.runtime.targetClouds;if(!s||!t.isCloudsObject(s)||Tt(n))return null;const l=Bt(n.target);if(!l)return null;const a=t.findCloudById(l.dataset.cloudId,s.clouds);return(a==null?void 0:a.pid)?a:null};return t.setSelectCloud=n=>{var a,r,i,c,d,h,v,M,k,w,E;const s=o(n),l=e.runtime.selectCloud;l!==s&&(e.runtime.selectCloud=s,(a=e.vm.subTree.el.querySelector(".sky-cloud-select"))==null||a.classList.remove("sky-cloud-select"),l&&((h=(d=(c=(i=(r=e.cloudVM[l.id])==null?void 0:r.exposed)==null?void 0:i.skyHooks)==null?void 0:c.moveable)==null?void 0:d.onLeaveSelect)==null||h.call(d)),s&&((v=e.cloud.queryCloudElementById(s.id))==null||v.classList.add("sky-cloud-select"),(E=(w=(k=(M=e.cloudVM[s.id].exposed)==null?void 0:M.skyHooks)==null?void 0:k.moveable)==null?void 0:w.onEnterSelect)==null||E.call(w)))},t.create=n=>{var s,l;return n=JSON.parse(JSON.stringify(n)),Object.assign({pid:"",width:100,height:100,top:e.state.height/2-((s=n==null?void 0:n.height)!=null?s:0/2),left:e.state.width/2-((l=n==null?void 0:n.width)!=null?l:0/2),angle:0,lock:!1,opacity:1,transform:""},n,{id:Fe()})},t.push=async(...n)=>{e.state.clouds.push(...n),await tl(),await e.moveable.setTarget(n.map(s=>e.cloud.queryCloudElementById(s.id)))},t.lock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!0}),e.moveable.updateState())},t.unlock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!1}),e.moveable.updateState())},t.delete=async({force:n=!1}={})=>{if(e.runtime.targetClouds.length===0)return;const[s]=e.runtime.targetClouds;if(s.lock&&!n)return;const l=e.runtime.targetClouds.map(a=>a.id);await e.moveable.setTarget([]),l.forEach(a=>{const r=e.state.clouds.findIndex(i=>i.id===a);e.state.clouds.splice(r,1)})},t.copy=()=>{if(e.runtime.targetClouds.length!==0)return e.runtime.clipboard=JSON.stringify(e.runtime.targetClouds),e.runtime.clipboard},t.paste=async()=>{if(!e.runtime.clipboard)return;const n=i=>{var c;(c=i.clouds)==null||c.forEach(d=>{d.pid=i.id,d.id=Fe(),t.isCloudsObject(d)&&n(d)})},s=JSON.parse(e.runtime.clipboard),l={top:Math.min(...s.map(i=>i.top)),left:Math.min(...s.map(i=>i.left))},a=e.runtime.targetClouds.length>0?e.moveable.instance.getRect():l,r={top:a.top-l.top,left:a.left-l.left};s.forEach(i=>{i.id=Fe(),i.top+=r.top+10,i.left+=r.left+10,t.isCloudsObject(i)&&n(i)}),await t.push(...s),t.copy()},t.cut=()=>{!t.copy()||t.delete()},t.toGroup=async()=>{const{top:n,left:s,width:l,height:a}=e.moveable.instance.getRect(),r=[...e.runtime.targetClouds],i=Fe();await t.delete({force:!0}),r.forEach(c=>{c.pid=i,c.top=c.top-n,c.left=c.left-s}),await t.push({id:i,top:n,left:s,width:l,height:a,clouds:r,pid:"",type:"clouds",lock:!1,transform:""})},t.unGroup=async()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const{clouds:s,top:l,left:a}=n[0];!s||(await t.delete({force:!0}),s.forEach(r=>{r.pid="",r.top=r.top+l,r.left=r.left+a}),t.push(...s))},t.moveTop=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;n.push(...s),s.forEach(l=>{const a=n.findIndex(r=>r.id===l.id);n.splice(a,1)})},t.moveUp=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s.slice(-1),a=t.getOverlappingClouds4Cloud(),r=a.findIndex(d=>d.id===l.id);let i;r+1>=a.length?i=l:i=a[r+1];const c=n.findIndex(d=>d.id===i.id);n.splice(c+1,0,...s),s.forEach(d=>{const h=n.findIndex(v=>v.id===d.id);n.splice(h,1)})},t.moveDown=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s,a=t.getOverlappingClouds4Cloud(),r=a.findIndex(d=>d.id===l.id);let i;r===0?i=l:i=a[r-1];const c=n.findIndex(d=>d.id===i.id);s.forEach(d=>{const h=n.findIndex(v=>v.id===d.id);n.splice(h,1)}),n.splice(c,0,...s)},t.moveBottom=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;s.reverse().forEach(l=>{const a=n.findIndex(r=>r.id===l.id);n.splice(a,1)}),n.unshift(...s.reverse())},t.isCloudsObject=n=>n.type==="clouds"&&Reflect.has(n,"clouds"),t.alignTop=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.top));n.forEach(l=>{l.top=s}),e.cloud.updateCloudsElementRect()},t.alignVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(r=>r.top)),l=Math.max(...n.map(r=>r.top+r.height)),a=s+(l-s)/2;n.forEach(r=>{r.top=a-r.height/2}),e.cloud.updateCloudsElementRect()},t.alignBottom=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.top+l.height));n.forEach(l=>{l.top=s-l.height}),e.cloud.updateCloudsElementRect()},t.alignHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(r=>r.left)),l=Math.max(...n.map(r=>r.left+r.width)),a=s+(l-s)/2;n.forEach(r=>{r.left=a-r.width/2}),e.cloud.updateCloudsElementRect()},t.alignLeft=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.left));n.forEach(l=>{l.left=s}),e.cloud.updateCloudsElementRect()},t.alignRight=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.left+l.width));n.forEach(l=>{l.left=s-l.width}),e.cloud.updateCloudsElementRect()},t.alignEditorTop=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=0}),e.cloud.updateCloudsElementRect())},t.alignEditorVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.height/2;n.forEach(l=>{l.top=s-l.height/2}),e.cloud.updateCloudsElementRect()},t.alignEditorBottom=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=e.state.height-s.height}),e.cloud.updateCloudsElementRect())},t.alignEditorLeft=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=0}),e.cloud.updateCloudsElementRect())},t.alignEditorHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.width/2;n.forEach(l=>{l.left=s-l.width/2}),e.cloud.updateCloudsElementRect()},t.alignEditorRight=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=e.state.width-s.width}),e.cloud.updateCloudsElementRect())},t}const za=(e=0)=>new Promise(t=>setTimeout(t,e)),Ta={"-1,-1":"nw","0,-1":"n","1,-1":"ne","1,0":"e","1,1":"se","0,1":"s","-1,1":"sw","-1,0":"w"},Pa=["n","nw","ne","s","se","sw","e","w"],Ba=e=>{const{top:t,left:o,width:n,height:s}=e,l=o+n,a=t+s;return{pos1:[o,t],pos2:[l,t],pos3:[o,a],pos4:[l,a]}};function Oa(e){const t={};t.updateState=async()=>{var g,_,y,x,b;const{target:w}=t.instance;if(!Array.isArray(w)||w.length===0)return;const[E]=w,p=e.cloud.findCloudById(E.dataset.cloudId),m=p?!p.lock:!1;t.instance.draggable=m,t.instance.resizable=m,t.instance.rotatable=m,t.instance.origin=m,p?(w.length>1?t.instance.renderDirections=ga:t.instance.renderDirections=(b=(x=(y=(_=(g=e.birdVM[E.dataset.cloudId])==null?void 0:g.exposed)==null?void 0:_.skyHooks)==null?void 0:y.moveable)==null?void 0:x.renderDirections)!=null?b:Pa,t.instance.passDragArea=!m):t.instance.passDragArea=!0;const u=[];(p==null?void 0:p.lock)&&u.push("lock"),t.instance.className=u.join(" ")},t.getTarget=w=>{const{target:E}=t.instance;if(!Array.isArray(E))return[];let p=[...E];const m=ot(w.target);let u=null;if(m)u=w.target;else if(u=st(w.target),!u)return[];if(Tt(w)){if(m)return E;if(ot(E[0])&&u)return[u];const g=e.cloud.findCloudByElement(w.target);if(!g)return[];if(g.lock||e.runtime.targetClouds[0].lock)return E;const _=p.findIndex(y=>y===u);_<0?p.push(u):p.splice(_,1)}else p=[u];return p},t.setTarget=async w=>{const E=t.instance.target;if(w){if(!Array.isArray(E)||ol(w,E))return;t.instance.target=w,await za();const p=w.map(g=>e.cloud.findCloudById(g.dataset.cloudId));e.runtime.targetClouds=e.state.clouds.filter(g=>p.includes(g)),e.cloud.setSelectCloud(null),zt(E,w).forEach(g=>{var y,x,b,$;const _=e.birdVM[g.dataset.cloudId];($=(b=(x=(y=_==null?void 0:_.exposed)==null?void 0:y.skyHooks)==null?void 0:x.moveable)==null?void 0:b.onLeaveTarget)==null||$.call(b)}),zt(w,E).forEach(g=>{var y,x,b,$;const _=e.birdVM[g.dataset.cloudId];($=(b=(x=(y=_==null?void 0:_.exposed)==null?void 0:y.skyHooks)==null?void 0:x.moveable)==null?void 0:b.onEnterTarget)==null||$.call(b)}),e.state.clouds.forEach(g=>{var y,x,b,$;const _=e.birdVM[g.id];($=(b=(x=(y=_==null?void 0:_.exposed)==null?void 0:y.skyHooks)==null?void 0:x.moveable)==null?void 0:b.onChangeTarget)==null||$.call(b)})}else{if(t.instance.target=[],!Array.isArray(E))return;E.forEach(p=>{var u,g,_,y;const m=e.birdVM[p.dataset.cloudId];(y=(_=(g=(u=m==null?void 0:m.exposed)==null?void 0:u.skyHooks)==null?void 0:g.moveable)==null?void 0:_.onLeaveTarget)==null||y.call(_)})}t.updateState()};const o=()=>{const{target:w}=t.instance;if(!Array.isArray(w))return;const E=t.instance.getRect(),p={pos1:E.pos1,pos2:E.pos2,pos3:E.pos3,pos4:E.pos4},m=[];e.state.clouds.forEach(u=>{if(w.findIndex(b=>b.dataset.cloudId===u.id)>=0)return;const _=Ba(u),y=[];Object.values(p).forEach(b=>{Object.values(_).forEach($=>{const z=Math.abs(b[0]-$[0]),H=Math.abs(b[1]-$[1]);y.push(Math.sqrt(z*z+H*H))})});const x=Math.min(...y);Rt(u,"minDistance")?u.minDistance=x:Object.defineProperty(u,"minDistance",{value:x,writable:!0}),m.push(u)}),m.sort((u,g)=>u.minDistance-g.minDistance),t.instance.elementGuidelines=m.slice(0,5).map(u=>e.cloud.queryCloudElementById(u.id))},n=w=>{const{target:E,top:p,left:m}=w;E.style.top=X(p),E.style.left=X(m);const u=e.state.clouds.find(g=>g.id===E.dataset.cloudId);u.top=p,u.left=m,o()},s=w=>{w.events.forEach(n)},l=w=>{var g,_,y,x,b,$,z,H,V,U;const{target:E,datas:p,direction:m}=w,u=e.cloud.findCloudById(E.dataset.cloudId);!u||(p.targetCloud=u,p.startTop=u.top,p.startLeft=u.left,p.startWidth=u.width,p.startHeight=u.height,p.isClouds=e.cloud.isCloudsObject(u),p.birdVM=e.birdVM[u.id],t.instance.keepRatio=(b=(x=(y=(_=(g=p.birdVM)==null?void 0:g.exposed)==null?void 0:_.skyHooks)==null?void 0:y.moveable)==null?void 0:x.keepRatio)==null?void 0:b.includes(Reflect.get(Ta,m.join())),(U=(V=(H=(z=($=p.birdVM)==null?void 0:$.exposed)==null?void 0:z.skyHooks)==null?void 0:H.moveable)==null?void 0:V.onResizeStart)==null||U.call(V,w))},a=w=>{var _,y,x,b,$;const{target:E,width:p,height:m,drag:u,datas:g}=w;g.scale=[p/g.startWidth,m/g.startHeight],E.style.width=X(p),E.style.height=X(m),g.targetCloud.width=p,g.targetCloud.height=m,g.isClouds&&(E.firstElementChild.style.transform=`scale(${g.scale[0]}, ${g.scale[1]})`,E.firstElementChild.style.transformOrigin="left top"),($=(b=(x=(y=(_=g.birdVM)==null?void 0:_.exposed)==null?void 0:y.skyHooks)==null?void 0:x.moveable)==null?void 0:b.onResize)==null||$.call(b,w),n(u)},r=w=>{var u,g,_,y,x;const{target:E,datas:p}=w,m=b=>{b.forEach($=>{var H,V,U;$.top=$.top*p.scale[1],$.left=$.left*p.scale[0],$.width=$.width*p.scale[0],$.height=$.height*p.scale[1];const z=e.cloud.queryCloudElementById($.id);if(!!z)if(z.style.top=X($.top),z.style.left=X($.left),z.style.width=X($.width),z.style.height=X($.height),$.clouds)m($.clouds);else{const K=e.birdVM[$.id];(U=(V=(H=K==null?void 0:K.exposed)==null?void 0:H.moveable)==null?void 0:V.onResizeEndInGroup)==null||U.call(V,w)}})};p.isClouds&&(E.firstElementChild.style.transform="",E.firstElementChild.style.transformOrigin="",m(p.targetCloud.clouds)),(x=(y=(_=(g=(u=p.birdVM)==null?void 0:u.exposed)==null?void 0:g.skyHooks)==null?void 0:_.moveable)==null?void 0:y.onResizeEnd)==null||x.call(y,w)},i=w=>{w.events.forEach(l),e.moveable.instance.keepRatio=!0},c=w=>{w.events.forEach(a)},d=w=>{const{target:E,drag:p,absoluteRotate:m}=w;E.style.transform=p.transform;const u=e.state.clouds.find(g=>g.id===E.dataset.cloudId);!u||(u.transform=p.transform,u.rotate=m)},h=w=>{w.events.forEach(d)},v=()=>{e.history.disable=!0},M=w=>{e.history.disable=!1,!!w.isDrag&&e.history.unshift()},k=w=>{var m,u,g,_;const E=t.getTarget(w.inputEvent);t.setTarget(E),e.cloud.setSelectCloud(w.inputEvent);const p=e.birdVM[w.target.dataset.cloudId];(_=(g=(u=(m=p==null?void 0:p.exposed)==null?void 0:m.skyHooks)==null?void 0:u.moveable)==null?void 0:g.onClick)==null||_.call(g,w.inputEvent)};return t.createInstance=w=>{window.moveableInstance=t.instance=new _n(w,{target:[],snappable:!0,snapCenter:!0,dragArea:!0,horizontalGuidelines:[0,w.offsetWidth],verticalGuidelines:[0,w.offsetHeight]}),t.instance.on("drag",n),t.instance.on("dragGroup",s),t.instance.on("resizeStart",l),t.instance.on("resize",a),t.instance.on("resizeEnd",r),t.instance.on("resizeGroupStart",i),t.instance.on("resizeGroup",c),t.instance.on("rotate",d),t.instance.on("rotateGroup",h),t.instance.on("renderStart",v),t.instance.on("renderEnd",M),t.instance.on("renderGroupStart",v),t.instance.on("renderGroupEnd",M),t.instance.on("click",k),t.instance.on("clickGroup",k),t.updateState()},t}function Aa(e){const t={instance:null};let o=!1;const n=async()=>{o=!0,await e.moveable.setTarget([])},s=async()=>{o||await e.moveable.setTarget([]),o=!1},l=i=>{const c=document.querySelector(".moveable-control-box"),d=document.querySelector(".sky-control-panel");if((c==null?void 0:c.contains(i.inputEvent.target))||(d==null?void 0:d.contains(i.inputEvent.target)))return i.stop();document.addEventListener("mousemove",n,{once:!0}),document.addEventListener("mouseup",s,{once:!0})},a=async i=>{await e.moveable.setTarget([...i.selected])},r=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mousemove",s)};return t.createInstance=i=>{t.instance=new yn({container:i,selectableTargets:[".sky-cloud"],selectByClick:!1,selectFromInside:!1,hitRate:0,getElementRect:bn}),t.instance.on("dragStart",l),t.instance.on("select",a),t.instance.on("selectEnd",r)},new Proxy(t,{get(i,c){return Reflect.has(i,c)?Reflect.get(i,c):Reflect.get(t.instance,c)},set(i,c,d){return Reflect.has(i,c)?Reflect.set(i,c,d):Reflect.set(i.instance,c,d),!0}})}let Vt;function La(e){const t={stacks:[],pointer:0,disable:!1,delay:500},o=n=>{t.pointer=n;const s=JSON.parse(t.stacks[n]);!s||(t.disable=!0,e.state.scale=s.scale,e.state.clouds=s.clouds,e.editor.setBackground(s.background),setTimeout(async()=>{const l=s.targetClouds.map(a=>e.cloud.queryCloudElementById(a.id));await e.moveable.setTarget(l),e.cloud.updateCloudsElementRect(s.clouds),e.moveable.instance.updateRect(),t.disable=!1}))};return t.unshift=()=>{t.disable||(clearTimeout(Vt),Vt=setTimeout(()=>{t.pointer>0&&t.stacks.splice(0,t.pointer),t.stacks.unshift(JSON.stringify(e.state)),t.pointer>0&&(t.pointer=0);const{maxHistoryStack:n}=e.options;n&&t.stacks.length>n&&t.stacks.pop()},t.delay))},t.back=()=>{const n=t.pointer+1;n>=t.stacks.length||o(n)},t.forward=()=>{const n=t.pointer-1;n<0||o(n)},t}function Ha(e){var o;e=le({maxHistoryStack:20},e);const t={options:e,vm:null,cloudVM:{},birdVM:{}};return t.state={width:800,height:800,scale:1,background:{color:"#ffffff00",opacity:1},clouds:[]},t.runtime={targetClouds:[],selectCloud:null,clipboard:""},t.editor=Ma(t),t.cloud=Ra(t),t.moveable=Oa(t),t.selecto=Aa(t),t.history=La(t),t.setState=async n=>{Reflect.has(n,"width")&&(t.moveable.instance.verticalGuidelines=[0,n.width]),Reflect.has(n,"height")&&(t.moveable.instance.horizontalGuidelines=[0,n.height]),Reflect.has(n,"scale")&&t.editor.zoom(n.scale),Reflect.has(n,"clouds")&&await t.moveable.setTarget([]),Object.assign(t.state,n)},(o=e.initMousetrap)==null||o.call(e,t),t}const Da={install(e,t,o){t.state=Ce(t.state),t.runtime=Ce(t.runtime),e.config.globalProperties.$sky=t,e.use(Ia,o.components),e.component(Ot.name,Ot),o.ControlPanelContainer&&e.component(o.ControlPanelContainer.name,o.ControlPanelContainer),e.provide("sky",t)}},se=navigator.userAgent.indexOf("Mac")>=0,Ft="SKY_DATA",Va=()=>{const e=localStorage.getItem(Ft);if(!!e)return JSON.parse(e)},jt=e=>{localStorage.setItem(Ft,JSON.stringify(e))};function Fa(e){q.bind("up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-1},!0)}),q.bind("shift+up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-10},!0)}),q.bind(`${se?"command":"ctrl"}+up`,t=>{t.preventDefault(),e.cloud.moveUp()}),q.bind(`${se?"command":"ctrl"}+shift+up`,t=>{t.preventDefault(),e.cloud.moveTop()}),q.bind("right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:1},!0)}),q.bind("shift+right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:10},!0)}),q.bind(`${se?"command":"ctrl"}+right`,t=>{t.preventDefault()}),q.bind("down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:1},!0)}),q.bind("shift+down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:10},!0)}),q.bind(`${se?"command":"ctrl"}+down`,t=>{t.preventDefault(),e.cloud.moveDown()}),q.bind(`${se?"command":"ctrl"}+shift+down`,t=>{t.preventDefault(),e.cloud.moveBottom()}),q.bind("left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-1},!0)}),q.bind("shift+left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-10},!0)}),q.bind(`${se?"command":"ctrl"}+left`,t=>{t.preventDefault()}),q.bind(["backspace","del"],t=>{t.preventDefault(),e.cloud.delete()}),q.bind(`${se?"command":"ctrl"}+c`,t=>{t.preventDefault(),e.cloud.copy()}),q.bind(`${se?"command":"ctrl"}+v`,t=>{t.preventDefault(),e.cloud.paste()}),q.bind(`${se?"command":"ctrl"}+x`,t=>{t.preventDefault(),e.cloud.cut()}),q.bind(`${se?"command":"ctrl"}+z`,t=>{t.preventDefault(),e.history.back()}),q.bind(`${se?"command":"ctrl"}+shift+z`,t=>{t.preventDefault(),e.history.forward()}),q.bind(`${se?"command":"ctrl"}+s`,t=>{t.preventDefault(),jt(e.state)}),q.bind(`${se?"command":"ctrl"}+a`,async t=>{t.preventDefault();const o=document.querySelector(".sky-editor__app .sky-renderer");if(!o)return;const n=Array.from(o.children).filter(s=>s.dataset.cloudId);await e.moveable.setTarget(n)})}const ue=Ha({initMousetrap:Fa});window.sky=ue;var ja={install(e){e.use(Da,ue,{ControlPanelContainer:ca,components:{[oe.text]:ys,[oe.image]:Es}})}};async function Ga(e){return await window.PSD.fromURL(e)}function Na(e){const[t,o,n]=e;let[,,,s]=e;return s>1&&(s=s/255),[t,o,n,s]}function qa(e){const[t,o,n,s]=e;return[s*255,n*255,o*255,t]}const Ua={InsF:"inner",CtrF:"center",OutF:"outer"};function Wa({xx:e,xy:t}){const o=Math.sqrt(e*e+t*t),n=Math.asin(t/o)*180/Math.PI;return{scale:o,angle:n}}function Ka({xx:e,xy:t,yx:o,yy:n,tx:s,ty:l}){return{a:e,b:t,c:o,d:n,tx:s,ty:l}}function Ya(e,t){const{objectEffects:o,typeTool:n}=t.adjustments,{StyleRun:s}=n.engineData.EngineDict;let l=0;const a=s.RunArray.map((d,h)=>{const v=s.RunLengthArray[h],M={text:e.text.value.substr(l,v),fontSize:d.StyleSheet.StyleSheetData.FontSize},{FillColor:k}=d.StyleSheet.StyleSheetData;return k&&(M.color=De(...qa(k.Values))),l+=v,M}),r=[],i=[];if(o){const{FrFX:d,DrSh:h}=o.data;d&&r.push({type:Reflect.get(Ua,d.Styl.value),width:d["Sz  "].value,color:[d["Clr "]["Rd  "],d["Clr "]["Grn "],d["Clr "]["Bl  "],d.Opct.value/100]}),h&&i.push({color:[h["Clr "]["Rd  "],h["Clr "]["Grn "],h["Clr "]["Bl  "],h.Opct.value/100],distance:h.Dstn.value,blur:h.blur.value,angle:h.lagl.value})}const{angle:c}=Wa(n.transform);return{type:oe.text,width:e.width,height:e.height,top:e.top,left:e.left,text:e.text.value,opacity:e.opacity,textAlign:e.text.font.alignment[0],fontFamily:n.fonts()[0].slice(1).replace("\0",""),fontSize:e.text.font.sizes[0],color:De(...Na(e.text.font.colors[0])),textDecoration:s.RunArray[0].StyleSheet.StyleSheetData.Underline?"underline":"",writingMode:n.obj.textData.Ornt.value==="Hrzn"?he.h:he.v,fontWeight:"",fontStyle:"",texts:a,strokes:r,shadows:i,angle:c,transform:Ka(n.transform)}}function Gt(e,t){return{src:t.image.toBase64(),type:oe.image,width:e.width,height:e.height,top:e.top,left:e.left,opacity:e.opacity}}function Xa(e,t){return t.typeTool?Ya(e,t):Gt(e,t)}async function Ja(e){const{children:t,document:o}=e.tree().export(),n=i=>e.layers.find(c=>c.name===i.name&&c.top===i.top&&c.right===i.right&&c.bottom===i.bottom&&c.left===i.left&&c.width===i.width&&c.height===i.height),s={color:"#ffffff00",image:"",opacity:1},[l]=t.slice(-1);if(["Background","background","\u80CC\u666F"].includes(l.name)){const i=n(l),c=Gt(l,i);s.opacity=c.opacity,s.image=c.src,t.pop()}const a={background:s,width:o.width,height:o.height,clouds:[]},r=i=>{i.forEach(c=>{if(c.type==="group"&&Array.isArray(c.children))return r(c.children);const d=n(c);if(!d)return;const h=Xa(c,d);a.clouds.unshift(h)})};return r(t),a}async function Za(e){const t=URL.createObjectURL(e),o=await Ga(t);return URL.revokeObjectURL(t),Ja(o)}const Qa=(e,t)=>{const{clientWidth:o,clientHeight:n}=document.querySelector(".app-main");let s=o,l=e;const a=e/o;t/n>a&&(s=n,l=t);let i=s/(l+40);return i=Math.floor(i/5*100),i=i*5/100,i};function lt(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}const ei="<style>"+lt(Ct)+lt($t)+lt(kt)+"</style>",ti=50,at=100;async function ni(e){var E;const t=(E=e.onProgress)!=null?E:Xs,n=ue.vm.subTree.el.querySelector(".sky-renderer").cloneNode(!0),s=ue.state.clouds.filter(p=>p.type===oe.image&&p.mime===St.gif);let l,a;if(s.length===0){const p=await Nt(n);t(.5),l=await r(p)}else{a=new window.GIF({worker:4,quality:10});const[p,m]=await Promise.all([i(),c()]);if(t(.4),s.length===1)l=await d(p[0],p[0].frames.length,{fontStyles:m});else{const{totalTime:u,frameLen:g,delay:_}=v(p);k(p,u),t(.4),l=await w(p,g,_,{fontStyles:m})}}return t(1),l;function r(p){return new Promise(m=>{const{canvas:u,ctx:g}=Ut(ue.state.width,ue.state.height),_=new Image;_.onload=()=>{g==null||g.drawImage(_,0,0),u.toBlob(y=>{m(y),_.remove(),u.remove()})},_.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(p)}`})}async function i(){return await Promise.all(s.map(async m=>{const g=(await si(m.src)).map(y=>Ae(le({},y),{newDelay:0})),[_]=g;return{frames:g,el:n.querySelector(`[data-cloud-id="${m.id}"] img.image__content`),totalTime:g.reduce((y,x)=>y+x.delay,0),width:_.dims.width,height:_.dims.height}}))}async function c(){const p=ue.state.clouds.filter(_=>_.type===oe.text),m={};p.forEach(_=>{m[_.fontFamily]?m[_.fontFamily]+=_.text:m[_.fontFamily]=_.text});const u=Pe();return await Promise.all(Object.keys(m).map(async _=>{const y=u.list.find($=>$.name===_),x=await Ws({font_id:y.id,content:m[_]}),b=await Je(x);m[_]=b})),Object.keys(m).reduce((_,y)=>_+Ze(y,m[y]).outerHTML,"")}function d(p,m,{fontStyles:u}={}){return new Promise(async y=>{const x=[];for(let b=0;b<m;b+=1)x.push(g(b));await Promise.all(x),a.on("finished",function(b){y(b)}),a.render(),t(.8)});async function g(y){const x=_(y);h(p,x);const b=await qt(n,{fontStyles:u});a.addFrame(b,{delay:x.delay})}function _(y){const{length:x}=p.frames;for(;y>=x;)y-=x;return p.frames[y]}}function h(p,m){const{dims:u,patch:g}=m,{canvas:_,ctx:y}=Ut(p.width,p.height);y==null||y.putImageData(new ImageData(g,u.width,u.height),u.left,u.top);const x=_.toDataURL();p.el.src=x}function v(p){const m=p.map($=>$.totalTime),u=Math.min(...m),g=Math.max(...m),_=g/u;let y=0;_>2?y=M(u,g):y=m.reduce(($,z)=>$+z,0)/m.length;let x=ti,b=y/x;return b>at&&(x=x*(b/at),b=at),{totalTime:y,frameLen:b,delay:x}}function M(p,m){const u=m/p,_=u%1>.5?Math.ceil(u):Math.floor(u);return p*_}function k(p,m){p.forEach(u=>{const{totalTime:g,frames:_}=u,y=Math.floor(m/g);let x=m-g;y!==0&&(x=(m-y*g)/y),x!==0&&(_.forEach(b=>{const $=b.delay/g;b.delay+=x*$}),u.totalTime=Math.round(_.reduce((b,$)=>b+$.delay,0)))})}function w(p,m,u,{fontStyles:g}={}){return new Promise(async(b,$)=>{const z=[];for(let H=0;H<m;H+=1)z.push(_(H));await Promise.all(z),t(.8),a.on("finished",function(H){b(H)}),a.render()});async function _(b){const $=await y(b);a.addFrame($,{delay:u})}async function y(b){return p.forEach($=>{const z=x($,b*u);h($,z)}),await qt(n,{fontStyles:g})}function x(b,$){for(;$>b.totalTime;)$-=b.totalTime;let z=0,H;for(let V=0;V<b.frames.length;V+=1)if(z+=b.frames[V].delay,Math.ceil(z)>=$){H=b.frames[V];break}return H}}}async function Nt(e,{fontStyles:t}={}){e=e.cloneNode(!0),await s();const n=new XMLSerializer().serializeToString(e);return`
    <svg
      xmlns='http://www.w3.org/2000/svg'
      width='${ue.state.width}'
      height='${ue.state.height}'
    >
      ${ei}
      ${t!=null?t:l()}
      <foreignObject
        x='0'
        y='0'
        width='100%'
        height='100%'
      >
        ${n}
      </foreignObject>
    </svg>
  `;function s(){const a=[];let r=Array.from(e.querySelectorAll(`[data-cloud-type="${oe.image}"] .image__content`));if(r=r.filter(c=>!c.src.startsWith("data")),r.length===0)return;return r.forEach(c=>a.push(i(c))),Promise.all(a);async function i(c){const{src:d}=c,h=await oi(d);c.src=h}}function l(){let a="";const r=Pe();return It().forEach(c=>{a+=Ze(c,r.download[c]).outerHTML}),a}}async function qt(e,{fontStyles:t}={}){const o=await Nt(e,{fontStyles:t});return new Promise((n,s)=>{const l=new Image;l.onload=()=>{n(l)},l.onerror=s,l.src=`data:image/svg+xml;charset=utf-8,${o}`})}async function oi(e){const o=await(await fetch(e)).blob();return await Je(o)}function Ut(e,t){const o=document.createElement("canvas");o.width=e,o.height=t;const n=o.getContext("2d");return{canvas:o,ctx:n}}function si(e){return fetch(e).then(t=>t.arrayBuffer()).then(t=>wn(t)).then(t=>Sn(t,!0))}function li(e={}){const{scale:t}=ue.state;return le({fontFamily:xt,fontSize:60,textAlign:"left",color:"#000000ff",textDecoration:"none",writingMode:he.h,fontWeight:400,fontStyle:"normal",lineHeight:1,letterSpacing:0,shadows:[],strokes:[],text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57",texts:[{text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57"}],type:oe.text,width:360*t,height:60*t},e)}const ai=["https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-162514-cd8e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-171637-c12e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-173400-043f.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-172721-5a2d.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210728-175810-8e4f.gif"];function ii(e={}){return le({src:ai[Math.floor(Math.random()*5)],type:oe.image,mime:St.gif},e)}const ri={class:"app-header"},ci=Q("PSD"),ui=Q("viewport-"),di=Q("viewport+"),fi=Q("Adaptive"),pi=Q("Save"),mi=Q("Add Text"),hi=Q("Add Image"),gi=Q("Generate Image"),vi=["href"],_i={setup(e){const t=ee("sky"),o=Pe(),n=O(!1),s=O(0),l=O(""),a=Ce({strokeWidth:4,trailWidth:4,svgStyle:{display:"block",width:"200px"}});async function r(u){const g=await Za(u),_=g.clouds.map(y=>t.cloud.create(y));_.filter(y=>y.type===oe.text).forEach(y=>{o.list.find(b=>b.name===y.fontFamily)||(y.fontFamily=xt)}),t.setState(Ae(le({},g),{clouds:_,scale:1})),await be(),d()}async function i(){const g=await(await fetch("odyssey-demo.psd")).blob(),_=new File([g],"odyssey-demo.psd");await r(_)}async function c(u){await r(u.target.files[0])}function d(){t.setState({scale:Qa(t.state.width/t.state.scale,t.state.height/t.state.scale)})}function h(){t.setState({scale:(Math.round(t.state.scale*100)-5)/100})}function v(){t.setState({scale:1})}function M(){t.setState({scale:(Math.round(t.state.scale*100)+5)/100})}function k(){jt(t.state)}function w(){t.cloud.push(t.cloud.create(li()))}function E(){t.cloud.push(t.cloud.create(ii()))}async function p(){n.value=!0,console.time("handleGenerateImage");const u=await ni({onProgress:g=>{n.value&&(s.value=g)}});console.timeEnd("handleGenerateImage"),l.value=URL.createObjectURL(u),console.log(l.value)}function m(){n.value=!1,l.value="",s.value=0}return(u,g)=>{const _=P("SkyButton"),y=P("SkyProgress"),x=P("SkyDialog");return I(),R(Y,null,[S("div",ri,[S("input",{type:"file",onChange:c},null,32),f(_,{onClick:i},{default:T(()=>[ci]),_:1}),f(_,{onClick:h},{default:T(()=>[ui]),_:1}),f(_,{onClick:v},{default:T(()=>[Q(pe(C(t).state.scale),1)]),_:1}),f(_,{onClick:M},{default:T(()=>[di]),_:1}),f(_,{onClick:d},{default:T(()=>[fi]),_:1}),f(_,{onClick:k},{default:T(()=>[pi]),_:1}),f(_,{onClick:w},{default:T(()=>[mi]),_:1}),f(_,{onClick:E},{default:T(()=>[hi]),_:1}),f(_,{onClick:p},{default:T(()=>[gi]),_:1})]),f(x,{visible:n.value,"onUpdate:visible":g[0]||(g[0]=b=>n.value=b),width:"600px",height:"360px",class:"generate-process",onAfterClose:m},{default:T(()=>[f(y,{percent:s.value,type:"Circle",options:C(a)},null,8,["percent","options"]),S("a",{target:"_blank",class:"block mt-4",href:l.value},pe(l.value),9,vi)]),_:1},8,["visible"])],64)}}};var yi=j(_i,[["__scopeId","data-v-5b5ab91f"]]);const bi={name:"AsideCategory"},wi={class:"aside-category"};function Si(e,t,o,n,s,l){return I(),R("div",wi)}var xi=j(bi,[["render",Si],["__scopeId","data-v-79ac52e0"]]);const Ci={setup(e){const t=ee("sky"),o=O(null),n=A(()=>({width:`${t.state.width}px`,height:`${t.state.height}px`}));return ie(()=>{t.selecto.createInstance(o.value)}),(s,l)=>{const a=P("sky-editor");return I(),R("div",{ref:(r,i)=>{i.elRoot=r,o.value=r},class:"app-main"},[S("div",{class:"sky-editor-container",style:F(C(n))},[f(a,{class:"sky-editor__app"})],4)],512)}}};var ki=j(Ci,[["__scopeId","data-v-08243271"]]);const $i={setup(e){const t=Pe(),o=t.fetch();return ie(async()=>{const n=Va();n&&sky.setState(n),await o,It().forEach(l=>{const a=t.list.find(r=>r.name===l);t.addFont2Style(l,a.content.woff)})}),(n,s)=>(I(),R(Y,null,[f(yi),f(xi),f(ki)],64))}},Se=xn($i);window.app=Se;console.log("app",Se);Se.use(ja);Se.use(ss);Se.use(Cn());Se.component(wt.name,wt);const Ei=Se.mount("#app");console.log("vm",Ei);
