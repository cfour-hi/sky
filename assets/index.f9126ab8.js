var ln=Object.defineProperty,an=Object.defineProperties;var rn=Object.getOwnPropertyDescriptors;var mt=Object.getOwnPropertySymbols;var cn=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable;var gt=(e,t,o)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,re=(e,t)=>{for(var o in t||(t={}))cn.call(t,o)&&gt(e,o,t[o]);if(mt)for(var o of mt(t))un.call(t,o)&&gt(e,o,t[o]);return e},De=(e,t)=>an(e,rn(t));import{c as D,o as E,a as z,b as x,u as b,m as ce,r as fe,d as dn,e as ht,f as H,g as we,n as G,h as Me,i as P,j as f,p as fn,w as R,k as ze,l as Re,q as Te,s as ee,t as he,v as xe,x as _e,y as ue,z as Pe,A as Z,F as K,B as de,C as Oe,D as Be,E as F,T as _t,G as Ve,O as pn,H as mn,I as gn,J as hn,K as _n,L as vt,M as vn,N as yt,P as yn,Q as bt,R as Q,S as Ke,U as bn,V as wn,W as Sn,X as q,Y as xn,Z as Cn,_ as kn,$ as $n}from"./vendor.a13e9cc8.js";const En=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}};En();if(typeof window!="undefined"){let e=function(){let t=document.body,o=document.getElementById("__svg__icons__dom__1637482223848__");o||(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.style.position="absolute",o.style.width="0",o.style.height="0",o.id="__svg__icons__dom__1637482223848__"),o.innerHTML='<symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-bottom"><rect x="3.333" y="16.666" width="1.667" height="13.333" rx=".833" transform="rotate(-90 3.333 16.666)" fill="#636C78" /><path d="M7.5 3.611A1.11 1.11 0 0 1 8.611 2.5h2.778A1.11 1.11 0 0 1 12.5 3.611v8.611c0 .614-.498 1.111-1.111 1.111H8.61a1.111 1.111 0 0 1-1.111-1.11V3.61z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8.944 3.944v7.945h2.112V3.944H8.944zM8.611 2.5A1.11 1.11 0 0 0 7.5 3.611v8.611a1.11 1.11 0 0 0 1.111 1.111h2.778a1.11 1.11 0 0 0 1.111-1.11V3.61c0-.614-.498-1.111-1.111-1.111H8.61z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-center"><path d="M17.5 4.167h-15v1.666h15V4.167zM15 7.5H5v1.667h10V7.5zM2.5 10.833h15V12.5h-15v-1.667zM15 14.167H5v1.666h10v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-horizontal-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 3.333a.833.833 0 0 0-.833.834V7.5h1.666V4.167A.833.833 0 0 0 10 3.334zm.833 9.167H9.167v3.334a.833.833 0 0 0 1.666 0V12.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15.367 8.8H4.633v2.4h10.734V8.8zm1.3-.3a1 1 0 0 0-1-1H4.333a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h11.334a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-justify"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333h-15v1.667h15V7.5zm-15 3.333h15V12.5h-15v-1.667zm11 3.334h-11v1.666h11v-1.666z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-left"><rect x="3.333" y="3.333" width="1.667" height="13.333" rx=".833" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M16.2 8.8H7.967v2.4H16.2V8.8zm1.3-.3a1 1 0 0 0-1-1H7.667a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1H16.5a1 1 0 0 0 1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-right"><rect width="1.667" height="13.333" rx=".833" transform="matrix(-1 0 0 1 16.667 3.333)" fill="#636C78" /><path d="M3.5 7.5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h8.833a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 8.8h8.233v2.4H3.8V8.8zm-1.3-.3a1 1 0 0 1 1-1h8.833a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1v-3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-top"><rect x="16.667" y="3.333" width="1.667" height="13.333" rx=".833" transform="rotate(90 16.667 3.333)" fill="#636C78" /><path d="M12.5 16.5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V7.667a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1V16.5z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 16.2V7.967H8.8V16.2h2.4zm.3 1.3a1 1 0 0 0 1-1V7.667a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1V16.5a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__align-vertical-middle"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.667 10a.833.833 0 0 0-.834-.834H12.5v1.667h3.333c.46 0 .834-.373.834-.833zm-9.167.833V9.166H4.167a.833.833 0 0 0 0 1.667H7.5z" fill="#636C78" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2 15.367V4.633H8.8v10.733h2.4zm.3 1.3a1 1 0 0 0 1-1V4.332a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v11.334a1 1 0 0 0 1 1h3z" fill="#000" /></symbol><symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-down--line"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.94 5.727 8 8.78l3.06-3.053.94.94-4 4-4-4 .94-.94z" /></symbol><symbol fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-left"><path clip-rule="evenodd" d="m4.667 8 5.402-5.337.936.949L6.564 8l4.441 4.388-.937.949L4.668 8z" /></symbol><symbol viewBox="0 0 8 4" xmlns="http://www.w3.org/2000/svg" id="svg-icon__arrow-up"><path fill-rule="evenodd" clip-rule="evenodd" d="M.854 3.146A.5.5 0 0 0 1.207 4h5.586a.5.5 0 0 0 .353-.854L4.354.354a.5.5 0 0 0-.708 0L.854 3.146z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__bold"><path d="M6.375 13.125V9.75h3.563c.93 0 1.687.757 1.687 1.688a1.69 1.69 0 0 1-1.688 1.687H6.376zm0-8.25h3c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-3v-3zm6.375 1.5A3.375 3.375 0 0 0 9.375 3H4.5v12h5.438a3.562 3.562 0 0 0 3.562-3.563c0-1.212-.609-2.28-1.534-2.923a3.347 3.347 0 0 0 .784-2.139z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__copy"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.375 4.5h8.25a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-8.25a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75zm.75 1.5v9h6.75V6h-6.75zm4.5-3h-7.5v9.75h-1.5V2.25a.75.75 0 0 1 .75-.75h8.25V3z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__deleteline"><path d="M3.75 4.875V3h10.5v1.875H9.937V7.5H15V9H3V7.5h5.063V4.875H3.75zM9.938 15H8.063v-4.5h1.875V15z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__italic"><path d="M7.5 3v1.5h1.665l-2.25 9H5.25V15h5.25v-1.5H8.843l2.251-9h1.657V3H7.5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-down"><g mask="url(#hda)"><path fill-rule="evenodd" clip-rule="evenodd" d="m15.071 10.568 2.775-1.942a.416.416 0 0 0 0-.683l-7.607-5.325a.417.417 0 0 0-.478 0L2.154 7.943a.417.417 0 0 0 0 .683l2.775 1.942 1.385-1.065-1.74-1.219L10 4.486l5.428 3.798-1.741 1.219 1.384 1.065z" fill="#636C78" /><path d="M10.833 15H9.167V8.333a.833.833 0 1 1 1.666 0V15z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 14.655-2.327-2.328a.833.833 0 1 0-1.179 1.179l2.77 2.77a1.042 1.042 0 0 0 1.473 0l2.769-2.77a.833.833 0 1 0-1.179-1.179L10 14.655z" fill="#33383E" /></g></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer-up"><g mask="url(#hfa)"><path fill-rule="evenodd" clip-rule="evenodd" d="m4.929 9.432-2.775 1.942a.417.417 0 0 0 0 .683l7.607 5.325c.143.1.334.1.478 0l7.607-5.325a.415.415 0 0 0 0-.683L15.07 9.432l-1.384 1.065 1.74 1.219L10 15.514l-5.428-3.798 1.741-1.219L4.93 9.432z" fill="#636C78" /><path d="M9.167 5h1.666v6.667a.833.833 0 0 1-1.666 0V5z" fill="#33383E" /><path fill-rule="evenodd" clip-rule="evenodd" d="m10 5.345 2.327 2.328a.833.833 0 1 0 1.179-1.179l-2.77-2.77a1.042 1.042 0 0 0-1.473 0l-2.769 2.77a.833.833 0 1 0 1.179 1.179L10 5.345z" fill="#33383E" /></g></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__layer"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667 2.33 5.885a.417.417 0 0 0 0 .73L10 10.833l7.67-4.218a.417.417 0 0 0 0-.73L10 1.667zm4.875 4.583L10 3.57 5.125 6.25 10 8.931l4.875-2.68z" /><path d="M17.5 8.674 10 12.799 2.5 8.674v1.902l7.5 4.125 7.5-4.125V8.674z" /><path d="M17.5 12.424 10 16.55l-7.5-4.125v1.902l7.5 4.125 7.5-4.125v-1.902z" /></symbol><symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__locked"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 11v8h12v-8H6zM5 9a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1H5z" fill="#F54531" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9V7a3 3 0 0 0-6 0v2h6zm-3-7a5 5 0 0 0-5 5v3.95c0 .027.023.05.05.05h9.9a.05.05 0 0 0 .05-.05V7a5 5 0 0 0-5-5z" fill="#F54531" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__spacing"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 16.667h1.667V3.333H2.5v13.334zm13.333 0H17.5V3.333h-1.667v13.334zM10 6.75l-1.708 4.083h3.416L10 6.75zM8.933 5h2.133l4.009 9.583h-1.808L12.4 12.5H7.6l-.867 2.083H4.925L8.933 5z" /></symbol><symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__straw"><path d="m4.879 13.227 6.954-6.953 2.121 2.12L7 15.35c-.296.295-.651.5-.97.56l-1.592.299c-.298.056-.474-.12-.418-.419l.298-1.591c.06-.32.265-.675.56-.97z" stroke="#606770" stroke-width="1.5" /><path fill-rule="evenodd" clip-rule="evenodd" d="m15.079 7.912.38 2.345a.5.5 0 0 1-.14.433l-.35.35a.5.5 0 0 1-.707 0L9.077 5.854a.5.5 0 0 1 0-.707l.353-.353a.5.5 0 0 1 .426-.141l2.261.328 2.428-2.428A2.083 2.083 0 0 1 17.492 5.5l-2.413 2.412z" fill="#606770" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-left"><path d="M17.5 4.167h-15v1.666h15V4.167zM13.333 7.5H2.5v1.667h10.833V7.5zM2.5 10.833h15V12.5h-15v-1.667zm10.833 3.334H2.5v1.666h10.833v-1.666z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-align-right"><path d="M17.5 4.167h-15v1.666h15V4.167zm0 3.333H6.667v1.667H17.5V7.5zm-15 3.333h15V12.5h-15v-1.667zm15 3.334H6.667v1.666H17.5v-1.666z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__text-distortion"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.216 5.413a14.496 14.496 0 0 0-10.432 0l.998 7.981a13.637 13.637 0 0 1 8.436 0l.998-7.981zM3.121 4.24a1.1 1.1 0 0 0-.682 1.157l1.094 8.75a.854.854 0 0 0 1.147.694 12.302 12.302 0 0 1 8.64 0 .854.854 0 0 0 1.148-.694l1.094-8.75a1.1 1.1 0 0 0-.683-1.157 15.83 15.83 0 0 0-11.758 0z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.334 13.58 6 4.58l1.333-.05.333 9-1.332.05zm4-9.382L10 13.532l1.332.047.333-9.333-1.332-.048z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M14.333 8.719a18.618 18.618 0 0 0-10.666 0v1.396a17.285 17.285 0 0 1 10.666 0V8.72z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__trash"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.982 1.5a.375.375 0 0 0-.336.207L6 3H2.625v1.5h1.17l.707 11.3a.75.75 0 0 0 .748.7h7.5a.75.75 0 0 0 .748-.7l.707-11.3h1.17V3H12l-.646-1.293a.375.375 0 0 0-.336-.207H6.982zM5.3 4.5h7.397l-.65 10.5H5.951l-.65-10.5z" /></symbol><symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" id="svg-icon__underline"><path d="M4.875 3v5.625A4.13 4.13 0 0 0 9 12.75a4.13 4.13 0 0 0 4.125-4.125V3H11.25v5.625c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V3H4.875zm9.375 10.5V15H3.75v-1.5h10.5z" /></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="svg-icon__unlock"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 9H9V7a3 3 0 0 1 6 0h2A5 5 0 0 0 7 7v2H5a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4zm-7.95 2H6v8h12v-8H7.05z" /></symbol><symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="svg-icon__writing-mode"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.666 4.583V3.75h10v2.5H15v-.833h-2.5v9.166h1.666v1.667H9.167v-1.667h1.666V5.417h-2.5v.834H6.667V4.583zm-3.332 7.084v-7.5H5v7.5h1.667l-3.333 4.166v-4.166z" /></symbol>',t.insertBefore(o,t.firstChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}var j=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const In=["xlink:href"],Mn={name:"SvgIcon"};function zn(e){const t=e,o=D(()=>`#svg-icon__${t.filename}`);return(n,s)=>(E(),z("svg",ce({class:[`svg-icon__${e.filename}`,"svg-icon"],"aria-hidden":"true"},n.$attrs),[x("use",{"xlink:href":b(o)},null,8,In)],16))}const Rn=Object.assign(Mn,{props:{filename:String},setup:zn});var wt=j(Rn,[["__scopeId","data-v-3d81af54"]]);const Tn={name:"SkyButton"};function Pn(e){const t=e,o=D(()=>{const n=[];return t.size&&n.push(`sky-button--${t.size}`),t.plain&&n.push("sky-button--plain"),n});return(n,s)=>(E(),z("button",ce({type:"button",class:["sky-button",b(o)]},n.$attrs),[fe(n.$slots,"default",{},void 0,!0)],16))}const On=Object.assign(Tn,{props:{plain:{type:Boolean,default:!1},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},setup:Pn});var Bn=j(On,[["__scopeId","data-v-504bc46a"]]);const Hn=["type","value"],An={key:0,class:"sky-input__append flex-center"},Ln={name:"SkyInput"};function Dn(e,{emit:t}){const o=e,n=dn(),s=ht(),l=H(null),a=D(()=>{const u=[];return o.size&&u.push(`sky-input--${o.size}`),n.append&&u.push("sky-input--append"),u});function i(u){t("input",u.target.value,u)}function r(u){t("change",u.target.value,u),Me(()=>{l.value.value=o.value})}return(u,d)=>(E(),z("div",{class:G(["sky-input",[...b(a),b(s).class]])},[x("input",ce({ref:(g,_)=>{_.elInput=g,l.value=g},class:"sky-input__inner",type:e.type,value:e.value},u.$attrs,{onInput:i,onChange:r}),null,16,Hn),u.$slots.append?(E(),z("div",An,[fe(u.$slots,"append",{},void 0,!0)])):we("",!0)],2))}const Vn=Object.assign(Ln,{props:{value:[String,Number],type:{type:String,default:"text"},size:{type:String,default:"",validator(e){return!e||["small","large"].includes(e)}}},emits:["input","change"],setup:Dn});var St=j(Vn,[["__scopeId","data-v-3d656d19"]]);const Ce=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e);const Fn={name:"SkyInputNumber",inheritAttrs:!1};function jn(e,{emit:t}){const o=e,n=ht(),s=D(()=>{const _="sky-input__number",k=[_,o.class];return n.size&&k.push(`${_}--${n.size}`),n.readonly!==void 0&&k.push(`${_}-readonly`),k}),l=D(()=>typeof o.max=="number"&&n.value>=o.max),a=D(()=>typeof o.min=="number"&&n.value<=o.min);function i(_){return _=Number(_),typeof o.min=="number"&&(_<o.min&&(_=o.min),_>o.max&&(_=o.max)),_}function r(_,k){t("input",i(_),k)}function u(_,k){t("change",i(_),k)}function d(){l.value||t("change",Ce(n.value+o.step,{decimal:o.decimal}))}function g(){a.value||t("change",Ce(n.value-o.step,{decimal:o.decimal}))}return(_,k)=>{const M=P("svg-icon");return E(),z("div",{class:G(b(s))},[f(St,ce({type:"number"},b(n),{onInput:r,onChange:u}),null,16),x("div",{class:G(["sky-input__number-arrow flex-center top-0",{"sky-disabled":b(l)}]),onClick:d},[f(M,{filename:"arrow-up"})],2),x("div",{class:G(["sky-input__number-arrow flex-center bottom-0",{"sky-disabled":b(a)}]),style:{transform:"rotateX(180deg)"},onClick:g},[f(M,{filename:"arrow-up"})],2)],2)}}const Nn=Object.assign(Fn,{props:{min:Number,max:Number,decimal:{type:Number,default:0},step:{type:Number,default:1},class:{type:String,default:""}},emits:["input","change"],setup:jn});var Gn=j(Nn,[["__scopeId","data-v-00c01dec"]]);const qn=e=>(ze("data-v-25aed1d8"),e=e(),Re(),e),Un={class:"sky-select","data-sky-popup":""},Wn=qn(()=>x("div",{class:"absolute w-full h-full top-0 cursor-pointer"},null,-1)),Kn={class:"sky-select__arrow flex-center"},Yn={name:"SkySelect"};function Xn(e,{expose:t,emit:o}){fn("vmSelect",Te());const n=H(!1);function s(l){o("update:value",l),o("change",l),n.value=!1}return t({handleChange:s}),(l,a)=>{const i=P("SkyInput"),r=P("svg-icon"),u=P("SkyPopup");return E(),z("div",Un,[x("div",{onClick:a[0]||(a[0]=d=>n.value=!n.value)},[f(i,{value:e.value,readonly:""},null,8,["value"]),Wn,x("div",Kn,[f(r,{filename:"arrow-down--line"})])]),f(u,{visible:n.value,"onUpdate:visible":a[1]||(a[1]=d=>n.value=d),class:"sky-select__popup"},{default:R(()=>[fe(l.$slots,"default",{},void 0,!0)]),_:3},8,["visible"])])}}const Jn=Object.assign(Yn,{props:{value:{type:[String,Number],required:!0}},emits:["update:value","change"],setup:Xn});var Zn=j(Jn,[["__scopeId","data-v-25aed1d8"]]);const Qn=["value"],eo={key:1},to={name:"SkyOption",inheritAttrs:!1};function no(e){const t=e,o=ee("vmSelect"),n=D(()=>({active:t.value===o.props.value}));function s(){o.exposed.handleChange(t.value)}return(l,a)=>(E(),z("div",{class:G(["sky-option",b(n)]),value:e.value,onClick:s},[l.$slots.default?fe(l.$slots,"default",{key:0},void 0,!0):(E(),z("span",eo,he(e.label),1))],10,Qn))}const oo=Object.assign(to,{props:{label:{type:String,default:""},value:{required:!0}},setup:no});var so=j(oo,[["__scopeId","data-v-83d83e12"]]);const He=(e,{onmousedown:t,onmousemove:o,onmouseup:n}={})=>{let s=e.getBoundingClientRect();const l={x:0,y:0},a=d=>{let g=d.pageX-s.x,_=d.pageY-s.y;g<0&&(g=0),g>s.width&&(g=s.width),_<0&&(_=0),_>s.height&&(_=s.height),l.x=Ce(g/s.width,{decimal:2}),l.y=Ce(_/s.height,{decimal:2})},i=d=>{a(d),o&&o(l,d)},r=d=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),n&&n(l,d)},u=d=>{s=e.getBoundingClientRect(),a(d),document.addEventListener("mousemove",i),document.addEventListener("mouseup",r),t&&t(l,d)};return e.addEventListener("mousedown",u),{destroy(){e.removeEventListener("mousedown",u)}}},xt=(e,t,o)=>{let n=Math.round(e).toString(16),s=Math.round(t).toString(16),l=Math.round(o).toString(16);return n.length===1&&(n="0"+n),s.length===1&&(s="0"+s),l.length===1&&(l="0"+l),"#"+n+s+l},Fe=(e,t,o,n=1)=>{const s=xt(e,t,o);let l=Math.round(n*255).toString(16);return l.length===1&&(l="0"+l),s+l},Ct=(e,t,o)=>{e/=255,t/=255,o/=255;const n=Math.min(e,t,o),s=Math.max(e,t,o),l=s-n;let a=0,i=0;const r=s;if(l===0)a=i=0;else{i=l/s;const u=((s-e)/6+l/2)/l,d=((s-t)/6+l/2)/l,g=((s-o)/6+l/2)/l;e===s?a=g-d:t===s?a=1/3+u-g:o===s&&(a=2/3+d-u),a<0?a+=1:a>1&&(a-=1)}return[a*360,i*100,r*100]},lo=(e,t,o,n=1)=>[...Ct(e,t,o),n];function ao(e,t,o){e=e/360*6,t/=100,o/=100;const n=Math.floor(e),s=e-n,l=o*(1-t),a=o*(1-s*t),i=o*(1-(1-s)*t),r=n%6,u=[o,a,l,l,i,o][r],d=[i,o,o,a,l,l][r],g=[l,l,i,o,o,a][r];return[Math.round(u*255),Math.round(d*255),Math.round(g*255)]}const io=(e,t,o)=>{const[n,s,l]=ao(e,t,o);return xt(n,s,l)},ro=(e,t,o,n=1)=>`${io(e,t,o)}${n===0?"00":Math.round(n*255).toString(16)}`,Ye=e=>{e=e.slice(0,7);let t=0,o=0,n=0;return e.length==4?(t=+("0x"+e[1]+e[1]),o=+("0x"+e[2]+e[2]),n=+("0x"+e[3]+e[3])):e.length==7&&(t=+("0x"+e[1]+e[2]),o=+("0x"+e[3]+e[4]),n=+("0x"+e[5]+e[6])),[t,o,n]},Xe=e=>{const t=Ye(e),o=+("0x"+e[7]+e[8]);return[...t,+(o/255).toFixed(2)]},co=e=>{const[t,o,n,s]=Xe(e);return lo(t,o,n,s)},kt=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",$t=(e,t)=>{const o=[];return t.forEach(n=>{o.push(`${n.color} ${n.offset*100}%`)}),`linear-gradient(${e}deg, ${o.join(",")})`};const Je=e=>(ze("data-v-50c50297"),e=e(),Re(),e),uo={class:"sky-color-picker"},fo={class:"mb-3"},po={key:1,class:"sky-cp__gradient flex-center"},mo={class:"sky-cp__gradient-bar w-48 h-4"},go=["data-sort","onMousedown","onKeyup"],ho=Je(()=>x("div",{class:"sky-cpp__color-saturation"},null,-1)),_o=Je(()=>x("div",{class:"sky-cpp__color-value"},null,-1)),vo={class:"sky-cps__track"},yo={class:"sky-cps__track"},bo={class:"flex justify-between mt-3.5"},wo={key:0,class:"sky-cp__picking-model"},So=Je(()=>x("div",{class:"sky-cp__straw-mousetrack"},null,-1)),xo={name:"SkyColorPicker",inheritAttrs:!1};function Co(e,{emit:t}){const o=e,n=H(kt(o.value)),s=H(90),l=H([]),a=xe({h:0,s:0,l:0,a:0}),i=H("#f00"),r=H("#000"),u=H(0),d=H(!1);let g=H({});const _=H(),k=H(),M=H(),w=H(),I=H(),m=H(),v=H();let y=null,p=null,c=null,h=null,C=null,S=null,$=!0,O=null;const A={color:o.defaultColor,gradient:o.defaultGradient,image:o.defaultImage},T=D(()=>o.modes.includes("\u6E10\u53D8")),W=D(()=>{const B=Ye(r.value).join(",");return{background:`linear-gradient(to right, rgba(${B}, 0) 0%, rgb(${B}) 100%)`}});_e(g,B=>{qe(B.color)}),_e(()=>o.value,B=>{const V=kt(B);V!==n.value&&(n.value=V),ye(V),X(B)});const ne=_e(a,oe,{deep:!0});function oe(B){const V=ro(...Object.values(B));let J;n.value==="\u7EAF\u8272"?J=V:n.value==="\u6E10\u53D8"&&(g.value.color=V,J=$t(s.value,l.value)),Ie(V),ve(J)}ue(se);async function se(){M.value.style.left=`${a.s}%`,M.value.style.top=`${100-a.l}%`,w.value.style.left=`${a.h/360*100}%`,m.value.style.left=`${a.a*100}%`,T.value&&(y=He(_.value,{onmousedown:B,onmousemove:V,onmouseup:J}));function B(U){if(C)return;const ge=l.value.findIndex(be=>be.offset>=U.x),L=l.value[ge-1],N=Xe(L.color),We=l.value[ge],ft=Xe(We.color),pt=[];for(let be=0;be<3;be+=1)pt.push(N[be]+(ft[be]-N[be])*U.x);const on=We.offset-U.x-(U.x-L.offset)>0?N[3]:ft[3],sn=Fe(...pt,on);g.value={color:sn,offset:U.x},l.value.splice(ge,0,g.value)}function V(U){if(!C)return;g.value.offset=U.x,l.value.sort((L,N)=>L.offset-N.offset);const ge=$t(s.value,l.value);ve(ge)}function J(){C=!1}p=He(k.value,{onmousemove:le,onmouseup:le});function le(U){Ue();const ge=U.x*100,L=U.y*100;a.s=Math.round(ge),a.l=Math.round(100-L),M.value.style.left=`${ge}%`,M.value.style.top=`${L}%`}c=He(I.value,{onmousemove:me,onmouseup:me});function me(U){Ue(),a.h=U.x*360,w.value.style.left=`${U.x*100}%`}h=He(v.value,{onmousemove:Le,onmouseup:Le});function Le(U){Ue(),a.a=U.x,m.value.style.left=`${U.x*100}%`}ye(n.value),X(o.value)}Pe(()=>{p==null||p.destroy(),c==null||c.destroy(),h==null||h.destroy(),ne(),y&&y.destroy()});function X(B){n.value==="\u7EAF\u8272"?A.color=B:n.value==="\u6E10\u53D8"?A.gradient=B:n.value==="\u56FE\u6848"&&(A.image=B)}function ve(B){B!==o.value&&(X(B),t("update:value",B))}async function Ee(B){if(B===n.value)return;n.value=B;let V;B==="\u7EAF\u8272"?V=A.color:B==="\u6E10\u53D8"?V=A.gradient:B==="\u56FE\u6848"&&(V=A.image),ve(V)}function ye(B){B==="\u7EAF\u8272"?qe(o.value):B==="\u6E10\u53D8"&&(l.value.length===0?o.value.match(/[^,]+/g).forEach((V,J)=>{if(J===0){s.value=Number(V.match(/\d+/)[0]);return}let[le,me]=V.trim().split(" ");le.startsWith("#")||(le=Fe(le)),me=me.match(/\d+/)[0]/100,l.value.push({color:le,offset:me}),g.value=l.value[0]}):qe(g.value.color))}function Ie(B){var V;i.value=`hsl(${a.h}, 100%, 50%)`,r.value=B.slice(0,7),S=r.value,u.value=Math.round(((V=a.a)!=null?V:1)*100)}function qe(B){if($){const V=co(B);a.h=V[0],a.s=V[1],a.l=V[2],a.a=V[3],Ie(B);let J=a.s;const le=Math.round(100-a.l);M.value.style.left=`${J}%`,M.value.style.top=`${le}%`,J=a.h/360,w.value.style.left=`${J*100}%`,m.value.style.left=`${a.a*100}%`}}function Zt(B){C=!0,g.value=B}function Qt(B){if(!["Backspace","Delete"].includes(B.key)||l.value.length===2)return;const V=l.value.indexOf(g.value);l.value.splice(V,1),g.value=l.value[0]}function en(B){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(B)){const V=Ye(B),[J,le,me]=Ct(...V);a.h=J,a.s=le,a.l=me,M.value.style.left=`${a.s}%`,M.value.style.top=`${100-a.l}%`,w.value.style.left=`${a.h/360*100}%`,r.value=B}else r.value=S}function dt(B){a.a=B/100,m.value.style.left=`${B}%`}function Ue(){$=!1,O&&clearTimeout(O),O=setTimeout(()=>{$=!0},16)}async function tn(){}function nn(){}return(B,V)=>{const J=P("SkyTabPanel"),le=P("SkyTabs"),me=P("svg-icon"),Le=P("SkyButton"),U=P("SkyInput"),ge=P("SkyInputNumber");return E(),z(K,null,[x("div",uo,[x("div",fo,he(n.value),1),e.modes.length>1?(E(),Z(le,{key:0,value:n.value,"onUpdate:value":Ee},{default:R(()=>[(E(!0),z(K,null,de(e.modes,L=>(E(),Z(J,{key:L,label:L},null,8,["label"]))),128))]),_:1},8,["value"])):we("",!0),b(T)?Oe((E(),z("div",po,[x("div",mo,[x("div",{ref:(L,N)=>{N.elGradientTrack=L,_.value=L},class:"sky-cpgb__track h-full",style:F([{width:"174px"},{background:e.value}])},[(E(!0),z(K,null,de(l.value,(L,N)=>(E(),z("div",{key:N,class:G(["sky-cpgb__pointer",{"sky-cpgb__pointer--active":L===b(g)}]),"data-sort":N,style:F({left:`${L.offset*100}%`,background:L.color}),tabindex:"-1",onMousedown:We=>Zt(L),onKeyup:Ve(Qt,["stop"])},null,46,go))),128))],4)])],512)),[[Be,n.value==="\u6E10\u53D8"]]):we("",!0),x("div",{ref:(L,N)=>{N.elPalette=L,k.value=L},class:"sky-cp__palette",style:F({background:i.value})},[ho,_o,x("div",{ref:(L,N)=>{N.elPalettePointer=L,M.value=L},class:"sky-cpp__pointer"},null,512)],4),x("div",{ref:(L,N)=>{N.elSliderHux=L,I.value=L},class:"sky-cp__slider sky-cp__slider-hux"},[x("div",vo,[x("div",{ref:(L,N)=>{N.elSliderHuxPointer=L,w.value=L},class:"sky-cpst__pointer"},null,512)])],512),x("div",{ref:(L,N)=>{N.elSliderAlpha=L,v.value=L},class:"sky-cp__slider sky-cp__slider-alpha"},[x("div",{class:"sky-cpsa__background",style:F(b(W))},null,4),x("div",yo,[x("div",{ref:(L,N)=>{N.elSliderAlphaPointer=L,m.value=L},class:"sky-cpst__pointer"},null,512)])],512),x("div",bo,[f(Le,{size:"small",onClick:tn},{default:R(()=>[f(me,{filename:"straw"})]),_:1}),f(U,{value:r.value,class:"w-24 mx-1",size:"small",onChange:en},null,8,["value"]),f(ge,{value:u.value,"onUpdate:value":V[0]||(V[0]=L=>u.value=L),class:"w-12",size:"small",min:0,max:100,onInput:dt,onChange:dt},null,8,["value"])])]),(E(),Z(_t,{to:"body"},[d.value?(E(),z("div",wo,[x("canvas",{class:"sky-cp__straw-canvas",onClick:nn}),So])):we("",!0)]))],64)}}const ko=Object.assign(xo,{props:{value:{type:String,default:"#ffffff00"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8","\u56FE\u6848"]},defaultColor:{type:String,default:"#ffffff00"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value"],setup:Co});var $o=j(ko,[["__scopeId","data-v-50c50297"]]),Eo={watch:{visible(e){if(!e)return;for(this.mountEl=this.$parent.$el;this.mountEl&&!Reflect.has(this.mountEl.dataset,"skyPopup");)this.mountEl=this.mountEl.parentElement;if(!this.mountEl)return;const{top:t,left:o,width:n,height:s}=this.mountEl.getBoundingClientRect();this.$el.style.top=`${t+s}px`,this.$el.style.left=`${o+n/2}px`}}};const Io={name:"SkyPopup",mixins:[Eo]};function Mo(e,{emit:t}){const o=e,n=D(()=>({width:`${o.width}px`}));return(s,l)=>Oe((E(),Z(b(pn),{class:"sky-popup",style:F(b(n)),onTrigger:l[0]||(l[0]=a=>t("update:visible",!1))},{default:R(()=>[fe(s.$slots,"default",{},void 0,!0)]),_:3},8,["style"])),[[Be,e.visible]])}const zo=Object.assign(Io,{props:{visible:{type:Boolean,default:!1},width:{type:Number,default:200}},emits:["update:visible"],setup:Mo});var Ro=j(zo,[["__scopeId","data-v-54ee3737"]]);const To={class:"sky-tabs"},Po={class:"sky-tabs__header"},Oo={class:"sky-tabs__header-shell"},Bo=["onClick"],Ho={class:"sky-tabs__content"},Ao={name:"SkyTabs"};function Lo(e,{expose:t,emit:o}){const n=e;_e(()=>n.value,()=>{r()});const s=H([]),l=xe({width:0,left:0});let a=0;ue(()=>{a=100/s.value.length,l.width=`${a}%`,r()});let i=null;function r(d=-1){var g,_,k,M;d<0&&(d=s.value.findIndex(w=>w.props.label===n.value)),l.left=`${a*d}%`,(_=(g=i==null?void 0:i.exposed)==null?void 0:g.changeActive)==null||_.call(g,!1),i=s.value[d],(M=(k=i.exposed)==null?void 0:k.changeActive)==null||M.call(k,!0)}function u(d,g){o("update:value",d.props.label),r(g)}return t({tabs:s}),(d,g)=>(E(),z("div",To,[x("div",Po,[x("div",Oo,[(E(!0),z(K,null,de(s.value,(_,k)=>(E(),z("div",{key:_.props.label,class:G(["sky-tab__title",{"sky-active":_.props.label===e.value}]),onClick:M=>u(_,k)},he(_.props.label),11,Bo))),128)),x("div",{class:"sky-tab__slider",style:F(b(l))},null,4)])]),x("div",Ho,[fe(d.$slots,"default",{},void 0,!0)])]))}const Do=Object.assign(Ao,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup:Lo});var Vo=j(Do,[["__scopeId","data-v-48b1e296"]]);const Fo={name:"SkyTabPanel"};function jo(e,{expose:t}){const o=Te();o.parent.exposed.tabs.value.push(o);const n=H(!1),s=D(()=>({display:n.value?"block":"none"}));function l(a){n.value=a}return t({changeActive:l}),(a,i)=>(E(),z("div",{class:"sky-tab-panel",style:F(b(s))},[fe(a.$slots,"default")],4))}const No=Object.assign(Fo,{props:{label:{type:String,required:!0}},setup:jo});const Go={name:"SkyTooltip",props:{content:{type:[String,Number],default:""},direction:{type:String,default:"top",validator(e){return["top","right","bottom","left"].includes(e)}},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},computed:{rootClass(){const e=[`sky-tooltip--${this.direction}`];return this.disabled&&e.push("sky-tooltip--disabled"),this.active&&e.push("sky-tooltip--active"),e}}},qo=["data-tips"];function Uo(e,t,o,n,s,l){return E(),z("div",{class:G(["sky-tooltip",l.rootClass]),"data-tips":o.content},[fe(e.$slots,"default",{},void 0,!0)],10,qo)}var Wo=j(Go,[["render",Uo],["__scopeId","data-v-d2e76e10"]]);const Ko={class:"sky-dialog__header"},Yo={class:"sky-dialog__body"},Xo={class:"sky-dialog__footer"},Jo={name:"SkyDialog"};function Zo(e,{emit:t}){const o=e,n=D(()=>({display:o.visible?"flex":"none"})),s=D(()=>({width:o.width,height:o.height}));async function l(){o.maskClosable&&t("update:visible",!1),await Me(),t("afterClose")}return(a,i)=>(E(),Z(_t,{to:e.teleportTo},[x("div",{class:G(["sky-dialog flex-center",a.$attrs.class]),style:F(b(n))},[x("div",{class:"mask",onClick:l}),x("div",{class:"sky-dialog__panel",style:F(b(s))},[x("div",Ko,[fe(a.$slots,"header",{},void 0,!0)]),x("div",Yo,[fe(a.$slots,"default",{},void 0,!0)]),x("div",Xo,[fe(a.$slots,"footer",{},void 0,!0)])],4)],6)],8,["to"]))}const Qo=Object.assign(Jo,{props:{visible:{type:Boolean,default:!1},width:{type:String,default:"80%"},height:{type:String,default:"80%"},teleportTo:{type:String,default:"body"},maskClosable:{type:Boolean,default:!0}},emits:["update:visible","afterClose"],setup:Zo});var es=j(Qo,[["__scopeId","data-v-3a726588"]]);const ts={name:"SkySlider"};function ns(e,{emit:t}){const o=e,n=H(!1),s=H(null),l=H(null);let a=null,i=null,r=null;const u=D(()=>Math.round(o.max-o.min)),d=D(()=>Math.round((o.value-o.min)/u.value*100)),g=D(()=>({width:`${d.value}%`})),_=D(()=>({left:`${d.value}%`}));ue(()=>{a=He(s.value,{onmousedown:k,onmousemove:k}),i=()=>{n.value=!0},r=()=>{n.value=!1},l.value.addEventListener("mousedown",i),document.addEventListener("mouseup",r)}),Pe(()=>{a.destroy(),l.value.removeEventListener("mousedown",i),document.removeEventListener("mouseup",r)});function k(M){let w=M.x*u.value;o.step>0&&(w=Math.round(M.x*o.max/o.step)*o.step);const I=Ce(w+o.min,{decimal:2});I!==o.value&&t("update:value",I)}return(M,w)=>{const I=P("SkyTooltip");return E(),z("div",{class:"sky-slider",ref:(m,v)=>{v.elRoot=m,s.value=m}},[x("div",{class:"sky-slider__progress",style:F(b(g))},null,4),x("div",{ref:(m,v)=>{v.elPointer=m,l.value=m},class:"sky-slider__pointer",style:F(b(_))},[Oe(f(I,{content:e.value,active:n.value},null,8,["content","active"]),[[Be,e.showTooltip]])],4)],512)}}const os=Object.assign(ts,{props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:0},showTooltip:{type:Boolean,default:!0}},emits:["update:value"],setup:ns});var ss=j(os,[["__scopeId","data-v-7e8a13ac"]]);const ls={name:"SkyProgress"};function as(e){const t=e,o=H(),n=D(()=>{const l="sky-progress";return[l,`${l}__${t.type}`]});let s;return _e(()=>t.percent,l=>{s.animate(l),s.setText(`${Math.round(t.percent*100)}%`)}),ue(()=>{s=new mn[t.type](o.value,re({color:"#1D4ED8",strokeWidth:2,trailColor:"#E5E7EB",trailWidth:2,text:{value:`${Math.round(t.percent*100)}%`,style:{}}},t.options))}),gn(()=>{s.destroy()}),(l,a)=>(E(),z("div",{ref:(i,r)=>{r.elProgressInner=i,o.value=i},class:G(["sky-progress",b(n)])},null,2))}const is=Object.assign(ls,{props:{percent:{type:Number,default:0},type:{type:String,default:"Line",validator:e=>["Line","Circle","SemiCircle"].includes(e)},options:Object},setup:as});var rs=j(is,[["__scopeId","data-v-067c2d98"]]);const cs=[Bn,St,Gn,Zn,so,$o,Ro,Vo,No,Wo,es,ss,rs];var us={install(e){cs.forEach(t=>{e.component(t.name,t)})}};const ae={text:"text",image:"image"},Et={gif:"image/gif"},It="SourceHanSansSC-Regular",te={h:"horizontal-tb",v:"vertical-rl"},ds={class:"cloud-text"},fs={class:"text__effect"},ps=["textContent"],ms=["textContent"],gs={name:"CloudText",inheritAttrs:!1};function hs(e){const t=e,o=H(),n=D(()=>{const i={fontWeight:t.cloud.fontWeight,fontStyle:t.cloud.fontStyle,textDecoration:t.cloud.textDecoration,textAlign:t.cloud.textAlign,color:t.cloud.color,writingMode:t.cloud.writingMode},r=t.cloud.writingMode===te.v;return De(re({},i),{width:r?"auto":"100%",height:r?"100%":"auto"})});ue(()=>{Object.assign(o.value.style,{fontSize:`${t.cloud.fontSize}px`,lineHeight:t.cloud.lineHeight,letterSpacing:`${t.cloud.letterSpacing}px`})});function s(i){var u,d,g,_,k,M;const r={fontSize:i.fontSize?`${i.fontSize}px`:"",textAlign:(u=i.textAlign)!=null?u:"",color:i.color,textDecoration:(d=i.textDecoration)!=null?d:"",writingMode:(g=i.writingMode)!=null?g:"",fontWeight:(_=i.fontWeight)!=null?_:"",fontStyle:(k=i.fontStyle)!=null?k:"",lineHeight:(M=i.lineHeight)!=null?M:"",letterSpacing:i.letterSpacing?`${i.letterSpacing}px`:""};return i.fontFamily&&(r.fontFamily=i.fontFamily),r}function l(i){return{webkitTextStroke:`${i.width}px rgba(${i.color.join(",")})`}}function a(i){const{distance:r,angle:u,color:d,blur:g}=i,_=r*Math.cos((180-u)*(Math.PI/180)),k=r*Math.sin((180-u)*(Math.PI/180));return{textShadow:`${_}px ${k}px ${g}px rgba(${d.join(",")})`}}return(i,r)=>(E(),z("div",ds,[x("div",fs,[(E(!0),z(K,null,de(e.cloud.strokes,(u,d)=>(E(),z("div",{key:`stroke${d}`,class:"text__stroke",style:F(l(u))},[(E(!0),z(K,null,de(e.cloud.texts,(g,_)=>(E(),z("span",{key:_,style:F(s(g)),textContent:he(g.text)},null,12,ps))),128))],4))),128)),(E(!0),z(K,null,de(e.cloud.shadows,(u,d)=>(E(),z("div",{key:`shadow${d}`,class:"text__shadow",style:F(a(u))},[(E(!0),z(K,null,de(e.cloud.texts,(g,_)=>(E(),z("span",{key:_,style:F(s(g)),textContent:he(g.text)},null,12,ms))),128))],4))),128))]),x("div",ce({ref:(u,d)=>{d.elTextContent=u,o.value=u},class:"text__content",style:b(n)},i.$attrs),[(E(!0),z(K,null,de(e.cloud.texts,(u,d)=>(E(),z("span",{key:d,style:F(s(u))},he(u.text),5))),128))],16)]))}const _s=Object.assign(gs,{props:{cloud:{type:Object,required:!0}},setup:hs});const vs={name:"CloudTextEditor"};function ys(e,{expose:t}){const o=e,n=ee("sky"),s=["ne","nw","sw","se"],l={moveable:{onClick:k,onChangeTarget:M,onResizeStart:w,onResize:I,keepRatio:[...s],renderDirections:g(o.cloud.writingMode),onLeaveSelect:M}};let a=null,i=null;const r=H(),u=H(!0),d=D(()=>({width:`${o.cloud.width/n.state.scale}px`,height:`${o.cloud.height/n.state.scale}px`,transform:`scale(${n.state.scale})`,transformOrigin:"top left"}));_e(u,m=>{m?o.cloud.text=a.textContent:(n.moveable.instance.passDragArea=!0,_()),i.style.display=m?"block":"none",a.setAttribute("contenteditable",!m)}),_e(()=>o.cloud.writingMode,m=>{l.moveable.renderDirections=g(m),n.moveable.updateState(),n.cloud.updateCloudsElementRect()}),ue(()=>{a=r.value.querySelector(".text__content"),i=r.value.querySelector(".text__effect")});function g(m){return m===te.v?[...s,"n","s"]:[...s,"w","e"]}function _(){window.getSelection().removeAllRanges(),window.getSelection().selectAllChildren(a)}function k(m){o.cloud.lock||m.metaKey||m.shiftKey||(u.value=!1)}function M(){u.value=!0}function w(m){const{datas:v}=m;v.startFontSize=o.cloud.fontSize,v.startLetterSpacing=o.cloud.letterSpacing}function I(m){const{datas:v,direction:y}=m,[p,c]=y,{el:h}=n.cloudVM[o.cloud.id].subTree;if(o.cloud.writingMode===te.h){if(c===0){const{clientHeight:C}=a;h.style.height=`${C}px`,o.cloud.height=C}}else if(o.cloud.writingMode===te.v&&p===0){const{clientWidth:C}=a;h.style.width=`${C}px`,o.cloud.width=C}p!==0&&c!==0&&(o.cloud.fontSize=v.startFontSize*v.scale[0],o.cloud.letterSpacing=v.startLetterSpacing*v.scale[0],Object.assign(a.style,{fontSize:`${o.cloud.fontSize}px`,letterSpacing:`${o.cloud.letterSpacing}px`}))}return t({skyHooks:l,readonly:u}),(m,v)=>(E(),z("div",{ref:(y,p)=>{p.elRoot=y,r.value=y},class:"cloud-text__editor",style:F(b(d))},[f(_s,{cloud:e.cloud},null,8,["cloud"])],4))}const bs=Object.assign(vs,{props:{cloud:{type:Object,required:!0}},setup:ys}),ws={class:"cloud__image"},Ss=["src"],xs={name:"CloudImage"};function Cs(e){return(t,o)=>(E(),z("div",ws,[x("img",{src:e.cloud.src,alt:"",class:"image__content"},null,8,Ss)]))}const ks=Object.assign(xs,{props:{cloud:{type:Object,required:!0}},setup:Cs}),$s={name:"CloudImageEditor"};function Es(e,{expose:t}){return t({skyHooks:{moveable:{keepRatio:["ne","nw","sw","se"]}}}),(n,s)=>(E(),Z(ks,hn(_n(n.$attrs)),null,16))}const Is=Object.assign($s,{setup:Es});const Ms={class:"header"},zs={name:"ControlPanelHeader"};function Rs(e){return(t,o)=>{const n=P("svg-icon");return E(),z("div",Ms,[e.showBack?(E(),Z(n,{key:0,filename:"arrow-left",onClick:o[0]||(o[0]=s=>t.emit("back"))})):we("",!0),x("div",null,he(e.title),1)])}}const Ts=Object.assign(zs,{props:{showBack:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["back"],setup:Rs});var je=j(Ts,[["__scopeId","data-v-4f888f5e"]]),Mt=`/* purgecss start ignore */

.sky-renderer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.sky-background {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-repeat: no-repeat;
}

.sky-clouds {
  position: absolute;
}

.sky-cloud {
  position: absolute;
}

/* purgecss end ignore */
`,zt=`/* purgecss start ignore */

.text-index {
  word-wrap: break-word;
}

.text__effect {
  position: absolute;
  width: 100%;
  height: 100%;
}

.text__content {
  position: absolute; /* \u7528\u6765\u63D0\u5347 DOM \u5C42\u7EA7 + \u83B7\u53D6\u5185\u5BB9\u771F\u5B9E\u5BBD\u9AD8 */
}

/* purgecss end ignore */
`,Rt=`/* purgecss start ignore */

.cloud__image {
  height: 100%;
}

.image__content {
  display: block;
  width: 100%;
  height: 100%;
  -webkit-user-drag: none;
}

/* purgecss end ignore */
`;function Ze(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}var Ps=Ze(Mt)+Ze(zt)+Ze(Rt);const Os={key:0,class:"multiple-mask flex-center"},Bs={name:"BarColorPicker",inheritAttrs:!1};function Hs(e){const t=ee("sky"),o=H(!1),n=H(null);return ue(()=>{n.value=t.vm.subTree.children[0].el}),(s,l)=>{const a=P("SkyColorPicker"),i=P("SkyPopup");return E(),z("div",{class:"bar__color-picker",onPointerdown:l[2]||(l[2]=Ve(r=>o.value=!o.value,["stop"]))},[x("div",{class:"relative h-6 rounded cursor-pointer",style:F({background:s.$attrs.value})},[e.multiple?(E(),z("div",Os,"\u591A\u79CD\u989C\u8272")):we("",!0)],4),f(i,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=r=>o.value=r),width:256,onPointerdown:l[1]||(l[1]=Ve(()=>{},["stop"]))},{default:R(()=>[f(a,ce({"straw-el":n.value,"straw-css":b(Ps)},s.$attrs),null,16,["straw-el","straw-css"])]),_:1},8,["visible"])],32)}}const As=Object.assign(Bs,{props:{multiple:{type:Boolean,default:!1}},setup:Hs});var Tt=j(As,[["__scopeId","data-v-23d9899a"]]);const Ls={class:"flex justify-between items-center text-xs"},Ds=x("div",null,"\u5B57\u95F4\u8DDD",-1),Vs={class:"flex justify-between items-center text-xs mt-2"},Fs=x("div",null,"\u884C\u95F4\u8DDD",-1),js={name:"PopupSpacing"};function Ns(e,{emit:t}){const o=e,n=D({get:()=>o.letterSpacing,set:i=>{t("update:letterSpacing",i)}}),s=D({get:()=>o.lineHeight,set:i=>{t("update:lineHeight",i)}}),l=D(()=>o.fontSize>50?-50:-o.fontSize),a=D(()=>o.fontSize<50?50:o.fontSize);return(i,r)=>{const u=P("SkySlider"),d=P("SkyInputNumber"),g=P("SkyPopup");return E(),Z(g,ce({width:240},i.$attrs),{default:R(()=>[x("div",Ls,[Ds,f(u,{value:b(n),"onUpdate:value":r[0]||(r[0]=_=>vt(n)?n.value=_:null),min:b(l),max:b(a),"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),f(d,{value:Math.round(b(n)),size:"small",class:"w-12",min:b(l),max:b(a),onChange:r[1]||(r[1]=_=>n.value=_)},null,8,["value","min","max"])]),x("div",Vs,[Fs,f(u,{value:b(s),"onUpdate:value":r[2]||(r[2]=_=>vt(s)?s.value=_:null),min:.5,max:2.5,"show-tooltip":!1,class:"w-28 mx-2"},null,8,["value","min","max"]),f(d,{value:b(s),min:.5,max:2.5,decimal:2,step:.02,size:"small",class:"w-12",onChange:r[3]||(r[3]=_=>s.value=_)},null,8,["value","min","max","step"])])]),_:1},16)}}const Gs=Object.assign(js,{props:{letterSpacing:{type:Number,default:0},lineHeight:{type:Number,default:1},fontSize:{type:Number,required:!0}},emits:["update:letterSpacing","update:lineHeight"],setup:Ns}),Qe=vn.create();Qe.interceptors.response.use(e=>e.data);const qs="https://www.gaoding.com/api/v2",Us="https://fonter.dancf.com/",Ws=async e=>await Qe.get(`${qs}/fonts`,{params:{type:"font",page_size:100,page_num:e,region_id:1,biz_code:1,endpoint:4}});async function Ks(e){return await Qe.get(`${Us}/subset`,{params:re({from_site:"gaoding",type:"woff"},e),responseType:"blob"})}async function et(e){return new Promise((t,o)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=o,n.readAsDataURL(e)})}const Ys=e=>{if(typeof e!="string")return!1;const t="Arial";if(e.toLowerCase()==t.toLowerCase())return!0;const o="a",n=100,s=100,l=100,a=document.createElement("canvas"),i=a.getContext("2d");a.width=s,a.height=l,i.textAlign="center",i.fillStyle="black",i.textBaseline="middle";const r=u=>{i.clearRect(0,0,s,l),i.font=n+"px "+u+", "+t,i.fillText(o,s/2,l/2);const d=i.getImageData(0,0,s,l).data;return[].slice.call(d).filter(g=>g!=0)};return r(t).join("")!==r(e).join("")};function tt(e,t){const o=document.createElement("style");return o.id=e,o.innerHTML=`@font-face { font-family: "${e}"; src: local("${e}"), url("${t}"); }`,o}function Pt(){const e=[];return pe.state.clouds.filter(o=>o.type===ae.text).forEach(o=>{o.fontFamily&&!e.includes(o.fontFamily)&&e.push(o.fontFamily),o.texts.forEach(n=>{n.fontFamily&&!e.includes(n.fontFamily)&&e.push(n.fontFamily)})}),e}const Ae=yt("font",{state:()=>({list:[],download:{}}),actions:{async fetch(){this.list=[];const e=yn("SKY_FONTS",[]);if(e.value.length>0&&this.list.push(...e.value),this.list.length===0){for(let t=1;t<99;t+=1){const o=await Ws(t);if(this.list.push(...o),o.length<100)break}e.value=this.list}},async addFont2Style(e,t){if(this.download[e]||Ys(e))return;const n=await(await fetch(t,{headers:{responseType:"blob"}})).blob(),s=await et(n);this.download[e]=s,document.head.appendChild(tt(e,s))}}});function Xs(){const e=document.getSelection();let{anchorNode:t,anchorOffset:o,focusNode:n,focusOffset:s}=e;function l(){o=e.focusOffset,s=e.anchorOffset}let a=t==null?void 0:t.parentElement,i=n==null?void 0:n.parentElement;const r=a==null?void 0:a.parentElement,u=Array.from(r.children);let d=u.indexOf(a),g=u.indexOf(i);return d>g?(d=g,g=u.indexOf(a),a=i,i=t==null?void 0:t.parentElement,l()):d===g&&o>s&&l(),{selection:e,elTextContent:r,anchorEl:a,anchorElIndex:d,focusEl:i,focusElIndex:g,anchorOffset:o,focusOffset:s}}function nt(e,t,o){const n=re({},e),s=re({},e),l=re({},e);n.text=e.text.slice(0,t),s.text=e.text.slice(t,o),l.text=e.text.slice(o);const a=[];return t!==0&&a.push(n),a.push(s),o!==e.text.length&&a.push(l),a}function ot(e,t,o,n){const s=new Range;s.setStart(e,t),s.setEnd(o,n),window.getSelection().removeAllRanges(),window.getSelection().addRange(s)}function Js(){}function Se(e,t,o){return o===void 0&&(o=e[0][t]),e.some(n=>n[t]!==o)}function Ot(e,t,o){return o===void 0&&(o=e[0][t]),e.every(n=>n[t]===o)}const{toString:Zs,hasOwnProperty:Qs}=Object.prototype,el=e=>Zs.call(e).slice(8,-1),Bt=(e,t)=>Qs.call(e,t),Ne=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,9),Y=e=>el(e)==="Number"?`${e}px`:e,tl=(e,t)=>{Object.keys(e).forEach(o=>{Bt(t,o)&&(e[o]=t[o])})},nl=(e=0)=>new Promise(t=>setTimeout(t,e)),Ht=(e,t)=>e.filter(o=>!t.includes(o)),ol=e=>e.filter((t,o,n)=>n.indexOf(t)===o),sl=(e,t)=>e.length===t.length&&ol([...e,...t]).length===e.length,ll=(e,t)=>e/t,al=(e,t)=>e*t,ke=(e,t,o)=>al(ll(e,t),o),At=e=>e.metaKey||e.shiftKey||e.ctrlKey;const il={class:"body"},rl={class:"bar__font"},cl=["src"],ul={class:"bar bar-tool"},dl={class:"bar bar__color","data-sky-popup":""},fl={class:"bar bar-tool","data-sky-popup":""},pl={name:"ControlPanelCloudText"};function ml(e){const t=H(),o=H(),n=ee("sky"),{targetClouds:s}=n.runtime,[l]=s,a=Ae(),i=H(!1),r=xe({fontFamily:l.fontFamily,fontSize:l.fontSize,hasMultipleFontSize:Se(s,"fontSize"),fontWeight:l.fontWeight,fontStyle:l.fontStyle,textDecoration:l.textDecoration,textAlign:l.textAlign,color:l.color,hasMultipleColor:Se(s,"color"),writingMode:l.writingMode,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing});let u=n.birdVM[l.id],d=null;const g=D(()=>r.writingMode===te.v);bt(()=>{tl(r,l)}),ue(()=>{w(r.fontFamily)});function _(p,c,h){const C=r[p]===c&&h!=null?h:c;r[p]=C,s.forEach(S=>{S[p]=C})}function k(p,c,h,C){const $=Se(p,c,h)?h:C;r[c]=$,p.forEach(O=>{O[c]=$})}function M(p,c,h){if(!(d&&d.selection.isCollapsed)){if(s.length>1)_(p,c,h);else if(u.exposed.readonly.value)_(p,c,h),l.texts.forEach(C=>Reflect.deleteProperty(C,p));else if(d){const{elTextContent:C,anchorOffset:S,anchorEl:$,anchorElIndex:O,focusOffset:A,focusEl:T,focusElIndex:W}=d;if($===T){const ne=l.texts[O],[oe]=$.childNodes;if(!d.selection.isCollapsed)if(S===0&&A===oe.length)k([ne],p,c,h),ot(oe,0,oe,oe.length);else{const se=nt(ne,S,A);l.texts.splice(O,1,...se);const X=[];se.length===1?X.push(...se):S===0?X.push(se[0]):X.push(se[1]),k(X,p,c,h),Me(()=>{const ve=Array.from(C.children),Ee=O+(S===0?0:1),[ye]=ve[Ee].childNodes;ot(ye,0,ye,ye.length)})}}else{const ne=[];let oe=l.texts[W],se=nt(oe,0,A);ne.push(se[0]),l.texts.splice(W,1,...se);for(let X=O+1;X<W;X+=1)oe=l.texts[X],ne.push(oe);oe=l.texts[O],se=nt(oe,S,oe.text.length),ne.push(se[S===0?0:1]),l.texts.splice(O,1,...se),k(ne,p,c,h),Me(()=>{const X=Array.from(C.children),ve=O+(S===0?0:1),Ee=ve+(W-O-1)+(A===T.length?0:1),[ye]=X[ve].childNodes,[Ie]=X[Ee].childNodes;ot(ye,0,Ie,Ie.length)})}}}}function w(p){const c=a.list.find(S=>S.name===p);if(!c)return;const h=o.value.querySelector(".select__font-family").querySelector(".sky-input__inner"),C={backgroundImage:`url(${c.preview.url})`,backgroundSize:"80%",backgroundPosition:"12px center",backgroundRepeat:"no-repeat"};Object.assign(h.style,C)}function I(p){M("fontFamily",p),w(p);const c=a.list.find(h=>h.name===p);a.addFont2Style(c.name,c.content.woff)}function m(){_("writingMode",g.value?te.h:te.v),s.forEach(p=>{const{width:c,height:h}=p;p.width=h,p.height=c})}function v(p){_("letterSpacing",p),n.runtime.targetClouds.forEach(c=>{const h=n.birdVM[c.id].subTree.el.querySelector(".text__content");h.style.letterSpacing=`${p}px`,c.writingMode===te.h?c.height=h.clientHeight:c.writingMode===te.v&&(c.width=h.clientWidth)}),n.cloud.updateCloudsElementRect()}function y(p){_("lineHeight",p),n.runtime.targetClouds.forEach(c=>{const h=n.birdVM[c.id].subTree.el.querySelector(".text__content");h.style.lineHeight=p,c.writingMode===te.h?c.height=h.clientHeight:c.writingMode===te.v&&(c.width=h.clientWidth)}),n.cloud.updateCloudsElementRect()}return document.onselectionchange=()=>{if(u.exposed.readonly.value){d=null;return}d=Xs();const p=l.texts.slice(d.anchorElIndex,d.focusElIndex+1),[c]=p;Object.assign(r,{hasMultipleFontSize:Se(p,"fontSize"),fontWeight:Se(p,"fontWeight",700)?400:700,fontStyle:Se(p,"fontStyle","italic")?"normal":"italic",color:c.color||l.color,hasMultipleColor:Se(p,"color"),textDecoration:Ot(p,"textDecoration","underline")?"underline":Ot(p,"textDecoration","line-through")?"line-through":"none"})},(p,c)=>{const h=P("SkyOption"),C=P("SkySelect"),S=P("SkyInputNumber"),$=P("SkyTooltip"),O=P("svg-icon"),A=P("SkyButton");return E(),z("div",{ref:(T,W)=>{W.refRoot=T,o.value=T},class:"control-panel__cloud-text"},[f(je,{title:"\u6587\u5B57"}),x("div",il,[x("div",rl,[f(C,{ref:(T,W)=>{W.refSelectFontFamily=T,t.value=T},value:b(r).fontFamily,class:"select__font-family",onChange:I},{default:R(()=>[(E(!0),z(K,null,de(b(a).list,T=>(E(),Z(h,{key:T.id,label:T.name,value:T.name},{default:R(()=>[x("img",{src:T.preview.url,alt:""},null,8,cl)]),_:2},1032,["label","value"]))),128))]),_:1},8,["value"]),f(S,{class:"ml-2",value:Math.round(b(r).fontSize),onInput:c[0]||(c[0]=T=>M("fontSize",T)),onChange:c[1]||(c[1]=T=>M("fontSize",T))},null,8,["value"])]),x("div",ul,[f(A,{plain:"",class:G({active:b(r).fontWeight===700}),onClick:c[2]||(c[2]=T=>M("fontWeight",700,400))},{default:R(()=>[f($,{content:"\u52A0\u7C97",direction:"bottom"}),f(O,{filename:"bold"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).fontStyle==="italic"}),onClick:c[3]||(c[3]=T=>M("fontStyle","italic","normal"))},{default:R(()=>[f($,{content:"\u659C\u4F53",direction:"bottom"}),f(O,{filename:"italic"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).textDecoration==="underline"}),onClick:c[4]||(c[4]=T=>M("textDecoration","underline","none"))},{default:R(()=>[f($,{content:"\u4E0B\u5212\u7EBF",direction:"bottom"}),f(O,{filename:"underline"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).textDecoration==="line-through"}),onClick:c[5]||(c[5]=T=>M("textDecoration","line-through","none"))},{default:R(()=>[f($,{content:"\u5220\u9664\u7EBF",direction:"bottom"}),f(O,{filename:"deleteline"})]),_:1},8,["class"])]),x("div",{class:G(["bar bar-tool",{vertical:b(g)}])},[f(A,{plain:"",class:G({active:b(r).textAlign==="left"}),onClick:c[6]||(c[6]=T=>_("textAlign","left"))},{default:R(()=>[f($,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(O,{filename:"text-align-left"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).textAlign==="center"}),onClick:c[7]||(c[7]=T=>_("textAlign","center"))},{default:R(()=>[f($,{content:"\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(O,{filename:"align-center"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).textAlign==="right"}),onClick:c[8]||(c[8]=T=>_("textAlign","right"))},{default:R(()=>[f($,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(O,{filename:"text-align-right"})]),_:1},8,["class"]),f(A,{plain:"",class:G({active:b(r).textAlign==="justify"}),onClick:c[9]||(c[9]=T=>_("textAlign","justify"))},{default:R(()=>[f($,{content:"\u4E24\u7AEF\u5BF9\u9F50",direction:"bottom"}),f(O,{filename:"align-justify"})]),_:1},8,["class"])],2),x("div",dl,[f(Tt,{value:b(r).color,modes:["\u7EAF\u8272"],multiple:b(r).isMultipleColor,"onUpdate:value":c[10]||(c[10]=T=>M("color",T))},null,8,["value","multiple"])]),x("div",fl,[f(A,{plain:"",class:G({active:b(g)}),onClick:m},{default:R(()=>[f($,{content:"\u6587\u5B57\u7AD6\u7248",direction:"bottom"}),f(O,{filename:"writing-mode"})]),_:1},8,["class"]),f(A,{plain:"",onClick:c[11]||(c[11]=T=>i.value=!i.value)},{default:R(()=>[f($,{content:"\u95F4\u8DDD",direction:"bottom"}),f(O,{filename:"spacing"})]),_:1}),f(Gs,{visible:i.value,"onUpdate:visible":c[12]||(c[12]=T=>i.value=T),letterSpacing:b(r).letterSpacing,"onUpdate:letterSpacing":[c[13]||(c[13]=T=>b(r).letterSpacing=T),v],lineHeight:b(r).lineHeight,"onUpdate:lineHeight":[c[14]||(c[14]=T=>b(r).lineHeight=T),y],fontSize:b(r).fontSize},null,8,["visible","letterSpacing","lineHeight","fontSize"]),f(A,{plain:""},{default:R(()=>[f($,{content:"\u6587\u5B57\u53D8\u5F62",direction:"bottom"}),f(O,{filename:"text-distortion"})]),_:1})])])],512)}}const gl=Object.assign(pl,{setup:ml});var hl=j(gl,[["__scopeId","data-v-09cd8644"]]);const _l={class:"control-panel__cloud-image"},vl={class:"body"},yl=Q("\u66FF\u6362\u56FE\u7247"),bl={name:"ControlPanelCloudImage"};function wl(e){function t(){const o=document.createElement("input");o.type="file",o.click(),o.onchange=async n=>{const[s]=n.target.files;sky.runtime.targetClouds.forEach(l=>{l.src=URL.createObjectURL(s),l.mime=s.type,o.remove()})}}return(o,n)=>{const s=P("SkyButton");return E(),z("div",_l,[f(je,{title:"\u56FE\u7247"}),x("div",vl,[f(s,{onClick:t},{default:R(()=>[yl]),_:1})])])}}const Sl=Object.assign(bl,{setup:wl});const xl=e=>(ze("data-v-713a1b99"),e=e(),Re(),e),Cl={class:"control-panel__group"},kl={class:"body"},$l={class:"bar bar-tool mt-3"},El=xl(()=>x("div",{class:"h-4 w-px bg-gray-300"},null,-1)),Il={name:"ControlPanelGroup"};function Ml(e){const t=ee("sky"),o=D(()=>{var s;return t.runtime.targetClouds.length===1&&((s=t.runtime.targetClouds[0])==null?void 0:s.type)==="clouds"});function n(){o.value?t.cloud.unGroup():t.cloud.toGroup()}return(s,l)=>{const a=P("SkyButton"),i=P("SkyTooltip"),r=P("svg-icon");return E(),z("div",Cl,[f(je,{title:"\u7EC4\u5408"}),x("div",kl,[f(a,{class:"button__group",onClick:n},{default:R(()=>[Q(he(b(o)?"\u62C6\u5206":"\u6210")+"\u7EC4 ",1)]),_:1}),x("div",$l,[f(a,{plain:"",onClick:b(t).cloud.alignTop},{default:R(()=>[f(i,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-top"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:b(t).cloud.alignVerticalMiddle},{default:R(()=>[f(i,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:b(t).cloud.alignBottom},{default:R(()=>[f(i,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-bottom"})]),_:1},8,["onClick"]),El,f(a,{plain:"",onClick:b(t).cloud.alignLeft},{default:R(()=>[f(i,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-left"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:b(t).cloud.alignHorizontalMiddle},{default:R(()=>[f(i,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),f(a,{plain:"",onClick:b(t).cloud.alignRight},{default:R(()=>[f(i,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(r,{filename:"align-right"})]),_:1},8,["onClick"])])])])}}const zl=Object.assign(Il,{setup:Ml});var Lt=j(zl,[["__scopeId","data-v-713a1b99"]]);const st=yt("background",{state:()=>({type:"\u989C\u8272",color:"#ffffff00",image:""}),getters:{bgStyle:e=>({background:e.type==="\u989C\u8272"?e.color:`url(${e.image})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"})},actions:{setState(e){Object.assign(this.$state,e)}}});const lt=e=>(ze("data-v-a27faf08"),e=e(),Re(),e),Rl={class:"control-panel__default"},Tl={class:"body"},Pl={class:"panel-label"},Ol=lt(()=>x("span",null,"\u753B\u5E03\u5C3A\u5BF8",-1)),Bl=Q("\u7F16\u8F91"),Hl={class:"size"},Al=Q("\u5BBD"),Ll=lt(()=>x("i",{class:"w-2"},null,-1)),Dl=Q("\u9AD8"),Vl=lt(()=>x("div",{class:"panel-label"},[x("span",null,"\u753B\u5E03\u80CC\u666F")],-1)),Fl=Q("\u4E0A\u4F20\u80CC\u666F\u56FE"),jl={name:"ControlPanelDefault"};function Nl(e){const t=ee("sky"),o=st(),n=D(()=>`${parseInt(t.state.width/t.state.scale)}px`),s=D(()=>`${parseInt(t.state.height/t.state.scale)}px`);function l(i){o.type=i}function a(){const i=document.createElement("input");i.type="file",i.click(),i.onchange=async r=>{const[u]=r.target.files,d=new FileReader;d.onload=()=>{o.image=d.result},d.readAsDataURL(u)}}return(i,r)=>{const u=P("SkyButton"),d=P("SkyInput"),g=P("SkyTabPanel"),_=P("SkyTabs");return E(),z("div",Rl,[f(je,{title:"\u753B\u5E03"}),x("div",Tl,[x("div",Pl,[Ol,f(u,{size:"small",plain:""},{default:R(()=>[Bl]),_:1})]),x("div",Hl,[f(d,{value:b(n),readonly:""},{append:R(()=>[Al]),_:1},8,["value"]),Ll,f(d,{value:b(s),readonly:""},{append:R(()=>[Dl]),_:1},8,["value"])]),Vl,f(_,{value:b(o).type,"onUpdate:value":[r[1]||(r[1]=k=>b(o).type=k),l],class:"bg-tabs","data-sky-popup":""},{default:R(()=>[f(g,{class:"bar bar__color",label:"\u989C\u8272"},{default:R(()=>[f(Tt,{value:b(o).color,"onUpdate:value":r[0]||(r[0]=k=>b(o).color=k),"default-color":"#ffffff00",modes:["\u7EAF\u8272","\u6E10\u53D8"]},null,8,["value"])]),_:1}),f(g,{label:"\u56FE\u7247"},{default:R(()=>[f(u,{style:{height:"40px"},onClick:a},{default:R(()=>[Fl]),_:1})]),_:1})]),_:1},8,["value"])])])}}const Gl=Object.assign(jl,{setup:Nl});var ql=j(Gl,[["__scopeId","data-v-a27faf08"]]);const at=e=>(ze("data-v-32d25074"),e=e(),Re(),e),Ul=at(()=>x("div",{class:"title"},"\u753B\u5E03\u5BF9\u9F50",-1)),Wl={class:"flex justify-between items-center"},Kl=at(()=>x("div",{class:"h-4 w-px bg-gray-300"},null,-1)),Yl=at(()=>x("div",{class:"title mt-3"},"\u56FE\u5C42\u987A\u5E8F",-1)),Xl={class:"flex justify-between items-center"},Jl={class:"relative"},Zl={class:"layer-step"},Ql={name:"PopupLayer"};function ea(e){const t=e,o=ee("sky"),n=H(0),s=H([]),l=D(()=>s.value.length),a=D(()=>l.value===0?0:l.value-1);_e(()=>t.visible,d=>{if(!d)return;const g=o.cloud.getOverlappingClouds4Cloud(),[_,...k]=o.runtime.targetClouds;s.value=g.filter(M=>!k.includes(M)),n.value=s.value.findIndex(M=>M.id===_.id)});function i(d){d>n.value?o.cloud.moveUp():o.cloud.moveDown(),n.value=d}function r(){n.value<=0||i(n.value-1)}function u(){n.value>=a||i(n.value+1)}return(d,g)=>{const _=P("SkyTooltip"),k=P("svg-icon"),M=P("SkyButton"),w=P("SvgIcon"),I=P("SkySlider"),m=P("SkyPopup");return E(),Z(m,ce({class:"popup__layer",width:240,visible:e.visible},d.$attrs),{default:R(()=>[Ul,x("div",Wl,[f(M,{plain:"",onClick:b(o).cloud.alignEditorTop},{default:R(()=>[f(_,{content:"\u4E0A\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-top"})]),_:1},8,["onClick"]),f(M,{plain:"",onClick:b(o).cloud.alignEditorVerticalMiddle},{default:R(()=>[f(_,{content:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-vertical-middle"})]),_:1},8,["onClick"]),f(M,{plain:"",onClick:b(o).cloud.alignEditorBottom},{default:R(()=>[f(_,{content:"\u4E0B\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-bottom"})]),_:1},8,["onClick"]),Kl,f(M,{plain:"",onClick:b(o).cloud.alignEditorLeft},{default:R(()=>[f(_,{content:"\u5DE6\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-left"})]),_:1},8,["onClick"]),f(M,{plain:"",onClick:b(o).cloud.alignEditorHorizontalMiddle},{default:R(()=>[f(_,{content:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-horizontal-middle"})]),_:1},8,["onClick"]),f(M,{plain:"",onClick:b(o).cloud.alignEditorRight},{default:R(()=>[f(_,{content:"\u53F3\u5BF9\u9F50",direction:"bottom"}),f(k,{filename:"align-right"})]),_:1},8,["onClick"])]),Yl,x("div",Xl,[f(w,{filename:"layer-down",onClick:r}),x("div",Jl,[Oe(x("div",Zl,[(E(!0),z(K,null,de(b(a),v=>(E(),z("div",{key:v,style:F({left:`${v/b(a)*100}%`}),class:"absolute w-px h-full bg-gray-400"},null,4))),128))],512),[[Be,b(l)>1]]),f(I,{value:n.value,max:b(a),step:1,disabled:b(a)===0,"show-tooltip":!1,class:"w-36",onInput:i},null,8,["value","max","disabled"])]),f(w,{filename:"layer-up",onClick:u})])]),_:1},16,["visible"])}}const ta=Object.assign(Ql,{props:{visible:{type:Boolean,default:!1}},setup:ea});var na=j(ta,[["__scopeId","data-v-32d25074"]]);const oa={class:"control-panel__container"},sa={key:0,class:"py-4 border-t mx-4"},la={class:"bar mb-3"},aa=x("img",{src:"https://cdn.dancf.com/design/img/fill_opacity.f6330ad5.svg"},null,-1),ia={class:"bar bar-tool","data-sky-popup":""},ra={name:"ControlPanelContainer"};function ca(e){const t=ee("sky"),o={[ae.text]:hl,[ae.image]:Sl},n=H(!1),s=D(()=>{var k;return(k=t.runtime.targetClouds[0])!=null?k:{}}),l=D(()=>t.runtime.targetClouds.length===0?ql:t.runtime.targetClouds.length>1||s.value.type==="clouds"?Lt:o[s.value.type]),a=D(()=>t.runtime.targetClouds.length===0?"default":t.runtime.targetClouds.length>1?"group":t.runtime.targetClouds[0].id),i=D(()=>a.value==="default"),r=D(()=>t.runtime.targetClouds.length===1&&!t.cloud.isCloudsObject(s.value));function u(k){s.value.opacity=Ce(k/100,{decimal:2})}function d(){s.value.lock?t.cloud.unlock():t.cloud.lock()}function g(){t.cloud.copy(),t.cloud.paste()}function _(){t.cloud.delete()}return(k,M)=>{const w=P("SkySlider"),I=P("SkyInputNumber"),m=P("SkyTooltip"),v=P("svg-icon"),y=P("SkyButton");return E(),z("div",oa,[(E(),Z(Ke(b(l)),{key:b(a)})),b(i)?we("",!0):(E(),z("div",sa,[Oe(x("div",la,[aa,f(w,{value:b(s).opacity,"onUpdate:value":M[0]||(M[0]=p=>b(s).opacity=p),min:0,max:1,"show-tooltip":!1,class:"w-28"},null,8,["value"]),f(I,{value:Math.round(b(s).opacity*100),min:0,max:100,size:"small",class:"w-12",onChange:u},null,8,["value"])],512),[[Be,b(r)]]),x("div",ia,[f(y,{plain:"",onClick:d},{default:R(()=>[f(m,{content:b(s).lock?"\u89E3\u9501":"\u9501\u5B9A"},null,8,["content"]),f(v,{filename:b(s).lock?"locked":"unlock"},null,8,["filename"])]),_:1}),f(y,{plain:"",disabled:b(s).lock,onPointerdown:M[1]||(M[1]=Ve(p=>n.value=!n.value,["stop"]))},{default:R(()=>[f(m,{content:"\u56FE\u5C42\u987A\u5E8F"}),f(v,{filename:"layer"})]),_:1},8,["disabled"]),f(na,{visible:n.value,"onUpdate:visible":M[2]||(M[2]=p=>n.value=p)},null,8,["visible"]),f(y,{plain:"",disabled:b(s).lock,onClick:g},{default:R(()=>[f(m,{content:"\u590D\u5236",disabled:b(s).lock},null,8,["disabled"]),f(v,{filename:"copy"})]),_:1},8,["disabled"]),f(y,{plain:"",disabled:b(s).lock,onClick:_},{default:R(()=>[f(m,{content:"\u5220\u9664",disabled:b(s).lock},null,8,["disabled"]),f(v,{filename:"trash"})]),_:1},8,["disabled"])])]))])}}const ua=Object.assign(ra,{setup:ca}),da=e=>e.classList.contains("sky-cloud"),fa=e=>{var t;return!((t=e.parentElement)==null?void 0:t.classList.contains("sky-renderer"))},Ge=e=>e?e.classList.contains("sky-background"):!1,pa=e=>e.classList.contains("sky-cloud-lock"),Dt=e=>{for(;e&&!e.dataset.cloudId&&!da(e);)e=e.parentElement;return e},it=e=>(e=Dt(e),e&&(fa(e)&&e.parentElement?it(e.parentElement):e));const ma={name:"SkyEditor"};function ga(e,{expose:t}){const o=e,n=ee("sky");n.vm=Te();const s=H(),l=D(()=>({width:`${n.state.width}px`,height:`${n.state.height}px`})),a=H();ue(()=>{n.moveable.createInstance(a.value),n.selecto.createInstance(document.querySelector(n.options.selecto)),s.value.$el.addEventListener("mousedown",_)}),Pe(()=>{s.value.$el.removeEventListener("mousedown",_)}),_e([()=>n.state.clouds,()=>o.bgStyle],()=>{n.history.unshift()},{immediate:!0,deep:!0}),bt(()=>{n.state.bgStyle=o.bgStyle});let i=null,r=null,u=!1;async function d(){u=!0;const[k]=r;!k||Ge(k)||pa(k)||(await n.moveable.setTarget(r),n.moveable.instance.dragStart(i),console.log("mmousemove"))}async function g(k){u||document.removeEventListener("mousemove",d),u?u=!1:(await n.moveable.setTarget(r),n.cloud.setSelectCloud(k)),i=null,r=null}function _(k){i=k,r=n.moveable.getTarget(k),document.addEventListener("mousemove",d,{once:!0}),document.addEventListener("mouseup",g,{once:!0})}return t({elSkyRenderer:s}),(k,M)=>{const w=P("SkyRenderer"),I=P("ControlPanelContainer");return E(),z("div",{ref:(m,v)=>{v.elRoot=m,a.value=m},class:"sky-editor",style:F(b(l))},[f(w,{ref:(m,v)=>{v.elSkyRenderer=m,s.value=m},state:b(n).state},null,8,["state"]),f(I,{class:"sky-control-panel"})],4)}}const ha=Object.assign(ma,{props:{bgStyle:Object},setup:ga});var Vt=j(ha,[["__scopeId","data-v-756bef5c"]]);const Ft="sky-cloud-lock",rt=["nw","ne","sw","se"],jt=e=>({width:Y(e.width),height:Y(e.height),top:Y(e.top),left:Y(e.left),transform:e.transform}),_a=["data-cloud-id","data-cloud-type"],va=x("i",{class:"border-before"},null,-1),ya={name:"Cloud",inheritAttrs:!1};function ba(e){const t=e,o=ee("sky"),n=ee("SkyCloudComponents"),s=H(),l=H(),a=D(()=>({opacity:t.cloud.opacity}));ue(()=>{const u=Te();o.cloudVM[t.cloud.id]=u,o.birdVM[t.cloud.id]=u.subTree.children[0].component,Object.assign(s.value.style,jt(t.cloud))}),Pe(()=>{Reflect.deleteProperty(o.cloudVM,t.cloud.id),Reflect.deleteProperty(o.birdVM,t.cloud.id)});function i(u){return{[Ft]:u.lock}}function r(u){return n[u]}return(u,d)=>(E(),z("div",{ref:(g,_)=>{_.elRoot=g,s.value=g},class:G(["sky-cloud",i(e.cloud)]),style:F(b(a)),"data-cloud-id":e.cloud.id,"data-cloud-type":e.cloud.type},[(E(),Z(Ke(r(e.cloud.type)),ce({ref:(g,_)=>{_.elCloud=g,l.value=g},cloud:e.cloud,class:"sky-bird"},u.$attrs),null,16,["cloud"])),va],14,_a))}const Nt=Object.assign(ya,{props:{cloud:{type:Object,require:!0,default:()=>({})}},setup:ba}),wa=["data-cloud-id"],Sa=x("i",{class:"border-before"},null,-1),xa={name:"Clouds",inheritAttrs:!1};function Ca(e,{expose:t}){const o=e,n=ee("sky"),s={moveable:{renderDirections:[...rt],keepRatio:[...rt]}},l=H();ue(()=>{const i=Te();n.cloudVM[o.cloud.id]=i,n.birdVM[o.cloud.id]=i,Object.assign(l.value.style,jt(o.cloud))}),Pe(()=>{Reflect.deleteProperty(n.cloudVM,o.cloud.id),Reflect.deleteProperty(n.birdVM,o.cloud.id)});function a(i){return{[Ft]:i.lock}}return t({skyHooks:s}),(i,r)=>{const u=P("Clouds",!0);return E(),z("div",{ref:(d,g)=>{g.elRoot=d,l.value=d},class:G([a(e.cloud),"sky-cloud sky-clouds sky-bird"]),"data-cloud-id":e.cloud.id},[x("div",null,[(E(!0),z(K,null,de(e.cloud.clouds,d=>(E(),z(K,{key:d.id},[d.type==="clouds"?(E(),Z(u,ce({key:0,cloud:d},i.$attrs),null,16,["cloud"])):(E(),Z(Nt,ce({key:1,cloud:d},i.$attrs),null,16,["cloud"]))],64))),128))]),Sa],10,wa)}}const ka=Object.assign(xa,{props:{cloud:{type:Object,required:!0}},setup:Ca}),$a={class:"sky-renderer"},Ea={name:"SkyRenderer",inheritAttrs:!1};function Ia(e){const t=e;function o(n){return n.type==="clouds"?ka:Nt}return(n,s)=>(E(),z("div",$a,[x("div",{class:"sky-background",style:F(t.state.bgStyle)},null,4),(E(!0),z(K,null,de(t.state.clouds,l=>(E(),Z(Ke(o(l)),ce({key:l.id,cloud:l},n.$attrs),null,16,["cloud"]))),128))]))}const Gt=Object.assign(Ea,{props:{state:Object},setup:Ia}),Ma={install(e,t){e.component(Gt.name,Gt),e.provide("SkyCloudComponents",t)}};function za(e){const t={};return t.zoom=(o=1)=>{if(o===0||o===e.state.scale)return;const n=s=>{s.forEach(async l=>{const a=ke(l.width,e.state.scale,o),i=ke(l.height,e.state.scale,o),r=ke(l.top,e.state.scale,o),u=ke(l.left,e.state.scale,o);l.width=a,l.height=i,l.top=r,l.left=u,l.clouds&&l.clouds.length>0&&n(l.clouds)})};n(e.state.clouds),e.cloud.updateCloudsElementRect(e.state.clouds),e.state.width=ke(e.state.width,e.state.scale,o),e.state.height=ke(e.state.height,e.state.scale,o),setTimeout(()=>{e.moveable.instance.updateRect()})},t}function Ra(e){const t={};t.getClouds=()=>{const{scale:n,clouds:s}=e.state,l=JSON.parse(JSON.stringify(s)),a=i=>{i.forEach(r=>{r.top=r.top/n,r.left=r.left/n,r.width=r.width/n,r.height=r.height/n,r.clouds&&r.clouds.length>0&&a(r.clouds)})};return a(l),l},t.getOverlappingClouds4Point=n=>{const{clientX:s,clientY:l}=n,a=i=>{const r=e.cloud.queryCloudElementById(i.id),u=r==null?void 0:r.getBoundingClientRect();if(!u)return!1;const d=s>=u.left&&s<=u.right,g=l>=u.top&&l<=u.bottom;return d&&g};return e.state.clouds.filter(a)},t.updateCloudsElementRect=(n=e.runtime.targetClouds)=>{n.forEach(s=>{const l=e.cloud.queryCloudElementById(s.id);l.style.top=Y(s.top),l.style.left=Y(s.left),l.style.width=Y(s.width),l.style.height=Y(s.height),e.moveable.instance.updateTarget(),s.clouds&&s.clouds.length>0&&t.updateCloudsElementRect(s.clouds)}),e.moveable.instance.updateRect()},t.getOverlappingClouds4Cloud=()=>{const n=e.moveable.instance.getRect(),s=n.left,l=n.left+n.width,a=n.top,i=n.top+n.height,r=g=>g>=s&&g<=l,u=g=>g>=a&&g<=i,d=(g,_)=>r(g)&&u(_);return e.state.clouds.filter(({top:g,left:_,width:k,height:M})=>{const w=_,I=_+k,m=g,v=g+M;return d(w,m)||d(I,m)||d(w,v)||d(I,v)||m<a&&v>i&&r(w)||w<s&&I>l&&u(m)})},t.findCloudById=(n,s=e.state.clouds)=>{if(!n)return;let l=s.find(a=>a.id===n);if(l)return l;for(let a=0;a<s.length;a+=1)if(Array.isArray(s[a].clouds)&&(l=t.findCloudById(n,s[a].clouds),l))return l},t.findCloudByElement=n=>{const s=it(n);if(!!s)return t.findCloudById(s.dataset.cloudId)},t.queryCloudElementById=n=>e.vm.subTree.el.querySelector(`[data-cloud-id="${n}"]`);const o=n=>{if(!n)return null;const[s]=e.runtime.targetClouds;if(!s||!t.isCloudsObject(s)||At(n))return null;const l=Dt(n.target);if(!l)return null;const a=t.findCloudById(l.dataset.cloudId,s.clouds);return(a==null?void 0:a.pid)?a:null};return t.setSelectCloud=n=>{var a,i,r,u,d,g,_,k,M,w,I;const s=o(n),l=e.runtime.selectCloud;l!==s&&(e.runtime.selectCloud=s,(a=e.vm.subTree.el.querySelector(".sky-cloud-select"))==null||a.classList.remove("sky-cloud-select"),l&&((g=(d=(u=(r=(i=e.cloudVM[l.id])==null?void 0:i.exposed)==null?void 0:r.skyHooks)==null?void 0:u.moveable)==null?void 0:d.onLeaveSelect)==null||g.call(d)),s&&((_=e.cloud.queryCloudElementById(s.id))==null||_.classList.add("sky-cloud-select"),(I=(w=(M=(k=e.cloudVM[s.id].exposed)==null?void 0:k.skyHooks)==null?void 0:M.moveable)==null?void 0:w.onEnterSelect)==null||I.call(w)))},t.create=n=>{var s,l;return n=JSON.parse(JSON.stringify(n)),Object.assign({pid:"",width:100,height:100,top:e.state.height/2-((s=n==null?void 0:n.height)!=null?s:0/2),left:e.state.width/2-((l=n==null?void 0:n.width)!=null?l:0/2),angle:0,lock:!1,opacity:1,transform:""},n,{id:Ne()})},t.push=async(...n)=>{e.state.clouds.push(...n),await nl(),await e.moveable.setTarget(n.map(s=>e.cloud.queryCloudElementById(s.id)))},t.lock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!0}),e.moveable.updateState())},t.unlock=()=>{e.runtime.targetClouds.length!==0&&(e.runtime.targetClouds.forEach(n=>{n.lock=!1}),e.moveable.updateState())},t.delete=async({force:n=!1}={})=>{if(e.runtime.targetClouds.length===0)return;const[s]=e.runtime.targetClouds;if(s.lock&&!n)return;const l=e.runtime.targetClouds.map(a=>a.id);await e.moveable.setTarget([]),l.forEach(a=>{const i=e.state.clouds.findIndex(r=>r.id===a);e.state.clouds.splice(i,1)})},t.copy=()=>{if(e.runtime.targetClouds.length!==0)return e.runtime.clipboard=JSON.stringify(e.runtime.targetClouds),e.runtime.clipboard},t.paste=async()=>{if(!e.runtime.clipboard)return;const n=r=>{var u;(u=r.clouds)==null||u.forEach(d=>{d.pid=r.id,d.id=Ne(),t.isCloudsObject(d)&&n(d)})},s=JSON.parse(e.runtime.clipboard),l={top:Math.min(...s.map(r=>r.top)),left:Math.min(...s.map(r=>r.left))},a=e.runtime.targetClouds.length>0?e.moveable.instance.getRect():l,i={top:a.top-l.top,left:a.left-l.left};s.forEach(r=>{r.id=Ne(),r.top+=i.top+10,r.left+=i.left+10,t.isCloudsObject(r)&&n(r)}),await t.push(...s),t.copy()},t.cut=()=>{!t.copy()||t.delete()},t.toGroup=async()=>{const{top:n,left:s,width:l,height:a}=e.moveable.instance.getRect(),i=[...e.runtime.targetClouds],r=Ne();await t.delete({force:!0}),i.forEach(u=>{u.pid=r,u.top=u.top-n,u.left=u.left-s}),await t.push({id:r,top:n,left:s,width:l,height:a,clouds:i,pid:"",type:"clouds",lock:!1,transform:""})},t.unGroup=async()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const{clouds:s,top:l,left:a}=n[0];!s||(await t.delete({force:!0}),s.forEach(i=>{i.pid="",i.top=i.top+l,i.left=i.left+a}),t.push(...s))},t.moveTop=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;n.push(...s),s.forEach(l=>{const a=n.findIndex(i=>i.id===l.id);n.splice(a,1)})},t.moveUp=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s.slice(-1),a=t.getOverlappingClouds4Cloud(),i=a.findIndex(d=>d.id===l.id);let r;i+1>=a.length?r=l:r=a[i+1];const u=n.findIndex(d=>d.id===r.id);n.splice(u+1,0,...s),s.forEach(d=>{const g=n.findIndex(_=>_.id===d.id);n.splice(g,1)})},t.moveDown=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime,[l]=s,a=t.getOverlappingClouds4Cloud(),i=a.findIndex(d=>d.id===l.id);let r;i===0?r=l:r=a[i-1];const u=n.findIndex(d=>d.id===r.id);s.forEach(d=>{const g=n.findIndex(_=>_.id===d.id);n.splice(g,1)}),n.splice(u,0,...s)},t.moveBottom=()=>{const{clouds:n}=e.state,{targetClouds:s}=e.runtime;s.reverse().forEach(l=>{const a=n.findIndex(i=>i.id===l.id);n.splice(a,1)}),n.unshift(...s.reverse())},t.isCloudsObject=n=>n.type==="clouds"&&Reflect.has(n,"clouds"),t.alignTop=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.top));n.forEach(l=>{l.top=s}),e.cloud.updateCloudsElementRect()},t.alignVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(i=>i.top)),l=Math.max(...n.map(i=>i.top+i.height)),a=s+(l-s)/2;n.forEach(i=>{i.top=a-i.height/2}),e.cloud.updateCloudsElementRect()},t.alignBottom=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.top+l.height));n.forEach(l=>{l.top=s-l.height}),e.cloud.updateCloudsElementRect()},t.alignHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(i=>i.left)),l=Math.max(...n.map(i=>i.left+i.width)),a=s+(l-s)/2;n.forEach(i=>{i.left=a-i.width/2}),e.cloud.updateCloudsElementRect()},t.alignLeft=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.min(...n.map(l=>l.left));n.forEach(l=>{l.left=s}),e.cloud.updateCloudsElementRect()},t.alignRight=()=>{const{targetClouds:n}=e.runtime;if(n.length<=1)return;const s=Math.max(...n.map(l=>l.left+l.width));n.forEach(l=>{l.left=s-l.width}),e.cloud.updateCloudsElementRect()},t.alignEditorTop=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=0}),e.cloud.updateCloudsElementRect())},t.alignEditorVerticalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.height/2;n.forEach(l=>{l.top=s-l.height/2}),e.cloud.updateCloudsElementRect()},t.alignEditorBottom=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.top=e.state.height-s.height}),e.cloud.updateCloudsElementRect())},t.alignEditorLeft=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=0}),e.cloud.updateCloudsElementRect())},t.alignEditorHorizontalMiddle=()=>{const{targetClouds:n}=e.runtime;if(n.length===0)return;const s=e.state.width/2;n.forEach(l=>{l.left=s-l.width/2}),e.cloud.updateCloudsElementRect()},t.alignEditorRight=()=>{const{targetClouds:n}=e.runtime;n.length!==0&&(n.forEach(s=>{s.left=e.state.width-s.width}),e.cloud.updateCloudsElementRect())},t}const Ta=(e=0)=>new Promise(t=>setTimeout(t,e)),Pa={"-1,-1":"nw","0,-1":"n","1,-1":"ne","1,0":"e","1,1":"se","0,1":"s","-1,1":"sw","-1,0":"w"},Oa=["n","nw","ne","s","se","sw","e","w"],Ba=e=>{const{top:t,left:o,width:n,height:s}=e,l=o+n,a=t+s;return{pos1:[o,t],pos2:[l,t],pos3:[o,a],pos4:[l,a]}};function Ha(e){const t={};t.updateState=async()=>{var p,c,h,C,S;const{target:w}=t.instance;if(!Array.isArray(w)||w.length===0)return;const[I]=w,m=e.cloud.findCloudById(I.dataset.cloudId),v=m?!m.lock:!1;t.instance.draggable=v,t.instance.resizable=v,t.instance.rotatable=v,t.instance.origin=v,m?(w.length>1?t.instance.renderDirections=rt:t.instance.renderDirections=(S=(C=(h=(c=(p=e.birdVM[I.dataset.cloudId])==null?void 0:p.exposed)==null?void 0:c.skyHooks)==null?void 0:h.moveable)==null?void 0:C.renderDirections)!=null?S:Oa,t.instance.passDragArea=!v):t.instance.passDragArea=!0;const y=[];(m==null?void 0:m.lock)&&y.push("lock"),t.instance.className=y.join(" ")},t.getTarget=w=>{const{target:I}=t.instance;if(!Array.isArray(I))return[];let m=[...I];const v=Ge(w.target);let y=null;if(v)y=w.target;else if(y=it(w.target),!y)return[];if(At(w)){if(v)return I;if(Ge(I[0])&&y)return[y];const p=e.cloud.findCloudByElement(w.target);if(!p)return[];if(p.lock||e.runtime.targetClouds[0].lock)return I;const c=m.findIndex(h=>h===y);c<0?m.push(y):m.splice(c,1)}else m=[y];return m},t.setTarget=async w=>{const I=t.instance.target;if(w){if(!Array.isArray(I)||sl(w,I))return;t.instance.target=w,await Ta();const m=w.map(p=>e.cloud.findCloudById(p.dataset.cloudId));e.runtime.targetClouds=e.state.clouds.filter(p=>m.includes(p)),e.cloud.setSelectCloud(null),Ht(I,w).forEach(p=>{var h,C,S,$;const c=e.birdVM[p.dataset.cloudId];($=(S=(C=(h=c==null?void 0:c.exposed)==null?void 0:h.skyHooks)==null?void 0:C.moveable)==null?void 0:S.onLeaveTarget)==null||$.call(S)}),Ht(w,I).forEach(p=>{var h,C,S,$;const c=e.birdVM[p.dataset.cloudId];($=(S=(C=(h=c==null?void 0:c.exposed)==null?void 0:h.skyHooks)==null?void 0:C.moveable)==null?void 0:S.onEnterTarget)==null||$.call(S)}),e.state.clouds.forEach(p=>{var h,C,S,$;const c=e.birdVM[p.id];($=(S=(C=(h=c==null?void 0:c.exposed)==null?void 0:h.skyHooks)==null?void 0:C.moveable)==null?void 0:S.onChangeTarget)==null||$.call(S)})}else{if(t.instance.target=[],!Array.isArray(I))return;I.forEach(m=>{var y,p,c,h;const v=e.birdVM[m.dataset.cloudId];(h=(c=(p=(y=v==null?void 0:v.exposed)==null?void 0:y.skyHooks)==null?void 0:p.moveable)==null?void 0:c.onLeaveTarget)==null||h.call(c)})}t.updateState()};const o=()=>{const{target:w}=t.instance;if(!Array.isArray(w))return;const I=t.instance.getRect(),m={pos1:I.pos1,pos2:I.pos2,pos3:I.pos3,pos4:I.pos4},v=[];e.state.clouds.forEach(y=>{if(w.findIndex(S=>S.dataset.cloudId===y.id)>=0)return;const c=Ba(y),h=[];Object.values(m).forEach(S=>{Object.values(c).forEach($=>{const O=Math.abs(S[0]-$[0]),A=Math.abs(S[1]-$[1]);h.push(Math.sqrt(O*O+A*A))})});const C=Math.min(...h);Bt(y,"minDistance")?y.minDistance=C:Object.defineProperty(y,"minDistance",{value:C,writable:!0}),v.push(y)}),v.sort((y,p)=>y.minDistance-p.minDistance),t.instance.elementGuidelines=v.slice(0,5).map(y=>e.cloud.queryCloudElementById(y.id))},n=w=>{const{target:I,top:m,left:v}=w;I.style.top=Y(m),I.style.left=Y(v);const y=e.state.clouds.find(p=>p.id===I.dataset.cloudId);y.top=m,y.left=v,o()},s=w=>{w.events.forEach(n)},l=w=>{var p,c,h,C,S,$,O,A,T,W;const{target:I,datas:m,direction:v}=w,y=e.cloud.findCloudById(I.dataset.cloudId);!y||(m.targetCloud=y,m.startTop=y.top,m.startLeft=y.left,m.startWidth=y.width,m.startHeight=y.height,m.isClouds=e.cloud.isCloudsObject(y),m.birdVM=e.birdVM[y.id],t.instance.keepRatio=(S=(C=(h=(c=(p=m.birdVM)==null?void 0:p.exposed)==null?void 0:c.skyHooks)==null?void 0:h.moveable)==null?void 0:C.keepRatio)==null?void 0:S.includes(Reflect.get(Pa,v.join())),(W=(T=(A=(O=($=m.birdVM)==null?void 0:$.exposed)==null?void 0:O.skyHooks)==null?void 0:A.moveable)==null?void 0:T.onResizeStart)==null||W.call(T,w))},a=w=>{var c,h,C,S,$;const{target:I,width:m,height:v,drag:y,datas:p}=w;p.scale=[m/p.startWidth,v/p.startHeight],I.style.width=Y(m),I.style.height=Y(v),p.targetCloud.width=m,p.targetCloud.height=v,p.isClouds&&(I.firstElementChild.style.transform=`scale(${p.scale[0]}, ${p.scale[1]})`,I.firstElementChild.style.transformOrigin="left top"),($=(S=(C=(h=(c=p.birdVM)==null?void 0:c.exposed)==null?void 0:h.skyHooks)==null?void 0:C.moveable)==null?void 0:S.onResize)==null||$.call(S,w),n(y)},i=w=>{var y,p,c,h,C;const{target:I,datas:m}=w,v=S=>{S.forEach($=>{var A,T,W;$.top=$.top*m.scale[1],$.left=$.left*m.scale[0],$.width=$.width*m.scale[0],$.height=$.height*m.scale[1];const O=e.cloud.queryCloudElementById($.id);if(!!O)if(O.style.top=Y($.top),O.style.left=Y($.left),O.style.width=Y($.width),O.style.height=Y($.height),$.clouds)v($.clouds);else{const ne=e.birdVM[$.id];(W=(T=(A=ne==null?void 0:ne.exposed)==null?void 0:A.moveable)==null?void 0:T.onResizeEndInGroup)==null||W.call(T,w)}})};m.isClouds&&(I.firstElementChild.style.transform="",I.firstElementChild.style.transformOrigin="",v(m.targetCloud.clouds)),(C=(h=(c=(p=(y=m.birdVM)==null?void 0:y.exposed)==null?void 0:p.skyHooks)==null?void 0:c.moveable)==null?void 0:h.onResizeEnd)==null||C.call(h,w)},r=w=>{w.events.forEach(l),e.moveable.instance.keepRatio=!0},u=w=>{w.events.forEach(a)},d=w=>{const{target:I,drag:m,absoluteRotate:v}=w;I.style.transform=m.transform;const y=e.state.clouds.find(p=>p.id===I.dataset.cloudId);!y||(y.transform=m.transform,y.rotate=v)},g=w=>{w.events.forEach(d)},_=()=>{e.history.disable=!0},k=w=>{e.history.disable=!1,!!w.isDrag&&e.history.unshift()},M=w=>{var v,y,p,c;const I=t.getTarget(w.inputEvent);t.setTarget(I),e.cloud.setSelectCloud(w.inputEvent);const m=e.birdVM[w.target.dataset.cloudId];(c=(p=(y=(v=m==null?void 0:m.exposed)==null?void 0:v.skyHooks)==null?void 0:y.moveable)==null?void 0:p.onClick)==null||c.call(p,w.inputEvent)};return t.createInstance=w=>{window.moveableInstance=t.instance=new bn(w,{target:[],snappable:!0,snapCenter:!0,dragArea:!0,horizontalGuidelines:[0,w.offsetWidth],verticalGuidelines:[0,w.offsetHeight]}),t.instance.on("drag",n),t.instance.on("dragGroup",s),t.instance.on("resizeStart",l),t.instance.on("resize",a),t.instance.on("resizeEnd",i),t.instance.on("resizeGroupStart",r),t.instance.on("resizeGroup",u),t.instance.on("rotate",d),t.instance.on("rotateGroup",g),t.instance.on("renderStart",_),t.instance.on("renderEnd",k),t.instance.on("renderGroupStart",_),t.instance.on("renderGroupEnd",k),t.instance.on("click",M),t.instance.on("clickGroup",M),t.updateState()},t}function Aa(e){let t=!1;const o={instance:null};return o.createInstance=i=>{o.instance=new wn({container:i,selectableTargets:[".sky-cloud"],selectByClick:!1,selectFromInside:!1,hitRate:0,getElementRect:Sn}),o.instance.on("selectStart",n),o.instance.on("select",a)},new Proxy(o,{get(i,r){return Reflect.has(i,r)?Reflect.get(i,r):Reflect.get(o.instance,r)},set(i,r,u){return Reflect.has(i,r)?Reflect.set(i,r,u):Reflect.set(i.instance,r,u),!0}});function n(i){const r=document.querySelector(".moveable-control-box"),u=document.querySelector(".sky-control-panel");if((r==null?void 0:r.contains(i.inputEvent.target))||(u==null?void 0:u.contains(i.inputEvent.target)))return i.stop();document.addEventListener("mousemove",s,{once:!0}),document.addEventListener("mouseup",l,{once:!0})}async function s(){t=!0,await e.moveable.setTarget([])}async function l(i){if(!t){if(document.removeEventListener("mousemove",s),Ge(i.target))return;await e.moveable.setTarget([])}t=!1}async function a(i){console.log("onSelect"),await e.moveable.setTarget([...i.selected])}}let qt;function La(e){const t={stacks:[],pointer:0,disable:!1,delay:500},o=n=>{t.pointer=n;const s=JSON.parse(t.stacks[n]);!s||(t.disable=!0,Object.assign(e.state,s.state),Object.assign(e.runtime,s.runtime),setTimeout(async()=>{const l=s.runtime.targetClouds.map(a=>e.cloud.queryCloudElementById(a.id));await e.moveable.setTarget(l),e.cloud.updateCloudsElementRect(s.state.clouds),t.disable=!1}))};return t.unshift=()=>{t.disable||(clearTimeout(qt),qt=setTimeout(()=>{t.pointer>0&&t.stacks.splice(0,t.pointer),t.stacks.unshift(JSON.stringify({state:e.state,runtime:e.runtime})),t.pointer>0&&(t.pointer=0);const{maxHistoryStack:n}=e.options;n&&t.stacks.length>n&&t.stacks.pop()},t.delay))},t.back=()=>{const n=t.pointer+1;n>=t.stacks.length||o(n)},t.forward=()=>{const n=t.pointer-1;n<0||o(n)},t}function Da(e){var o;e=re({maxHistoryStack:20},e);const t={options:e,vm:null,cloudVM:{},birdVM:{}};return t.state={width:800,height:800,scale:1,bgStyle:{},clouds:[]},t.runtime={targetClouds:[],selectCloud:null,clipboard:""},t.editor=za(t),t.cloud=Ra(t),t.moveable=Ha(t),t.selecto=Aa(t),t.history=La(t),t.setState=async n=>{Reflect.has(n,"width")&&(t.moveable.instance.verticalGuidelines=[0,n.width]),Reflect.has(n,"height")&&(t.moveable.instance.horizontalGuidelines=[0,n.height]),Reflect.has(n,"scale")&&t.editor.zoom(n.scale),Reflect.has(n,"clouds")&&await t.moveable.setTarget([]),Object.assign(t.state,n)},(o=e.initMousetrap)==null||o.call(e,t),t}const Va={install(e,t,o){t.state=xe(t.state),t.runtime=xe(t.runtime),e.use(Ma,o.components),e.component(Vt.name,Vt),e.provide("sky",t),o.ControlPanelContainer&&e.component(o.ControlPanelContainer.name,o.ControlPanelContainer)}},ie=navigator.userAgent.indexOf("Mac")>=0,Ut="SKY_DATA",Fa=()=>{const e=localStorage.getItem(Ut);if(!!e)return JSON.parse(e)},Wt=e=>{localStorage.setItem(Ut,JSON.stringify(e))};function ja(e){q.bind("up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-1},!0)}),q.bind("shift+up",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:-10},!0)}),q.bind(`${ie?"command":"ctrl"}+up`,t=>{t.preventDefault(),e.cloud.moveUp()}),q.bind(`${ie?"command":"ctrl"}+shift+up`,t=>{t.preventDefault(),e.cloud.moveTop()}),q.bind("right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:1},!0)}),q.bind("shift+right",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:10},!0)}),q.bind(`${ie?"command":"ctrl"}+right`,t=>{t.preventDefault()}),q.bind("down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:1},!0)}),q.bind("shift+down",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaY:10},!0)}),q.bind(`${ie?"command":"ctrl"}+down`,t=>{t.preventDefault(),e.cloud.moveDown()}),q.bind(`${ie?"command":"ctrl"}+shift+down`,t=>{t.preventDefault(),e.cloud.moveBottom()}),q.bind("left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-1},!0)}),q.bind("shift+left",t=>{t.preventDefault(),e.moveable.instance.request("draggable",{deltaX:-10},!0)}),q.bind(`${ie?"command":"ctrl"}+left`,t=>{t.preventDefault()}),q.bind(["backspace","del"],t=>{t.preventDefault(),e.cloud.delete()}),q.bind(`${ie?"command":"ctrl"}+c`,t=>{t.preventDefault(),e.cloud.copy()}),q.bind(`${ie?"command":"ctrl"}+v`,t=>{t.preventDefault(),e.cloud.paste()}),q.bind(`${ie?"command":"ctrl"}+x`,t=>{t.preventDefault(),e.cloud.cut()}),q.bind(`${ie?"command":"ctrl"}+z`,t=>{t.preventDefault(),e.history.back()}),q.bind(`${ie?"command":"ctrl"}+shift+z`,t=>{t.preventDefault(),e.history.forward()}),q.bind(`${ie?"command":"ctrl"}+s`,t=>{t.preventDefault(),Wt(e.state)}),q.bind(`${ie?"command":"ctrl"}+a`,async t=>{t.preventDefault();const o=document.querySelector(".sky-editor__app .sky-renderer");if(!o)return;const n=Array.from(o.children).filter(s=>s.dataset.cloudId);await e.moveable.setTarget(n)})}const pe=Da({initMousetrap:ja,selecto:".app-main"});window.sky=pe;var Na={install(e){e.use(Va,pe,{ControlPanelContainer:ua,components:{[ae.text]:bs,[ae.image]:Is}})}};async function Ga(e){return await window.PSD.fromURL(e)}function qa(e){const[t,o,n]=e;let[,,,s]=e;return s>1&&(s=s/255),[t,o,n,s]}function Ua(e){const[t,o,n,s]=e;return[s*255,n*255,o*255,t]}const Wa={InsF:"inner",CtrF:"center",OutF:"outer"};function Ka({xx:e,xy:t}){const o=Math.sqrt(e*e+t*t),n=Math.asin(t/o)*180/Math.PI;return{scale:o,angle:n}}function Ya({xx:e,xy:t,yx:o,yy:n,tx:s,ty:l}){return{a:e,b:t,c:o,d:n,tx:s,ty:l}}function Xa(e,t){const{objectEffects:o,typeTool:n}=t.adjustments,{StyleRun:s}=n.engineData.EngineDict;let l=0;const a=s.RunArray.map((d,g)=>{const _=s.RunLengthArray[g],k={text:e.text.value.substr(l,_),fontSize:d.StyleSheet.StyleSheetData.FontSize},{FillColor:M}=d.StyleSheet.StyleSheetData;return M&&(k.color=Fe(...Ua(M.Values))),l+=_,k}),i=[],r=[];if(o){const{FrFX:d,DrSh:g}=o.data;d&&i.push({type:Reflect.get(Wa,d.Styl.value),width:d["Sz  "].value,color:[d["Clr "]["Rd  "],d["Clr "]["Grn "],d["Clr "]["Bl  "],d.Opct.value/100]}),g&&r.push({color:[g["Clr "]["Rd  "],g["Clr "]["Grn "],g["Clr "]["Bl  "],g.Opct.value/100],distance:g.Dstn.value,blur:g.blur.value,angle:g.lagl.value})}const{angle:u}=Ka(n.transform);return{type:ae.text,width:e.width,height:e.height,top:e.top,left:e.left,text:e.text.value,opacity:e.opacity,textAlign:e.text.font.alignment[0],fontFamily:n.fonts()[0].slice(1).replace("\0",""),fontSize:e.text.font.sizes[0],color:Fe(...qa(e.text.font.colors[0])),textDecoration:s.RunArray[0].StyleSheet.StyleSheetData.Underline?"underline":"",writingMode:n.obj.textData.Ornt.value==="Hrzn"?te.h:te.v,fontWeight:"",fontStyle:"",texts:a,strokes:i,shadows:r,angle:u,transform:Ya(n.transform)}}function Kt(e,t){return{src:t.image.toBase64(),type:ae.image,width:e.width,height:e.height,top:e.top,left:e.left,opacity:e.opacity}}function Ja(e,t){return t.typeTool?Xa(e,t):Kt(e,t)}async function Za(e){const{children:t,document:o}=e.tree().export(),n=r=>e.layers.find(u=>u.name===r.name&&u.top===r.top&&u.right===r.right&&u.bottom===r.bottom&&u.left===r.left&&u.width===r.width&&u.height===r.height),s={color:"#ffffff00",image:""},[l]=t.slice(-1);if(["Background","background","\u80CC\u666F"].includes(l.name)){const r=n(l),u=Kt(l,r);s.image=u.src,t.pop()}const a={background:s,width:o.width,height:o.height,clouds:[]},i=r=>{r.forEach(u=>{if(u.type==="group"&&Array.isArray(u.children))return i(u.children);const d=n(u);if(!d)return;const g=Ja(u,d);a.clouds.unshift(g)})};return i(t),a}async function Qa(e){const t=URL.createObjectURL(e),o=await Ga(t);return URL.revokeObjectURL(t),Za(o)}const ei=(e,t)=>{const{clientWidth:o,clientHeight:n}=document.querySelector(".app-main");let s=o,l=e;const a=e/o;t/n>a&&(s=n,l=t);let r=s/(l+40);return r=Math.floor(r/5*100),r=r*5/100,r};function ct(e){return e.replace(/\n+/g,"").replace(/\/\*.+?\*\//g,"")}const ti="<style>"+ct(Mt)+ct(Rt)+ct(zt)+"</style>",ni=50,ut=100;async function oi(e){var I;const t=(I=e.onProgress)!=null?I:Js,n=pe.vm.subTree.el.querySelector(".sky-renderer").cloneNode(!0),s=pe.state.clouds.filter(m=>m.type===ae.image&&m.mime===Et.gif);let l,a;if(s.length===0){const m=await Yt(n);t(.5),l=await i(m)}else{a=new window.GIF({worker:4,quality:10});const[m,v]=await Promise.all([r(),u()]);if(t(.4),s.length===1)l=await d(m[0],m[0].frames.length,{fontStyles:v});else{const{totalTime:y,frameLen:p,delay:c}=_(m);M(m,y),t(.4),l=await w(m,p,c,{fontStyles:v})}}return t(1),l;function i(m){return new Promise(v=>{const{canvas:y,ctx:p}=Jt(pe.state.width,pe.state.height),c=new Image;c.onload=()=>{p==null||p.drawImage(c,0,0),y.toBlob(h=>{v(h),c.remove(),y.remove()})},c.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m)}`})}async function r(){return await Promise.all(s.map(async v=>{const p=(await li(v.src)).map(h=>De(re({},h),{newDelay:0})),[c]=p;return{frames:p,el:n.querySelector(`[data-cloud-id="${v.id}"] img.image__content`),totalTime:p.reduce((h,C)=>h+C.delay,0),width:c.dims.width,height:c.dims.height}}))}async function u(){const m=pe.state.clouds.filter(c=>c.type===ae.text),v={};m.forEach(c=>{v[c.fontFamily]?v[c.fontFamily]+=c.text:v[c.fontFamily]=c.text});const y=Ae();return await Promise.all(Object.keys(v).map(async c=>{const h=y.list.find($=>$.name===c),C=await Ks({font_id:h.id,content:v[c]}),S=await et(C);v[c]=S})),Object.keys(v).reduce((c,h)=>c+tt(h,v[h]).outerHTML,"")}function d(m,v,{fontStyles:y}={}){return new Promise(async h=>{const C=[];for(let S=0;S<v;S+=1)C.push(p(S));await Promise.all(C),a.on("finished",function(S){h(S)}),a.render(),t(.8)});async function p(h){const C=c(h);g(m,C);const S=await Xt(n,{fontStyles:y});a.addFrame(S,{delay:C.delay})}function c(h){const{length:C}=m.frames;for(;h>=C;)h-=C;return m.frames[h]}}function g(m,v){const{dims:y,patch:p}=v,{canvas:c,ctx:h}=Jt(m.width,m.height);h==null||h.putImageData(new ImageData(p,y.width,y.height),y.left,y.top);const C=c.toDataURL();m.el.src=C}function _(m){const v=m.map($=>$.totalTime),y=Math.min(...v),p=Math.max(...v),c=p/y;let h=0;c>2?h=k(y,p):h=v.reduce(($,O)=>$+O,0)/v.length;let C=ni,S=h/C;return S>ut&&(C=C*(S/ut),S=ut),{totalTime:h,frameLen:S,delay:C}}function k(m,v){const y=v/m,c=y%1>.5?Math.ceil(y):Math.floor(y);return m*c}function M(m,v){m.forEach(y=>{const{totalTime:p,frames:c}=y,h=Math.floor(v/p);let C=v-p;h!==0&&(C=(v-h*p)/h),C!==0&&(c.forEach(S=>{const $=S.delay/p;S.delay+=C*$}),y.totalTime=Math.round(c.reduce((S,$)=>S+$.delay,0)))})}function w(m,v,y,{fontStyles:p}={}){return new Promise(async(S,$)=>{const O=[];for(let A=0;A<v;A+=1)O.push(c(A));await Promise.all(O),t(.8),a.on("finished",function(A){S(A)}),a.render()});async function c(S){const $=await h(S);a.addFrame($,{delay:y})}async function h(S){return m.forEach($=>{const O=C($,S*y);g($,O)}),await Xt(n,{fontStyles:p})}function C(S,$){for(;$>S.totalTime;)$-=S.totalTime;let O=0,A;for(let T=0;T<S.frames.length;T+=1)if(O+=S.frames[T].delay,Math.ceil(O)>=$){A=S.frames[T];break}return A}}}async function Yt(e,{fontStyles:t}={}){e=e.cloneNode(!0),await s();const n=new XMLSerializer().serializeToString(e);return`
    <svg
      xmlns='http://www.w3.org/2000/svg'
      width='${pe.state.width}'
      height='${pe.state.height}'
    >
      ${ti}
      ${t!=null?t:l()}
      <foreignObject
        x='0'
        y='0'
        width='100%'
        height='100%'
      >
        ${n}
      </foreignObject>
    </svg>
  `;function s(){const a=[];let i=Array.from(e.querySelectorAll(`[data-cloud-type="${ae.image}"] .image__content`));if(i=i.filter(u=>!u.src.startsWith("data")),i.length===0)return;return i.forEach(u=>a.push(r(u))),Promise.all(a);async function r(u){const{src:d}=u,g=await si(d);u.src=g}}function l(){let a="";const i=Ae();return Pt().forEach(u=>{a+=tt(u,i.download[u]).outerHTML}),a}}async function Xt(e,{fontStyles:t}={}){const o=await Yt(e,{fontStyles:t});return new Promise((n,s)=>{const l=new Image;l.onload=()=>{n(l)},l.onerror=s,l.src=`data:image/svg+xml;charset=utf-8,${o}`})}async function si(e){const o=await(await fetch(e)).blob();return await et(o)}function Jt(e,t){const o=document.createElement("canvas");o.width=e,o.height=t;const n=o.getContext("2d");return{canvas:o,ctx:n}}function li(e){return fetch(e).then(t=>t.arrayBuffer()).then(t=>xn(t)).then(t=>Cn(t,!0))}function ai(e={}){const{scale:t}=pe.state;return re({fontFamily:It,fontSize:60,textAlign:"left",color:"#000000ff",textDecoration:"none",writingMode:te.h,fontWeight:400,fontStyle:"normal",lineHeight:1,letterSpacing:0,shadows:[],strokes:[],text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57",texts:[{text:"\u70B9\u51FB\u7F16\u8F91\u6587\u5B57"}],type:ae.text,width:360*t,height:60*t},e)}const ii=["https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-162514-cd8e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-171637-c12e.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-173400-043f.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210809-172721-5a2d.gif","https://st-gdx.dancf.com/gaodingx/0/uxms/design/20210728-175810-8e4f.gif"];function ri(e={}){return re({src:ii[Math.floor(Math.random()*5)],type:ae.image,mime:Et.gif},e)}const ci={class:"app-header"},ui=Q("PSD"),di=Q("viewport-"),fi=Q("viewport+"),pi=Q("Adaptive"),mi=Q("Save"),gi=Q("Add Text"),hi=Q("Add Image"),_i=Q("Generate Image"),vi=["href"],yi={setup(e){const t=ee("sky"),o=Ae(),n=H(!1),s=H(0),l=H(""),a=xe({strokeWidth:4,trailWidth:4,svgStyle:{display:"block",width:"200px"}});async function i(y){const p=await Qa(y),c=p.clouds.map(h=>t.cloud.create(h));c.filter(h=>h.type===ae.text).forEach(h=>{o.list.find(S=>S.name===h.fontFamily)||(h.fontFamily=It)}),t.setState(De(re({},p),{clouds:c,scale:1})),await Me(),d()}async function r(){const p=await(await fetch("odyssey-demo.psd")).blob(),c=new File([p],"odyssey-demo.psd");await i(c)}async function u(y){await i(y.target.files[0])}function d(){t.setState({scale:ei(t.state.width/t.state.scale,t.state.height/t.state.scale)})}function g(){t.setState({scale:(Math.round(t.state.scale*100)-5)/100})}function _(){t.setState({scale:1})}function k(){t.setState({scale:(Math.round(t.state.scale*100)+5)/100})}function M(){Wt(t.state)}function w(){t.cloud.push(t.cloud.create(ai()))}function I(){t.cloud.push(t.cloud.create(ri()))}async function m(){n.value=!0,console.time("handleGenerateImage");const y=await oi({onProgress:p=>{n.value&&(s.value=p)}});console.timeEnd("handleGenerateImage"),l.value=URL.createObjectURL(y),console.log(l.value)}function v(){n.value=!1,l.value="",s.value=0}return(y,p)=>{const c=P("SkyButton"),h=P("SkyProgress"),C=P("SkyDialog");return E(),z(K,null,[x("div",ci,[x("input",{type:"file",onChange:u},null,32),f(c,{onClick:r},{default:R(()=>[ui]),_:1}),f(c,{onClick:g},{default:R(()=>[di]),_:1}),f(c,{onClick:_},{default:R(()=>[Q(he(b(t).state.scale),1)]),_:1}),f(c,{onClick:k},{default:R(()=>[fi]),_:1}),f(c,{onClick:d},{default:R(()=>[pi]),_:1}),f(c,{onClick:M},{default:R(()=>[mi]),_:1}),f(c,{onClick:w},{default:R(()=>[gi]),_:1}),f(c,{onClick:I},{default:R(()=>[hi]),_:1}),f(c,{onClick:m},{default:R(()=>[_i]),_:1})]),f(C,{visible:n.value,"onUpdate:visible":p[0]||(p[0]=S=>n.value=S),width:"600px",height:"360px",class:"generate-process",onAfterClose:v},{default:R(()=>[f(h,{percent:s.value,type:"Circle",options:b(a)},null,8,["percent","options"]),x("a",{target:"_blank",class:"block mt-4",href:l.value},he(l.value),9,vi)]),_:1},8,["visible"])],64)}}};var bi=j(yi,[["__scopeId","data-v-5b5ab91f"]]);const wi={name:"AsideCategory"},Si={class:"aside-category"};function xi(e,t,o,n,s,l){return E(),z("div",Si)}var Ci=j(wi,[["render",xi],["__scopeId","data-v-79ac52e0"]]);const ki={class:"app-main"},$i={setup(e){const t=ee("sky"),o=st(),n=D(()=>({width:`${t.state.width}px`,height:`${t.state.height}px`}));return(s,l)=>{const a=P("sky-editor");return E(),z("div",ki,[x("div",{class:"sky-editor-container",style:F(b(n))},[f(a,{class:"sky-editor__app","bg-style":b(o).bgStyle},null,8,["bg-style"])],4)])}}};var Ei=j($i,[["__scopeId","data-v-b6fa9642"]]);const Ii={setup(e){const t=st(),o=Ae(),n=o.fetch();return ue(async()=>{const s=Fa();if(s){const{background:a}=s.bgStyle,i={};if(a.startsWith("url")){i.type="\u56FE\u7247";const[r]=a.match(/(?<=url\()[^)]+/);i.image=r}else i.type="\u989C\u8272",i.color=a;t.setState(i),sky.setState(s)}await n,Pt().forEach(a=>{const i=o.list.find(r=>r.name===a);o.addFont2Style(a,i.content.woff)})}),(s,l)=>(E(),z(K,null,[f(bi),f(Ci),f(Ei)],64))}},$e=kn(Ii);window.app=$e;$e.use($n());$e.component(wt.name,wt);$e.use(us);$e.use(Na);const Mi=$e.mount("#app");console.log("vm",Mi);
